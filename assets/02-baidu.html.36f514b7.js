import{_ as e}from"./gzh.aa7caba6.js";import{_ as o}from"./zsxq.96f46dfd.js";import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";import{o as c,c as l,a as n,b as t,d as s,e as p,r as u}from"./app.c7c1311a.js";const r={},k=n("p",null,"\u6709\u5174\u8DA3\u7684\u53EF\u4EE5\u81EA\u884C\u90E8\u7F72\u5728\u670D\u52A1\u5668\u4E0A\uFF0C\u505A\u6210\u6BCF\u65E5\u81EA\u52A8\u63D0\u4EA4\uFF0C\u6216\u8005 webhook \u89E6\u53D1\u7B49\u3002",-1),d=s("\u767E\u5EA6\u63D0\u4EA4\u9875\u9762\uFF1A"),v={href:"https://ziyuan.baidu.com/linksubmit/index",target:"_blank",rel:"noopener noreferrer"},m=s("https://ziyuan.baidu.com/linksubmit/index"),b=p(`<p>\u901A\u8FC7\u6B64\u9875\u9762\u53EF\u4EE5\u5411\u767E\u5EA6\u641C\u7D22\u4E3B\u52A8\u63A8\u9001\u8D44\u6E90\uFF0C\u540C\u65F6\u767E\u5EA6\u4E5F\u63D0\u4F9B\u4E86 API \u63D0\u4EA4\u63A5\u53E3\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7F29\u77ED\u722C\u866B\u53D1\u73B0\u7F51\u7AD9\u94FE\u63A5\u7684\u65F6\u95F4\uFF0C\u4F46\u767E\u5EA6\u4E0D\u4FDD\u8BC1\u6536\u5F55\u548C\u5C55\u73B0\u6548\u679C\u3002</p><p>\u4EE5\u672C\u7AD9\u4E3A\u4F8B\uFF0C\u767E\u5EA6\u63D0\u4F9B\u4E86 API \u63D0\u4EA4\u7684\u6837\u4F8B\u53C2\u6570\u3002</p><h2 id="\u63A8\u9001\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#\u63A8\u9001\u811A\u672C" aria-hidden="true">#</a> \u63A8\u9001\u811A\u672C</h2><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> requests
<span class="token keyword">import</span> re


<span class="token comment"># \u6839\u636E\u7AD9\u70B9\u5730\u56FE\u83B7\u53D6\u94FE\u63A5</span>
<span class="token keyword">def</span> <span class="token function">get_urls</span><span class="token punctuation">(</span>sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>sitemap<span class="token punctuation">)</span>
    urls <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">&#39;&lt;loc&gt;(.*?)&lt;/loc&gt;&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token keyword">return</span> urls


<span class="token comment"># \u63A8\u9001\u767E\u5EA6 (\u53C2\u6570\uFF1A\u7F51\u7AD9\u7F51\u5740\uFF0Ctoken\uFF0C\u7F51\u7AD9\u7AD9\u70B9\u5730\u56FE)</span>
<span class="token keyword">def</span> <span class="token function">submit_baidu</span><span class="token punctuation">(</span>site<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> token<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> sitemap<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    msg <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    url_list <span class="token operator">=</span> get_urls<span class="token punctuation">(</span>sitemap<span class="token punctuation">)</span>
    <span class="token comment"># print(url_list)</span>
    url_content <span class="token operator">=</span> <span class="token string">&quot;\\n&quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>url_list<span class="token punctuation">)</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f&quot;http://data.zz.baidu.com/urls?site=</span><span class="token interpolation"><span class="token punctuation">{</span>site<span class="token punctuation">}</span></span><span class="token string">&amp;token=</span><span class="token interpolation"><span class="token punctuation">{</span>token<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span>
                             headers<span class="token operator">=</span><span class="token punctuation">{</span>
                                 <span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;curl/7.12.1&quot;</span><span class="token punctuation">,</span>
                                 <span class="token string">&quot;Host&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;data.zz.baidu.com&quot;</span><span class="token punctuation">,</span>
                                 <span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span>
                                 <span class="token string">&quot;Content-Length&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;83&quot;</span>
                             <span class="token punctuation">}</span><span class="token punctuation">,</span>
                             data<span class="token operator">=</span>url_content
                             <span class="token punctuation">)</span>
    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
        msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u6210\u529F\u63A8\u9001\u7684 url \u6761\u6570 </span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u5F53\u5929\u5269\u4F59\u7684\u53EF\u63A8\u9001url\u6761\u6570 </span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;remain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;\u4ECA\u65E5\u63A8\u9001\u7684 url \u5217\u8868:&#39;</span></span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> url <span class="token keyword">in</span> url_list<span class="token punctuation">:</span>
            msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;not_same_site&#39;</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;\u7531\u4E8E\u4E0D\u662F\u672C\u7AD9url\u800C\u672A\u5904\u7406\u7684url\u5217\u8868:&#39;</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> url <span class="token keyword">in</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;not_same_site&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;not_valid&#39;</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;\u4E0D\u5408\u6CD5\u7684url\u5217\u8868:&#39;</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> url <span class="token keyword">in</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;not_valid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

    <span class="token keyword">else</span><span class="token punctuation">:</span>
        msg<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;\u63A8\u9001\u5931\u8D25\\n</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> msg


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span> submit_baidu<span class="token punctuation">(</span>site<span class="token operator">=</span><span class="token string">&#39;https://bornforthis.cn&#39;</span><span class="token punctuation">,</span> token<span class="token operator">=</span><span class="token string">&#39;rJcdDY5O4W9rd9eG&#39;</span><span class="token punctuation">,</span>
                            sitemap<span class="token operator">=</span><span class="token string">&#39;https://www.bornforthis.cn/sitemap.xml&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;\\n&#39;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8FDB\u9636\u7248\u672C\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u9636\u7248\u672C\u4EE3\u7801" aria-hidden="true">#</a> \u8FDB\u9636\u7248\u672C\u4EE3\u7801</h2><p>\u4F7F\u7528\u524D\u9700\u8981\u6CE8\u610F\u66FF\u6362\u771F\u5B9E\u53C2\u6570\uFF1A</p><ul><li>site</li><li>token</li><li>sitemap_path</li></ul><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment"># -*- coding: UTF-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
<span class="token keyword">import</span> re


<span class="token keyword">class</span> <span class="token class-name">Pusher</span><span class="token punctuation">:</span>
    <span class="token comment"># \u521D\u59CB\u5316\u53C2\u6570</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> site<span class="token punctuation">,</span> token<span class="token punctuation">,</span> sitemap_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>site <span class="token operator">=</span> site
        self<span class="token punctuation">.</span>token <span class="token operator">=</span> token
        self<span class="token punctuation">.</span>sitemap_path <span class="token operator">=</span> sitemap_path

    <span class="token comment"># \u6279\u91CF\u63D0\u4EA4 url</span>
    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> urls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        post_url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;http://data.zz.baidu.com/urls?site=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>site<span class="token punctuation">}</span></span><span class="token string">&amp;token=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>token<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
        headers <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;User-Agent&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;curl/7.12.1&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;Host&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;data.zz.baidu.com&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;Content-Length&#39;</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>post_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>urls<span class="token punctuation">)</span>

        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">:</span>
            msg_s <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;\u63A8\u9001\u5931\u8D25\uFF08\u5F02\u5E38\u72B6\u6001\u7801\uFF09\uFF1A</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">}</span></span><span class="token string">\\n</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>msg_s<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>
        response <span class="token operator">=</span> response<span class="token punctuation">.</span>text
        response <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token string">&quot;error&quot;</span> <span class="token keyword">in</span> response<span class="token punctuation">:</span>
            msg_s <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;\u63A8\u9001\u5931\u8D25\uFF08error\uFF09:\\n</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>msg_s<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>

        <span class="token keyword">if</span> <span class="token string">&quot;success&quot;</span> <span class="token keyword">not</span> <span class="token keyword">in</span> response<span class="token punctuation">:</span>
            msg_s <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;\u63A8\u9001\u5F02\u5E38\uFF08\u767E\u5EA6\u5DF2\u66F4\u6539\u8FD4\u56DE\u4F53\u683C\u5F0F\uFF09:\\n</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>msg_s<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u5DF2\u6210\u529F\u63A8\u9001 </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">[</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> \u6761 url&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u5F53\u5929\u5269\u4F59\u7684\u53EF\u63A8\u9001 url \u6761\u6570 ---&gt; </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">[</span><span class="token string">&#39;remain&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u7531\u4E8E\u4E0D\u662F\u672C\u7AD9url\u800C\u672A\u5904\u7406\u7684 url \u5217\u8868:</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">[</span><span class="token string">&#39;not_same_site&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u4E0D\u5408\u6CD5\u7684 url \u5217\u8868:</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">[</span><span class="token string">&#39;not_valid&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>

    <span class="token comment"># \u83B7\u53D6\u7AD9\u70B9 sitemap.xml \u6587\u4EF6\u5185\u5BB9, \u89E3\u6790 url</span>
    <span class="token keyword">def</span> <span class="token function">get_url_from_sitemap</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>site<span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>sitemap_path<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
        headers <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;User-Agent&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u83B7\u53D6\u7AD9\u70B9 xml \u6587\u4EF6\u5931\u8D25\uFF08\u5F02\u5E38\u72B6\u6001\u7801\uFF09\uFF1A</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

        sitemap_xml <span class="token operator">=</span> response<span class="token punctuation">.</span>text

        urls <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r&#39;&lt;loc&gt;(.*?)&lt;/loc&gt;&#39;</span><span class="token punctuation">,</span> sitemap_xml<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>

        <span class="token keyword">if</span> urls <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> urls <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">or</span> urls <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u89E3\u6790 url \u5931\u8D25\uFF08\u8BE5\u7AD9\u70B9\u4E0D\u5B58\u5728 sitemap.xml \u6216\u5185\u5BB9\u4E3A\u7A7A\uFF09&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\u83B7\u53D6\u7AD9\u70B9 xml \u6587\u4EF6\u6210\u529F, \u5171\u6709\uFF1A</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> \u6761 url&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span>
        <span class="token keyword">return</span> urls

    <span class="token comment"># \u5165\u53E3</span>
    <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        urls <span class="token operator">=</span> <span class="token string">&quot;\\n&quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_url_from_sitemap<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>post<span class="token punctuation">(</span>urls<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    <span class="token comment"># \u7AD9\u70B9</span>
    site <span class="token operator">=</span> <span class="token string">&quot;https://bornforthis.cn&quot;</span>
    <span class="token comment"># \u767E\u5EA6\u63D0\u4EA4\u9875\u9762\u63D0\u4F9B\u7684 token</span>
    token <span class="token operator">=</span> <span class="token string">&quot;rJcdDY5O4W9rd9eG&quot;</span>
    <span class="token comment"># \u7AD9\u70B9 sitemap uri</span>
    <span class="token comment"># sitemap_path = &quot;/zh-cn/sitemap.xml&quot;</span>
    sitemap_path <span class="token operator">=</span> <span class="token string">&quot;/sitemap.xml&quot;</span>

    pusher <span class="token operator">=</span> Pusher<span class="token punctuation">(</span>site<span class="token punctuation">,</span> token<span class="token punctuation">,</span> sitemap_path<span class="token punctuation">)</span>
    pusher<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u4EF6" aria-hidden="true">#</a> \u53C2\u8003\u6587\u4EF6</h2>`,9),g={href:"https://ziyuan.baidu.com/college/courseinfo?id=267&page=3s",target:"_blank",rel:"noopener noreferrer"},_=s("https://ziyuan.baidu.com/college/courseinfo?id=267&page=3s"),y=n("li",null,null,-1),h=p(`<p>\u6B22\u8FCE\u5173\u6CE8\u6211\u516C\u4F17\u53F7\uFF1AAI\u60A6\u521B\uFF0C\u6709\u66F4\u591A\u66F4\u597D\u73A9\u7684\u7B49\u4F60\u53D1\u73B0\uFF01</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> requests
<span class="token keyword">import</span> re
<span class="token keyword">import</span> time
headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;User-Agent&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36,&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Host&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;data.zz.baidu.com&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Content-Length&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;83&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;links.txt\u793A\u4F8B:\\nhttps://xxxxx.html\\nhttps://xxxxx.html\\nhttps://xxxxx.html\\nhttps://xxxxx.html&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;api\u793A\u4F8B:\\nhttp://data.zz.baidu.com/urls?site=xxxxxxxxxxx&#39;</span><span class="token punctuation">)</span>
push_num <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">while</span> push_num <span class="token operator">&lt;</span> <span class="token number">9999</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> push_num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        answer <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u95EE\u4F60\u662F\u5426\u5DF2\u7ECF\u5C06\u94FE\u63A5\u586B\u5165links.txt\uFF0Capi\u586B\u5165api.txt\u4E2D\u5462\uFF0C\u5982\u679C\u662F\u5219\u56DE\u7B541\\n&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> answer <span class="token operator">==</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&#39;links.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;r&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> links<span class="token punctuation">:</span>
                links <span class="token operator">=</span> links<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;links.txt\u6587\u4EF6\u4E0D\u5B58\u5728&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&#39;api.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;r&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> api<span class="token punctuation">:</span>
                api <span class="token operator">=</span> api<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;links.txt\u6587\u4EF6\u4E0D\u5B58\u5728&quot;</span><span class="token punctuation">)</span>

        <span class="token keyword">def</span> <span class="token function">thinklink</span><span class="token punctuation">(</span>links<span class="token punctuation">,</span> api<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> links <span class="token operator">==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;links.txt\u6587\u4EF6\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> api <span class="token operator">==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">:</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;api.txt\u4E3A\u7A7A&#39;</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">try</span><span class="token punctuation">:</span>
                        html_result <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>api<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> data<span class="token operator">=</span>links<span class="token punctuation">)</span><span class="token punctuation">.</span>text
                        <span class="token keyword">return</span> html_result
                    <span class="token keyword">except</span><span class="token punctuation">:</span>
                        <span class="token keyword">return</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u5931\u8D25&quot;</span><span class="token punctuation">)</span>
        push_result <span class="token operator">=</span> thinklink<span class="token punctuation">(</span>links<span class="token punctuation">,</span> api<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;\u63D0\u4EA4\u5B8C\u6210:&#39;</span><span class="token operator">+</span>push_result<span class="token punctuation">)</span>
        surplus_push_num <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">&#39;&quot;remain&quot;:(.*),&quot;&#39;</span><span class="token punctuation">,</span> push_result<span class="token punctuation">)</span>
        surplus_push_num <span class="token operator">=</span> surplus_push_num<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;\u5269\u4F59&#39;</span> <span class="token operator">+</span> surplus_push_num <span class="token operator">+</span> <span class="token string">&#39;\u6B21\u63D0\u4EA4\u673A\u4F1A&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u5C06\u5185\u5BB9\u586B\u5145!5\u79D2\u949F\u540E\u81EA\u52A8\u5173\u95ED&quot;</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span>
    new_answer <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;\u662F\u5426\u8FD8\u9700\u8981\u63D0\u4EA4\uFF0C\u5982\u679C\u662F\u7684\u8BDD\u8BF7\u5148\u53BB\u66F4\u6539\u4E00\u4E0B\u76F8\u5E94\u6587\u4EF6\uFF0C\u5982\u679C\u662F\u8BF7\u8F93\u51651,\u5982\u679C\u5426\u8BF7\u8F93\u51650\\n&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> new_answer <span class="token operator">==</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u63D0\u4EA4\u7ED3\u675F,5\u79D2\u949F\u540E\u81EA\u52A8\u5173\u95ED&quot;</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
    push_num <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u73B0\u5728\u5F00\u59CB\u7B2C&quot;</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>push_num<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;\u6B21\u63D0\u4EA4&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9700\u8981\u5728 python \u6587\u4EF6\u65B0\u5EFA\u4E24\u4E2A txt \u6587\u4EF6\uFF0C\u5206\u522B\u653E token \u548C\u94FE\u63A5\u3002</p><p>\u7136\u540E\u5176\u5B9E\u5C31\u53EF\u4EE5\u76F4\u63A5\u53CC\u51FB\u6253\u5F00 python \u6587\u4EF6\u8FDB\u884C\u63D0\u4EA4\u4E86\u3002\u5982\u679C\u6709\u4EC0\u4E48\u7591\u95EE\u53EF\u4EE5\u76F4\u63A5\u95EE\u3002</p><p>\u5229\u7528 python \u5411\u767E\u5EA6\u63A8\u9001\u7F51\u7AD9\u94FE\u63A5</p><p>\u6B22\u8FCE\u5173\u6CE8\u6211\u516C\u4F17\u53F7\uFF1AAI\u60A6\u521B\uFF0C\u6709\u66F4\u591A\u66F4\u597D\u73A9\u7684\u7B49\u4F60\u53D1\u73B0\uFF01</p><details class="custom-container details"><summary>\u516C\u4F17\u53F7\uFF1AAI\u60A6\u521B\u3010\u4E8C\u7EF4\u7801\u3011</summary><p><img src="`+e+'" alt=""></p></details>',7),w={class:"custom-container info"},q=n("p",{class:"custom-container-title"},"AI\u60A6\u521B\xB7\u7F16\u7A0B\u4E00\u5BF9\u4E00",-1),f=n("p",null,"AI\u60A6\u521B\xB7\u63A8\u51FA\u8F85\u5BFC\u73ED\u5566\uFF0C\u5305\u62EC\u300CPython \u8BED\u8A00\u8F85\u5BFC\u73ED\u3001C++ \u8F85\u5BFC\u73ED\u3001java \u8F85\u5BFC\u73ED\u3001\u7B97\u6CD5/\u6570\u636E\u7ED3\u6784\u8F85\u5BFC\u73ED\u3001\u5C11\u513F\u7F16\u7A0B\u3001pygame \u6E38\u620F\u5F00\u53D1\u300D\uFF0C\u5168\u90E8\u90FD\u662F\u4E00\u5BF9\u4E00\u6559\u5B66\uFF1A\u4E00\u5BF9\u4E00\u8F85\u5BFC + \u4E00\u5BF9\u4E00\u7B54\u7591 + \u5E03\u7F6E\u4F5C\u4E1A + \u9879\u76EE\u5B9E\u8DF5\u7B49\u3002\u5F53\u7136\uFF0C\u8FD8\u6709\u7EBF\u4E0B\u7EBF\u4E0A\u6444\u5F71\u8BFE\u7A0B\u3001Photoshop\u3001Premiere \u4E00\u5BF9\u4E00\u6559\u5B66\u3001QQ\u3001\u5FAE\u4FE1\u5728\u7EBF\uFF0C\u968F\u65F6\u54CD\u5E94\uFF01\u5FAE\u4FE1\uFF1AJiabcdefh",-1),x=n("p",null,"C++ \u4FE1\u606F\u5965\u8D5B\u9898\u89E3\uFF0C\u957F\u671F\u66F4\u65B0\uFF01\u957F\u671F\u62DB\u6536\u4E00\u5BF9\u4E00\u4E2D\u5C0F\u5B66\u4FE1\u606F\u5965\u8D5B\u96C6\u8BAD\uFF0C\u8386\u7530\u3001\u53A6\u95E8\u5730\u533A\u6709\u673A\u4F1A\u7EBF\u4E0B\u4E0A\u95E8\uFF0C\u5176\u4ED6\u5730\u533A\u7EBF\u4E0A\u3002\u5FAE\u4FE1\uFF1AJiabcdefh",-1),z=s("\u65B9\u6CD5\u4E00\uFF1A"),N={href:"http://wpa.qq.com/msgrd?v=3&uin=1432803776&site=qq&menu=yes",target:"_blank",rel:"noopener noreferrer"},A=s("QQ"),C=n("p",null,"\u65B9\u6CD5\u4E8C\uFF1A\u5FAE\u4FE1\uFF1AJiabcdefh",-1),j=n("p",null,[n("img",{src:o,alt:""})],-1);function I(T,W){const a=u("ExternalLinkIcon");return c(),l("div",null,[k,n("p",null,[d,n("a",v,[m,t(a)])]),b,n("ul",null,[n("li",null,[n("a",g,[_,t(a)])]),y]),h,n("div",w,[q,f,x,n("p",null,[z,n("a",N,[A,t(a)])]),C]),j])}var H=i(r,[["render",I],["__file","02-baidu.html.vue"]]);export{H as default};
