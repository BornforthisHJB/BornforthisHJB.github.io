import{_ as a}from"./gzh-DnOBNg6W.js";import{_ as n}from"./zsxq-BcdwOI-_.js";import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as l,f as i,o as t}from"./app-DkLsrUFz.js";const o="/assets/image-20220717143802293-Cgsl_cWM.png",p="/assets/image-20220717144442354-0wZD_30k.png",c="/assets/image-20220717150958014-DM4obGja.png",r="/assets/image-20220717152956276-boBkkgWg.png",d="/assets/image-20220717154945628-igPXsNtx.png",u={};function F(m,s){return t(),l("div",null,s[0]||(s[0]=[i('<h2 id="链接和查询代码" tabindex="-1"><a class="header-anchor" href="#链接和查询代码"><span>链接和查询代码</span></a></h2><p>Python 自身携带 sqlite 库，不需要额外安装，直接使用即可。导入代码：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sqlite3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>导入代码之后，将 <code>first.db</code> 文件，放到代码文件旁边。这里用的是 py，所以是把 py 和 <code>first.db</code> 文件放一起，不放一起就只能使用绝对路径。如下图：</p><figure><img src="'+o+`" alt="image-20220717143802293" tabindex="0" loading="lazy"><figcaption>image-20220717143802293</figcaption></figure><p>然后使用 sqlite3 库，链接 <code>first.db</code> 文件，代码 <code>firstdb = sqlite3.connect(&#39;first.db&#39;)</code></p><p>正常运行后，写查询语句，从数据库中读取全部数据，如下代码：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 查询语句</span></span>
<span class="line"><span style="color:#F8F8F2;">query_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;select * from info&quot;</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> result </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> firstdb.execute(query_sql):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完整代码：</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># -*- coding: utf-8 -*-</span></span>
<span class="line"><span style="color:#88846F;"># @Time    : 2022/7/17 14:36</span></span>
<span class="line"><span style="color:#88846F;"># @Author  : AI悦创</span></span>
<span class="line"><span style="color:#88846F;"># @FileName: main.py</span></span>
<span class="line"><span style="color:#88846F;"># @Software: PyCharm</span></span>
<span class="line"><span style="color:#88846F;"># @Blog    ：http://www.aiyc.top</span></span>
<span class="line"><span style="color:#88846F;"># @公众号   ：AI悦创</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sqlite3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">firstdb </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sqlite3.connect(</span><span style="color:#E6DB74;">&quot;first.db&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 查询语句</span></span>
<span class="line"><span style="color:#F8F8F2;">query_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;select * from info&quot;</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> result </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> firstdb.execute(query_sql):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span>
<span class="line"><span style="color:#88846F;"># firstdb.execute(): Executes an SQL statement./执行 SQL 语句。</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">list</span><span style="color:#F8F8F2;">(firstdb.execute(query_sql)))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>输出结构效果图：</p><figure><img src="`+p+`" alt="image-20220717144442354" tabindex="0" loading="lazy"><figcaption>image-20220717144442354</figcaption></figure><p>这是最简单的查询语句。数据库都是支持查询、删除、增加、更新操作的。</p><h2 id="删除数据操作" tabindex="-1"><a class="header-anchor" href="#删除数据操作"><span>删除数据操作</span></a></h2><p>删除操作，将数据从数据库中移除，关键词 delete，先删除一条数据，如下代码：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 删除特定数据</span></span>
<span class="line"><span style="color:#F8F8F2;">delete_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;delete from info where id = 1&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">firstdb.execute(delete_sql)</span></span>
<span class="line"><span style="color:#F8F8F2;">firstdb.commit()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 查询并输出</span></span>
<span class="line"><span style="color:#F8F8F2;">query_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;select * from info&quot;</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> result </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> firstdb.execute(query_sql):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下图：</p><figure><img src="`+c+`" alt="image-20220717150958014" tabindex="0" loading="lazy"><figcaption>image-20220717150958014</figcaption></figure><h2 id="插入更多数据" tabindex="-1"><a class="header-anchor" href="#插入更多数据"><span>插入更多数据</span></a></h2><p>增加的操作，关键词 add，使用 for 循环，先批量的增加一些数据：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 插入数据</span></span>
<span class="line"><span style="color:#F8F8F2;">insert_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;insert into info(title, content, author) values (&#39;第</span><span style="color:#AE81FF;">{}</span><span style="color:#E6DB74;">个标题&#39;, &#39;随机的第</span><span style="color:#AE81FF;">{}</span><span style="color:#E6DB74;">个内容&#39;, &#39;匿名&#39;)&quot;</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">20</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    sql </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> insert_sql.format(i, i </span><span style="color:#F92672;">*</span><span style="color:#AE81FF;"> 2</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    firstdb.execute(sql)</span></span>
<span class="line"><span style="color:#F8F8F2;">    firstdb.commit()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 查询并输出</span></span>
<span class="line"><span style="color:#F8F8F2;">query_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;select * from info&quot;</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> result </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> firstdb.execute(query_sql):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>for 循环，从 10 循环到 20，不含 20，然后全部执行 sql 语句和提交到数据库。最后查询全部数据，看下有没有增多，如下结果图：</p><figure><img src="`+r+`" alt="image-20220717152956276" tabindex="0" loading="lazy"><figcaption>image-20220717152956276</figcaption></figure><h2 id="更新数据操作" tabindex="-1"><a class="header-anchor" href="#更新数据操作"><span>更新数据操作</span></a></h2><p>数据有增加，最后更新数据，关键词 update，做个条件更新，id 大于等于 4 的数据，设置 author 为“不匿名”，如下代码：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 更新数据</span></span>
<span class="line"><span style="color:#F8F8F2;">update_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;update info set author = &#39;不匿名&#39; where id &gt;= 4&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">firstdb.execute(update_sql)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 查询并输出</span></span>
<span class="line"><span style="color:#F8F8F2;">query_sql </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;select * from info&quot;</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> result </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> firstdb.execute(query_sql):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后的结果图如下：</p><figure><img src="`+d+'" alt="image-20220717154945628" tabindex="0" loading="lazy"><figcaption>image-20220717154945628</figcaption></figure><p>以上就是 Python 操作 sqlite 的全部代码了。</p><p><strong>【多选题】小练习</strong></p><p>数据库支持哪些操作？</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> 查询数据</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> 新增数据</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> 更新数据</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> 删除数据</label></li></ul><blockquote><p>该数据库是单数据库操作，不要打开多个，这样有可能会锁死。</p></blockquote><p>欢迎关注我公众号：AI悦创，有更多更好玩的等你发现！</p><details class="hint-container details"><summary>公众号：AI悦创【二维码】</summary><figure><img src="'+a+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></details><div class="hint-container info"><p class="hint-container-title">AI悦创·编程一对一</p><p>AI悦创·推出辅导班啦，包括「Python 语言辅导班、C++ 辅导班、java 辅导班、算法/数据结构辅导班、少儿编程、pygame 游戏开发」，全部都是一对一教学：一对一辅导 + 一对一答疑 + 布置作业 + 项目实践等。当然，还有线下线上摄影课程、Photoshop、Premiere 一对一教学、QQ、微信在线，随时响应！微信：Jiabcdefh</p><p>C++ 信息奥赛题解，长期更新！长期招收一对一中小学信息奥赛集训，莆田、厦门地区有机会线下上门，其他地区线上。微信：Jiabcdefh</p><p>方法一：<a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1432803776&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener noreferrer">QQ</a></p><p>方法二：微信：Jiabcdefh</p></div><figure><img src="'+n+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',37)]))}const g=e(u,[["render",F],["__file","auto_base10.html.vue"]]),f=JSON.parse('{"path":"/Python/pyauto/auto_base10.html","title":"10-Python 链接和操作 sqlite","lang":"zh-CN","frontmatter":{"title":"10-Python 链接和操作 sqlite","date":"2022-07-17T14:22:06.000Z","author":"AI悦创","isOriginal":true,"category":"Python 办公自动化","tag":["Python 办公自动化"],"icon":"python","sticky":false,"star":false,"article":true,"timeline":true,"image":false,"navbar":true,"sidebarIcon":true,"headerDepth":5,"comment":true,"lastUpdated":true,"editLink":true,"prev":"auto_base09.md","next":"auto_base11.md","backToTop":true,"toc":true,"feed":false,"seo":false,"head":[]},"git":{"createdTime":1706497934000,"updatedTime":1706497934000,"contributors":[{"name":"AndersonHJB","username":"AndersonHJB","email":"cleland1432803776@icloud.com","commits":1,"url":"https://github.com/AndersonHJB"}]},"readingTime":{"minutes":3.06,"words":917},"filePathRelative":"Python/pyauto/auto_base10.md","localizedDate":"2022年7月17日","copyright":{"author":"AI悦创"}}');export{g as comp,f as data};
