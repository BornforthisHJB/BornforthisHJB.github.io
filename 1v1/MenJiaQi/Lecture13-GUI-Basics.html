<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.93" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Lecture 13 GUI Basics","image":["https://bornforthis.cn/gzh.jpg","https://bornforthis.cn/zsxq.jpg"],"datePublished":"2025-03-05T23:22:59.000Z","dateModified":"2025-07-04T03:57:54.000Z","author":[{"@type":"Person","name":"AIÊÇ¶Âàõ"}]}</script><meta property="og:url" content="https://bornforthis.cn/1v1/MenJiaQi/Lecture13-GUI-Basics.html"><meta property="og:site_name" content="AIÊÇ¶Âàõ-Python‰∏ÄÂØπ‰∏ÄËæÖÂØº"><meta property="og:title" content="Lecture 13 GUI Basics"><meta property="og:description" content="ÂéüÊñá 1. ‰∏ªË¶ÅÂÜÖÂÆπ ModelÔºö Ë¥üË¥£Â≠òÂÇ®ÂíåÂ∞ÅË£ÖÊï∞ÊçÆÈÄªËæëÔºõ ViewÔºö Ë¥üË¥£Â±ïÁ§∫Êï∞ÊçÆÔºåÂèØ‰ª•ÊòØÊñáÊú¨ÁïåÈù¢Ôºå‰πüÂèØ‰ª•ÊòØÂõæÂΩ¢ÁïåÈù¢Ôºõ ControllerÔºö Ë¥üË¥£ÂçèË∞ÉÁî®Êà∑ËæìÂÖ•‰∏éÂØπ Model ÁöÑÊìç‰ΩúÔºåÂπ∂ÈÄöÁü• View ÂÅöÂá∫Áõ∏Â∫îÊõ¥Êñ∞Ôºõ Êàë‰ª¨‰ºöÂÖàÂ±ïÁ§∫‰∏Ä‰∏™ÊñáÊú¨ÁïåÈù¢ÁâàÊú¨ÔºåÈöèÂêéÊºîÁ§∫Â¶Ç‰ΩïÂàáÊç¢Âà∞ÂõæÂΩ¢ÁïåÈù¢ÔºàGUIÔºâÔºå‰ª•ÂèäÂ¶Ç‰Ωï‰∏ÄÊ≠•Ê≠•ÊîπËøõ„ÄÅËß£ËÄ¶ËßÜÂõæÂíåÊéßÂà∂Âô®„ÄÅÂ§ÑÁêÜÈîÆÁõò‰∫ã‰ª∂Á≠â„ÄÇ Sta..."><meta property="og:type" content="article"><meta property="og:image" content="https://bornforthis.cn/gzh.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-07-04T03:57:54.000Z"><meta property="article:author" content="AIÊÇ¶Âàõ"><meta property="article:published_time" content="2025-03-05T23:22:59.000Z"><meta property="article:modified_time" content="2025-07-04T03:57:54.000Z"><link rel="shortcut icon" href="/aiyc.svg"><meta name="keywords" content="‰∏ÄÂØπ‰∏ÄËæÖÂØºÁºñÁ®ã,ÁºñÁ®ã1v1,CSËæÖÂØº,ÁºñÁ®ã‰∏ÄÂØπ‰∏ÄËæÖÂØº,Â∞ëÂÑøÁºñÁ®ã‰∏ÄÂØπ‰∏Ä,Python 1v1,AIÊÇ¶Âàõ,‰∏ÄÂØπ‰∏Ä,ËèúÈ∏üÊïôÁ®ã,Python,ÁºñÁ®ã‰∏ÄÂØπ‰∏Ä,C++,Java,AI,‰∫∫Â∑•Êô∫ËÉΩ,ÈªÑÂÆ∂ÂÆù,Python‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶,PythonËæÖÂØº,ÁïôÂ≠¶ÁîüCSËæÖÂØº,ChatGPT‰ª£Ê≥®ÂÜå"><meta name="description" content="Python‰∏ÄÂØπ‰∏ÄËæÖÂØº,ÁºñÁ®ã1v1,Java‰∏ÄÂØπ‰∏ÄËæÖÂØº,‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶ËæÖÂØº,CSËæÖÂØº,Èù¢ËØïËæÖÂØº,Áà¨Ëô´‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶,ËèúÈ∏üÊïôÁ®ã,ÁºñÁ®ã‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶,Â∞ëÂÑøÁºñÁ®ã‰∏ÄÂØπ‰∏Ä,‰∫∫Â∑•Êô∫ËÉΩ,ÈªÑÂÆ∂ÂÆù,ÂÖ®ÁΩë3000+Â≠¶Âëò,ÂÄºÂæó‰ø°Ëµñ,Python‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶,Java‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶,ÁïôÂ≠¶ÁîüCSËæÖÂØº,ChatGPT‰ª£Ê≥®ÂÜå"><title>Lecture 13 GUI Basics | AIÊÇ¶Âàõ-Python‰∏ÄÂØπ‰∏ÄËæÖÂØº</title>
    <link rel="preload" href="/assets/style-CknMNbnY.css" as="style"><link rel="stylesheet" href="/assets/style-CknMNbnY.css">
    <link rel="modulepreload" href="/assets/app-VQgfo9Ry.js"><link rel="modulepreload" href="/assets/Lecture13-GUI-Basics.html-Chz3QBCe.js"><link rel="modulepreload" href="/assets/gzh-DnOBNg6W.js"><link rel="modulepreload" href="/assets/zsxq-BcdwOI-_.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Ë∑≥Ëá≥‰∏ªË¶ÅÂÖßÂÆπ</a><!--]--><div class="theme-container no-sidebar external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="Â∏¶ÊàëÂõûÂÆ∂"><img class="vp-nav-logo" src="/aiyc.svg" alt><!----><span class="vp-site-name hide-in-pad">AIÊÇ¶Âàõ-Python‰∏ÄÂØπ‰∏ÄËæÖÂØº</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ÈªÑÂÆ∂ÂÆù"><!--[--><i class="vp-icon iconfont icon-home" sizing="height"></i><!--]-->ÈªÑÂÆ∂ÂÆù<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/R-Course/" aria-label="R-Course"><!--[--><i class="vp-icon iconfont icon-cib-r" sizing="height"></i><!--]-->R-Course<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Python/" aria-label="Python"><!--[--><i class="vp-icon iconfont icon-python" sizing="height"></i><!--]-->Python<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Java/" aria-label="Java"><!--[--><i class="vp-icon iconfont icon-java" sizing="height"></i><!--]-->Java<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/1v1/" aria-label="1v1"><!--[--><i class="vp-icon iconfont icon-idea" sizing="height"></i><!--]-->1v1<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/AndersonHJB" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-blog" sizing="height"></i>Lecture 13 GUI Basics</h1><div class="page-info"><span class="page-author-info" aria-label="‰ΩúËÄÖüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">AIÊÇ¶Âàõ</span></span><span property="author" content="AIÊÇ¶Âàõ"></span></span><span class="page-original-info">ÂéüÂàõ</span><span class="page-date-info" aria-label="ÂÜô‰ΩúÊó•ÊúüüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025/3/5</span><meta property="datePublished" content="2025-03-05T23:22:59.000Z"></span><span class="page-pageview-info" aria-label="ËÆøÈóÆÈáèüî¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/1v1/MenJiaQi/Lecture13-GUI-Basics.html" data-page-key="/1v1/MenJiaQi/Lecture13-GUI-Basics.html">...</span></span><span class="page-reading-time-info" aria-label="ÈòÖËØªÊó∂Èó¥‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>Â§ßÁ∫¶ 43 ÂàÜÈíü</span><meta property="timeRequired" content="PT43M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><details class="hint-container details"><summary>ÂéüÊñá</summary><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F8F8F2;">## </span><span style="color:#AE81FF;">1.</span><span style="color:#66D9EF;font-style:italic;"> Introduction</span><span style="color:#F8F8F2;"> to </span><span style="color:#66D9EF;font-style:italic;">Views</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">So</span><span style="color:#F8F8F2;"> far we‚Äôve worked on designing </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">models</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> to represent the data relevant to a problem domain, in a form that encapsulates the data behind an </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">that</span><span style="color:#F8F8F2;"> clients can use without having to know any implementation details. The model is responsible for ensuring that it can‚Äôt get stuck in a bogus or invalid state, and exposes whatever appropriate observations and operations are needed while still preserving this integrity constraint.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">We‚Äôve also worked on simple synchronous *controllers* that allow users to interact with a model, in a form that encapsulates the user interactions and can provide feedback to users without having to redundantly ensure any integrity constraints. Moreover, controllers can be customized or enhanced without needing to change the model, making the model more convenient to use without making it any more complex.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Now, it‚Äôs time to introduce the third part of the MVC trio: *views*. Views are renderings of the data in the model, and can be as simple as printing debug output to a console, as complex as fancy graphical user interfaces, or anything in between. Dealing with GUIs also brings additional challenges, and we will discuss some of them.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">### 1.1 Outline</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">This lecture starts by adding a text-based, interactive view to the program. This is closest to our earlier design for the controller, but it carves out a view cleanly. This example also illustrates the typical interactions between the model, view and controller in a simple manner.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">We then progressively transition to graphical user interfaces. We start with *poorly-designed but working* code, and improve it in three stages. Initially, the code for the view will directly manipulate the model. Our first incremental improvement will decouple the view from the model so that it need not ‚Äî and in fact *cannot* ‚Äî do so. Our second improvement will add a new feature to the view, and add the ability to control that in the controller. Finally, our third improvement will generalize the controller to make its UI triggers more customizable.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">The code for this lecture is available at the top of this page, as the [MVC code](https:</span><span style="color:#88846F;">//course.ccs.neu.edu/cs3500/lec/gui_basics/code.zip) link. The second link provides code for a program with an incomplete GUI. It is recommended that you complete this exercise to practice with GUIs. Finally the third link provides a solution for this GUI.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## 2. Design</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">All examples in this lecture follow a common design. The model state (interface `IModel` and implementation `Model`) consists of a single `String` and offers methods to get and update it. All views (coupled with controllers wherever applicable) expose functionality to interactively show this string, and to update it.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">### 3` `Text-based UI</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">In the TextUI directory we show a text-based user interface. The IView </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">encapsulates</span><span style="color:#F8F8F2;"> all the methods that a view‚Äôs client would need to call: note how they correspond roughly to the ‚Äúthings‚Äù that a controller would need to tell the view to do. The TextView </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">implements</span><span style="color:#F8F8F2;"> this interface. It transmits all messages to a PrintStream object provided to it through its constructor. Similar to the design in [Lecture 8](https:</span><span style="color:#88846F;">//course.ccs.neu.edu/cs3500/lec_controllers_mocks_notes.html) this allows us to test the view using any suitable PrintStream object.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">The IController </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">represents</span><span style="color:#F8F8F2;"> a controller: it has only method which is called to give control of the application to the controller. The TextController </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">implements</span><span style="color:#F8F8F2;"> the controller. It works with IModel, IView and Scanner objects to handle model, view and data input functionality respectively. At its heart, the controller goes through a loop that provides users with some options, takes further inputs depending on the chosen options and delegates to the model and view accordingly. Since the sequence of operations is largely fixed, this qualifies as a *synchronous* controller.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## 4. Stage 1: Introduction to GUIs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">In the BadDesignButFunctional directory, we have a poorly written implementation of a simple program that uses the same model, but a graphical user interface.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Our `main()` method constructs a `Model`, and constructs a view that is given a reference to the model. The view interface (`IView`) has only three methods: to obtain the text the user has typed in to the text box, to clear that text box, and to echo a string to the label in the UI. The implementation of the view, `JFrameView`, is markedly more complicated in appearance than expected, but it breaks down into several simpler parts.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">### 4.1 Frames and controls</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Our program uses the Swing framework to show its UI. In Swing, an individual window is known as a *frame*, which can contain controls known as *components*. To create our own window, we design a </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">that</span><span style="color:#F8F8F2;"> subclasses from `JFrame`, do some work to establish the components in it, and then call `setVisible` to display the window. Within the constructor of our frame, we create four components: a *label* to show some text, a *text box* to edit text, and two *buttons*. Adding several controls to a frame requires that we give them a *layout*, which describes the spatial relationships between the controls. In this example, we‚Äôre using a `FlowLayout`, which allows the controls to wrap around as we resize the window. (Try running the project and resizing the window to be narrower than the controls are.) Different layout managers allow adding controls in [different ways](https:</span><span style="color:#88846F;">//docs.oracle.com/javase/tutorial/uiswing/layout/visual.html). Once controls are added to the UI, the `pack()` method is used tell the layout manager to determine the actual positions and sizes of all the controls.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">In order for the controls to do anything, however, we need to add an *event handler* to them. An event handler, or *callback*, is simply a function that gets called when something interesting occurs. In our case, the clicking of different buttons should trigger a callback. In the jargon of Swing, clicking on buttons triggers their *action*, and so we must supply a function object that </span><span style="color:#F92672;">implements</span><span style="color:#F8F8F2;"> the [`</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;">`](https:</span><span style="color:#88846F;">//docs.oracle.com/javase/8/docs/api/java/awt/event/ActionListener.html) interface. (Other controls have additional events besides ‚Äúactions‚Äù.) For convenience, Swing allows us to label each button with a so-called *action command*, which is a `String` of our choosing: when the `ActionListener`‚Äôs callback is invoked, it will be given an [`ActionEvent`](https://docs.oracle.com/javase/8/docs/api/java/awt/event/ActionEvent.html) object that knows the action command of the button that was clicked. In this way, we can use a single listener to listen to multiple buttons at once, and distinguish them by means of this command string. See the calls to `setActionCommand` and `setActionListener` and the implementation of `actionPerformed` in JFrameView.java for an example:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#F8F8F2;">class </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> model</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">);           </span><span style="color:#88846F;">// Create a button,</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// set its command,</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);         </span><span style="color:#88846F;">// set the callback,</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);                       </span><span style="color:#88846F;">// and add it to the UI</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);           </span><span style="color:#88846F;">// ditto, for another button</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">    case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> ...</span></span>
<span class="line"><span style="color:#F92672;">    case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> ...</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">**</span><span style="color:#F8F8F2;">Note</span><span style="color:#F92672;">:**</span><span style="color:#66D9EF;font-style:italic;"> Combining</span><span style="color:#F8F8F2;"> the event handlers of multiple buttons into a single function is only temporarily convenient</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> often, the code we want to run </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> one button is completely different from the code we want to run </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> a different button, so there‚Äôs not much benefit from merging them all. Instead, it is more common to create anonymous objects, </span><span style="color:#A6E22E;">or</span><span style="color:#F8F8F2;"> (even terser) lambda expressions, so that each button gets its own custom handler. We‚Äôll see other idioms of setting up listeners below.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## </span><span style="color:#AE81FF;">5.</span><span style="color:#F8F8F2;"> Stage </span><span style="color:#AE81FF;">2</span><span style="color:#F92672;">:</span><span style="color:#66D9EF;font-style:italic;"> Decoupling</span><span style="color:#F8F8F2;"> the view from the model</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">The</span><span style="color:#F8F8F2;"> code above technically works, but it is very poorly designed</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> the view is responsible </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> mutating the model, which means there‚Äôs no separation of concerns between </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> view and any controller, and </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> we wanted to use the model with another sort of view, we‚Äôd be out of luck. In the </span><span style="color:#66D9EF;font-style:italic;">BasicMVC</span><span style="color:#F8F8F2;"> directory, we start to remedy </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">. In particular, we want to separate out all the parts of the code that mutate the model, and isolate them within a controller.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">To</span><span style="color:#F92672;"> do</span><span style="color:#FD971F;"> this</span><span style="color:#F8F8F2;">, we create a `Controller` </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">that</span><span style="color:#F8F8F2;"> takes in the model and the view ‚Äî at their </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">types</span><span style="color:#F8F8F2;">, not at their concrete </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">types</span><span style="color:#F8F8F2;">. We revise the view so that it no longer has access to the model at all. (This is overly drastic; we merely want to ensure that the view does not have *mutable* access to the model. We can revisit this later.) We next add a method to the view interface, `void setListener(ActionListener)`, which is the key indirection needed here. Instead of the view directly implementing the response to events, this method allows the view to take in a listener object and *forward* any events it receives to that listener.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">) { </span><span style="color:#88846F;">// NOTE: No model!</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// NOTE: No action listener</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener); </span><span style="color:#88846F;">// Rather than adding *this* as a listener,</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener); </span><span style="color:#88846F;">// add the provided one instead.</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Controller</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> m</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> v</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> m;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> v;</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> ...  </span><span style="color:#88846F;">// same code as before, but now</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> ...  </span><span style="color:#88846F;">// it&#39;s extracted out of the view</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">The</span><span style="color:#F8F8F2;"> controller is now the only part of the system that has mutable access to the model. Because it requested that the view register itself as the listener </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> the buttons, the controller gets called exactly when necessary, and it can decide what mutations to perform on the model. The view doesn‚Äôt even know that it‚Äôs received a controller object</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> as far as it‚Äôs aware, the controller is simply a random `ActionListener`. (</span><span style="color:#F92672;">**</span><span style="color:#F8F8F2;">Note</span><span style="color:#F92672;">:**</span><span style="color:#66D9EF;font-style:italic;"> It</span><span style="color:#F8F8F2;"> is overly simplified to have the `Controller` directly implement `ActionListener` ‚Äî after all, there might be many controls inside the view that could raise action events, and so having a </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">single</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> `ActionListener` isn‚Äôt a scalable approach. A better approach would be to have the `Controller` </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">have</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> one or more `ActionListener`s ‚Äî i.e., preferring composition over inheritance ‚Äî but we use </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> simplified form </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> now to reduce the number of classes in </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> example.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">**</span><span style="color:#F8F8F2;">Note</span><span style="color:#F92672;">:**</span><span style="color:#F8F8F2;"> there is a subtle difference between the `setListener` method we‚Äôve defined on our `IView` interface, and the `addActionListener` method present on the </span><span style="color:#66D9EF;font-style:italic;">Swing</span><span style="color:#F8F8F2;"> components</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> our method‚Äôs name implicitly intends </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> only </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">one</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> listener at a time, but </span><span style="color:#66D9EF;font-style:italic;">Swing</span><span style="color:#F8F8F2;"> components allow </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> multiple listeners. When we have multiple listeners, we‚Äôll sometimes say that the control </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">broadcasts</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> its event to whoever‚Äôs listening, or that it </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">publishes</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> its event to whoever‚Äôs </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">subscribed</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> to it. There‚Äôs nothing limiting us from implementing </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> more general approach, but that generality wasn‚Äôt needed here.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## </span><span style="color:#AE81FF;">6.</span><span style="color:#F8F8F2;"> Stage </span><span style="color:#AE81FF;">3</span><span style="color:#F92672;">:</span><span style="color:#66D9EF;font-style:italic;"> Enhancing</span><span style="color:#F8F8F2;"> the view with keyboard support</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Our</span><span style="color:#F8F8F2;"> next addition of functionality is shown in the </span><span style="color:#66D9EF;font-style:italic;">KeyboardEvents</span><span style="color:#F8F8F2;"> directory</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> we want to add some keyboard</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">triggered behaviors. Specifically, we‚Äôll add two fancy features to our UI</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> the ability to toggle the color of the text from black to red and back, and the ability to temporarily show the text in all</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">caps. We‚Äôll </span><span style="color:#F92672;">switch</span><span style="color:#F8F8F2;"> colors every time we type the `</span><span style="color:#E6DB74;">&#39;d&#39;</span><span style="color:#F8F8F2;">` key, and we‚Äôll temporarily capitalize the text </span><span style="color:#F92672;">while</span><span style="color:#F8F8F2;"> we‚Äôre pressing and holding the `</span><span style="color:#E6DB74;">&#39;c&#39;</span><span style="color:#F8F8F2;">` key. Interestingly, only one of these two </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> features requires adding a new method to our view interface.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">First, we‚Äôll need to generalize our `setListener` method, to take in a [`KeyListener`](https</span><span style="color:#F92672;">:</span><span style="color:#88846F;">//docs.oracle.com/javase/8/docs/api/java/awt/event/KeyListener.html) as well as an `ActionListener`. A `KeyListener` is analogous to a `ActionListener`, but as the name suggests, it listens for keyboard-related events. There are *three* such events: when a key is pressed, when a key is typed, and when a key is released. Pressing and holding down a key for a while will typically generate one key-pressed event, several key-typed events, and one key-released event. Just as `ActionListener`s accept `ActionEvent`s, `KeyListener`s accept [`KeyEvent`s](https://docs.oracle.com/javase/8/docs/api/java/awt/event/KeyEvent.html) containing information about which key was involved. We‚Äôll use the `keyTyped` event to toggle the color of the text, use the `keyPressed` event to capitalize the text, and use the `keyReleased` event to un-capitalize the text.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">For</span><span style="color:#F8F8F2;"> now, we‚Äôll simply have our controller implement the `KeyListener` </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">also</span><span style="color:#F8F8F2;">, and pass itself along as the second argument to `view.setListeners`. Again, note that the view doesn‚Äôt know or care that the exact same object is being passed in as the two distinct listeners: the types ensure that it doesn‚Äôt matter. (**Note:** And again, this is overly simplified, and we ought to have a distinct </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">implement</span><span style="color:#F8F8F2;"> this `KeyListener` interface, rather than have the `Controller` </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">do</span><span style="color:#F8F8F2;"> everything itself.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">To implement the color changing, we‚Äôll need to add a method to our view </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">to</span><span style="color:#F8F8F2;"> toggle the color of the text. This is intrinsically a view-specific thing, since the controller cannot know exactly how the text is displayed or which control it needs to change color. (That would leak internal implementation details of the view, and in any case, the controller only knows it has an `IView` rather than a particular view class.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">To implement the capitalization, note that we *do not* actually mutate the model! This is both a good thing and a necessary thing: suppose the model text contained a mixture of upper- and lower-case letters. If we mutated the model and capitalized everything, then we would not be able to undo that change later. Instead, we ask the model for its content, and inform the view that it should display a capitalized version of the that content. (This view-only change is analogous to ‚Äúzooming in‚Äù while editing a picture in Photoshop or some other image editor: the view is technically displaying only a subset of the pixels of the document, and moreover is displaying them at far more than one screen pixel per document pixel! If ‚Äúzooming in‚Äù actually mutated the document, then we‚Äôd lose information and be unable to ‚Äúzoom out‚Äù again.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## 7. Aside 1: Low-level and high-level events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Within the `KeyListener` interface, there is a qualitative difference between the key-pressed and key-released events, and the key-typed event. Individual key events are incredibly, tediously low-level. Just trying to type a capital `&#39;A&#39;` generates *five* events: the Shift key was pressed; the A key was pressed; the letter `&#39;A&#39;` was typed; the A key was released; the Shift key was released. (The last two events might happen in either order, depending on which key was released first.) Notice that only one key-typed event occurred, though, and it contained exactly the text that was typed.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">If we had to deduce which keys were typed, merely from the key-pressed and key-released events, we‚Äôd quickly lose track. Java (and most GUI toolkits) thankfully translate those sequences into higher-level key-typed events. And this translation has an addtional benefit: consider typing non-English text on a typical QWERTY keyboard. We clearly need to type mutliple physical keys to produce one logical character (this is sometimes known as ‚Äúchord‚Äù input, by analogy with pressing multiple keys on a piano keyboard), and this translation lets us ignore the individual key-pressed and key-released events if we only want to consider what text was typed.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">On the other hand, if we want to keep track of which keys are pressed (e.g. to control a player‚Äôs motion while a key is held down), we need to resort to the lower-level events.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">This low-level/high-level distinction is not clearly defined, and depends on perspective. Would we consider `ActionEvent`s to be low-level or high-level? On the one hand, they‚Äôre clearly much *higher-level* than individual [`MouseEvent`s](https:</span><span style="color:#88846F;">//docs.oracle.com/javase/8/docs/api/java/awt/event/MouseEvent.html), which are analogous to `KeyEvent`s and indicate when a mouse button is pressed, released, or clicked, or when it enters or exits some area. Indeed, `JButton`s register themselves as `MouseListener`s, and translate the relevant mouse-clicked event into an `ActionEvent`! (They also register themselves as `KeyListener`s, and generate `ActionEvent`s when the Enter key is pressed.) But at the same time, the *user* of our view might not care which particular buttons we happened to use to implement the view, and there might well be multiple buttons that trigger identical actions: from that perspective, action events are too *low-level* and should be implementation details hidden behind some abstraction barrier.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Designing a view and controller properly requires considering what level of detail we want to expose in the events that the view forwards to the controller. Our current designs expose far too low-level detail: ‚Äúsomething happened with the following action command‚Äù, or ‚Äúsome key was pressed/typed/released‚Äù. These events are very general, and have no specific semantics for our application. Let‚Äôs consider the different enhancements we can make, using either low-level or high-level events. We‚Äôll find that we might want to translate generic low-level events into application-specific high-level ones.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## 8. Stage 4: Making the controller more flexible using low-level events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Many applications run on multiple systems (e.g. Windows, Mac and Linux), and have hotkeys to perform various common actions ‚Äî but the exact hotkey differs on each platform. It would be a shame to have to recompile the code in order to support these different keys. Similarly, many applications allow the user to customize the hotkeys that control the application. Here, it‚Äôs outright impossible for users to recompile the program to customize its behavior! Our next generalization aims to alleviate this lack of flexibility.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Our prior attempt hard-coded the keys in the various key event-listeners. In the KeyboardMaps directory, we generalize this so that we can reconfigure hotkeys at runtime. To accomplish this, we design a new `KeyListener` implementation that uses dictionaries of `Runnable`s instead of `switch` statements in its event handlers. Specifically, our `KeyboardListener` will contain a `Map&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt;` dictionary for its key-pressed event handler, another such dictionary for its key-released handler, and a `Map&lt;</span><span style="color:#66D9EF;font-style:italic;">Character</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt;` dictionary for its key-typed handler. (These `Runnable`s are examples of the command pattern, which we talked about several lectures ago.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">The handlers are pleasingly straightforward:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#88846F;">// In the KeyboardListener class</span></span>
<span class="line"><span style="color:#F8F8F2;">@Override</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F8F8F2;"> void keyTyped(KeyEvent e) {</span></span>
<span class="line"><span style="color:#A6E22E;">  if</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">keyTypedMap</span><span style="color:#F8F8F2;">.</span><span style="color:#FD971F;font-style:italic;">containsKey</span><span style="color:#F8F8F2;">(e.</span><span style="color:#A6E22E;">getKeyChar</span><span style="color:#F8F8F2;">()))</span></span>
<span class="line"><span style="color:#F8F8F2;">    keyTypedMap.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#F8F8F2;">.</span><span style="color:#FD971F;font-style:italic;">getKeyChar</span><span style="color:#F8F8F2;">()).</span><span style="color:#A6E22E;">run</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// analogously for the other two events</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Because</span><span style="color:#F8F8F2;"> the dictionaries are data, we can mutate them at runtime </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> we so choose, and therefore change which keys are mapped to which responses. (</span><span style="color:#66D9EF;font-style:italic;">For</span><span style="color:#F8F8F2;"> variety‚Äôs sake, we show three different syntaxes </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> creating `Runnable`s</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> explicit classes, anonymous classes, and lambda expressions.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#88846F;">// In the Controller class</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> configureKeyBoardListener</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Character</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; keyTypes </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; keyPresses </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; keyReleases </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Uses an explicit function-object class to provide the implementation</span></span>
<span class="line"><span style="color:#F8F8F2;">    keyReleases.</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyEvent.VK_C, </span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> MakeOriginalCase</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#88846F;">    // Uses an anonymous object to provide the implementation</span></span>
<span class="line"><span style="color:#F8F8F2;">    keyPresses.</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyEvent.VK_C, </span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> Runnable</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">      public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> run</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> text.</span><span style="color:#A6E22E;">toUpperCase</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#88846F;">    // Uses lambda-syntax to provide the implementation</span></span>
<span class="line"><span style="color:#F8F8F2;">    keyTypes.</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">-&gt;</span><span style="color:#F8F8F2;"> { view.</span><span style="color:#A6E22E;">toggleColor</span><span style="color:#F8F8F2;">(); });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    KeyboardListener</span><span style="color:#F8F8F2;"> kbd </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> KeyboardListener</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    kbd.</span><span style="color:#A6E22E;">setKeyTypedMap</span><span style="color:#F8F8F2;">(keyTypes);</span></span>
<span class="line"><span style="color:#F8F8F2;">    kbd.</span><span style="color:#A6E22E;">setKeyPressedMap</span><span style="color:#F8F8F2;">(keyPresses);</span></span>
<span class="line"><span style="color:#F8F8F2;">    kbd.</span><span style="color:#A6E22E;">setKeyReleasedMap</span><span style="color:#F8F8F2;">(keyReleases);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(kbd);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">In</span><span style="color:#F8F8F2;"> the same manner as </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> `KeyboardListener`, our implementation also generalizes the `ActionListener` implementation into a dictionary that maps action commands to `Runnable`s.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">This</span><span style="color:#F8F8F2;"> transformation, which converts </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">explicit control flow</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> (the `</span><span style="color:#F92672;">switch</span><span style="color:#F8F8F2;">` statements we had earlier) into </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">data</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> (the keys of the `Map`) is a very common one in programming. We‚Äôve clearly improved things somewhat, but we‚Äôre not finished</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> after all, </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> we hard</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">code the keys of the `Map` (as we did in the calls to `keyPresses.put` above), we haven‚Äôt really fixed anything, right</span><span style="color:#F92672;">?</span><span style="color:#F8F8F2;"> Fortunately, we know a way around </span><span style="color:#FD971F;">this</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> by using a combination of a </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">reader</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> and </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">builder</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">, we could read in a ‚Äúuser preferences file‚Äù to figure out what keys to put in the maps, and then our code is completely agnostic to exactly which keys are needed </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> which handlers.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## </span><span style="color:#AE81FF;">9.</span><span style="color:#F8F8F2;"> Stage </span><span style="color:#AE81FF;">5</span><span style="color:#F92672;">:</span><span style="color:#66D9EF;font-style:italic;"> Decoupling</span><span style="color:#F8F8F2;"> the view from the controller using high</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">The</span><span style="color:#F8F8F2;"> previous generalization relied on the view exposing its low</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level events to the controller. However, we might reasonably want to trigger the same behavior from multiple </span><span style="color:#66D9EF;font-style:italic;">UI</span><span style="color:#F8F8F2;"> controls. In the </span><span style="color:#66D9EF;font-style:italic;">GeneralCommandCallbacks</span><span style="color:#F8F8F2;"> directory, we take </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> approach</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> our view can toggle the color of the text either via a button, or via typing the `</span><span style="color:#E6DB74;">&#39;t&#39;</span><span style="color:#F8F8F2;">` key. (</span><span style="color:#66D9EF;font-style:italic;">This</span><span style="color:#F8F8F2;"> is a simplified example, but is a stand</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">in </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> typical toolbar buttons doing the same thing as hotkey shortcuts.)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">The</span><span style="color:#F8F8F2;"> key innovation in </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> design is that we‚Äôve eliminated the `ActionListener`s and `KeyListener`s from the controller and </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">also</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> from the `IView` interface. Instead, we have a </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> `addFeatures` method that takes in a new interface, `Features`, whose methods are the various high</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level features and abilities of our view. Our </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">prior</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> interfaces exposed low</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level events saying, </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> instance, ‚ÄúHey, a button with </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> action command has been clicked; what should be done</span><span style="color:#F92672;">?</span><span style="color:#F8F8F2;">‚Äù These </span><span style="color:#F92672;">*new*</span><span style="color:#F8F8F2;"> callbacks say, </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> example, ‚Äú</span><span style="color:#66D9EF;font-style:italic;">The</span><span style="color:#F8F8F2;"> user has requested to make the display uppercase; what should be done</span><span style="color:#F92672;">?</span><span style="color:#F8F8F2;">‚Äù This </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">is</span><span style="color:#F8F8F2;"> bigger than the `ActionListener` interface, but it‚Äôs also much more application-specific, and it advertises exactly the responsibilities a controller has to uphold for this view. It also successfully encapsulates the action commands that we leaked in prior designs: the view is now free to change those commands without breaking the controller at all.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">This design is quite elegant, and does the best job of loosening the coupling between the view and the controller: by encapsulating the details of which physical controls do what, the view is much more abstracted away, and the logical </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">that</span><span style="color:#F8F8F2;"> it presents to the controller is much more application-specific. Note that the `Controller` </span><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">and</span><span style="color:#F8F8F2;"> the `Features` </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">know</span><span style="color:#F8F8F2;"> absolutely nothing about Swing: they don‚Äôt even `import` the packages! Just like our model doesn‚Äôt need to know about how it‚Äôs being displayed, so too our controller doesn‚Äôt really need to know how the views are implemented. When possible, aspire to interfaces like this one, but be prepared to fall back to lower-level events when necessary.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">**Note:** It might seem odd that the `toggleColor` method is both a callback on the `Features` interface *and* a method on the `IView` interface ‚Äî why can‚Äôt the view handle this internally? Indeed, it possibly could! (And in some circumstances, the view definitely *should* handle some events entirely internally: for instance, when implementing a text editor, the view should probably internally handle the sequence of low-level events that indicate the user has selected a stretch of text. Once the user does something with that text ‚Äî deletes it, replaces it, copies it, etc. ‚Äî the view can raise a semantically relevant high-level event with the selected content.) But consider a ‚Äúbigger‚Äù version of our current program, where we have *two* views that we want to keep </span><span style="color:#F92672;">synchronized</span><span style="color:#F8F8F2;">: if either of them has toggled its color, both should toggle their colors together. The only way to ensure this synchronization is for the view to forward the event to the controller, which can in turn decide to tell *both* views how to update themselves.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">**Note:** Once again, in the sample code and in the snippets below, we write that the `Controller` `implements` `Features` directly: we use an is-a relationship. A better approach is to use a has-a relationship, and have a dedicated object that </span><span style="color:#F92672;">implements</span><span style="color:#F8F8F2;"> the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface instead. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;"> omit this variant here, because there are enough other details to focus on right now!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## 10. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Aside</span><span style="color:#F8F8F2;"> 2: </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Designing</span><span style="color:#F8F8F2;"> a </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;"> interface</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> the previous section we introduced a `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface, that hid the *</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;">*-specific event listeners and instead exposed *application*-specific events. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">But</span><span style="color:#F8F8F2;"> how are we to know what sort of application-specific events we should have? </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">It</span><span style="color:#F8F8F2;">‚Äôs difficult to give a one-size-fits-all answer here, since by definition this will be rather application-specific. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Instead</span><span style="color:#F8F8F2;">, we can articulate some guidelines to follow:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">- </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Avoid</span><span style="color:#F8F8F2;"> any view-specific classes in the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface wherever possible. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Above</span><span style="color:#F8F8F2;">, we said to eliminate any mention of </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;">-specific events, and generalized it further so that the controller did not need to depend on the </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;"> library at all. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;"> can easily come up with a plausible counterexample to this generality: suppose we were building a drawing program, and the view allows the user to choose a color to draw with. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Surely</span><span style="color:#F8F8F2;"> the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface should expose the `java.awt.</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Color</span><span style="color:#F8F8F2;">` that the user picked? </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> this case, though, the *model* also depends on `java.awt.</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Color</span><span style="color:#F8F8F2;">`, and so the view isn‚Äôt introducing any new dependencies. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">If</span><span style="color:#F8F8F2;"> the model chose a different class to represent its colors, then the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface ought to expose *that*, rather than the </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;"> color directly.</span></span>
<span class="line"><span style="color:#F8F8F2;">- </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Treat</span><span style="color:#F8F8F2;"> the methods in the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface as *requests from the user*. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> particular, a view might allow a user to attempt various editing operations that the controller might prohibit, or that the model might reject as invalid. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> our example above, ‚Äúrequesting an uppercase display‚Äù fits into this mindset. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Additionally</span><span style="color:#F8F8F2;">, brainstorming ‚Äúwhat might the user try to do?‚Äù can help articulate all the possible features a user might want from the program, which in turn can help design the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` methods needed.</span></span>
<span class="line"><span style="color:#F8F8F2;">- </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Not</span><span style="color:#F8F8F2;"> all view-specific events need to turn into `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` requests. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">However</span><span style="color:#F8F8F2;">, events that never make it to the controller are therefore intrinsically uncontrollable. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> sophisticated </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">GUIs</span><span style="color:#F8F8F2;">, a single controller might need to synchronize multiple views: for instance, a [split-screen text editor](https:</span><span style="color:#88846F;">//camo.githubusercontent.com/c535bd502fea4873724e2bebc144d3e2f4fe075e/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f32352f3131393038312f37333938343237612d366339362d313165322d393464632d3839363462333237333131332e706e67) could have two views of the same file, whose contents should be changed in tandem. A [video editor](https://helpx.adobe.com/content/dam/help/en/after-effects/how-to/camera-animation/jcr_content/main-pars/image_1685031719/camera-animation_step2.jpg) might have a timeline view at the bottom of the screen, as well as controls for the effects and a preview window, all of which must stay consistent. A [spreadsheet](https://www.exceldashboardtemplates.com/wp-content/uploads/2017/05/Copy-an-Excel-Chart-on-Same-Worksheet-Keeps-Same-Data-Reference-Final-Copied-Charts.png) might have a grid showing many cells of data, a textbox to edit a single cell, and a graph of multiple cells‚Äô data, again which all must stay consistent. When implementing event handlers inside a particular view, consider whether the change being handled might need to be synchronized with multiple views: if so, then it should be raised as a `Features` request. If not, then it *might* be entirely handled within the view. For instance, scrolling a single text file might not need to inform the controller that the file has been scrolled, and so scrolling could be handled entirely within the view. On the other hand, a [diff viewer](https://www.git-tower.com/blog/media/pages/posts/diff-tools-windows/037ea85d83-1690885042/meld.png) that compares two files might wnat to scroll both files in unison, and so any scroll changes would need to be raised to the controller‚Äôs attention so that it can synchronize both views.</span></span>
<span class="line"><span style="color:#F8F8F2;">- </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">When</span><span style="color:#F8F8F2;"> a `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` event is raised to the controller‚Äôs attention, the view *probably* shouldn‚Äôt mutate itself, but rather wait for the controller to tell it to do so ‚Äî this is in keeping with thinking of features as requests rather than demands. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;"> noted this above, where `toggleColor` was both a method in the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface and also a method on the view, and the controller‚Äôs implementation of the `toggleColor` method turned around and called the view‚Äôs method, and we said this might seem overly roundabout. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;"> gave one example where this was needed for synchronization of multiple views. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Another</span><span style="color:#F8F8F2;"> might be triggering some resource-limited effect (where the resource might be tracked by the model, like in-game bonuses, or the resource might be controller-specific, like live-streaming a video of a gameplay). </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">The</span><span style="color:#F8F8F2;"> view shouldn‚Äôt modify itself until the controller (and possibly model too) has confirmed that the request can go through.</span></span>
<span class="line"><span style="color:#F8F8F2;">- </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Any</span><span style="color:#F8F8F2;"> event that is handled entirely within the view is intrinsically more difficult to test. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;"> would have to synthesize the low-level </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">UI</span><span style="color:#F8F8F2;"> events, which may be impractical or even impossible to do sufficiently. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">By</span><span style="color:#F8F8F2;"> decoupling the particular </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">UI</span><span style="color:#F8F8F2;"> event that triggers behavior from the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` implementation that actually provides the behavior, we limit the hard-to-test code to just the ‚Äúwiring‚Äù between the event listeners and the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` object. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Since</span><span style="color:#F8F8F2;"> all the interesting behavior is now in the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` object, and since its methods depend only on application-specific concepts and types, we can easily create a mock view that triggers `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` methods without needing the actual </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;"> events. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">This</span><span style="color:#F8F8F2;"> allows for test cases analogous to those we saw in [</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Lecture</span><span style="color:#F8F8F2;"> 8](https:</span><span style="color:#88846F;">//course.ccs.neu.edu/cs3500/lec_controllers_mocks_notes.html), with all the benefits they bring.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## 11. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Stage</span><span style="color:#F8F8F2;"> 6: </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Further</span><span style="color:#F8F8F2;"> enhancements using `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">InputMap</span><span style="color:#F8F8F2;">`s and `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionMap</span><span style="color:#F8F8F2;">`s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Our</span><span style="color:#F8F8F2;"> last revision eliminated the flexibility of dynamically changing hotkeys and reverted to hard-coding the keys in the view‚Äôs implementation of its own key listener. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Combining</span><span style="color:#F8F8F2;"> the flexibility of the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">KeyboardListener</span><span style="color:#F8F8F2;">` and its dictionaries, with the high-level events of the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;">` interface, is aesthetically tricky: who should control which keys do what? </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> some sense, it almost feels like the choice should be made not by our current controller, which is controlling a particular model and view, but rather to some hypothetical ‚Äúapplication controller‚Äù, that controls the overall application. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;">‚Äôve already encountered this in practice: in </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IntelliJ</span><span style="color:#F8F8F2;">, there are both project-specific settings and application-wide settings, and different dialogs control those different features.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Additionally</span><span style="color:#F8F8F2;">, implementing the keyboard-listening dictionaries is tedious: surely this functionality could be implemented once and for all, and we wouldn‚Äôt need to redo it in every single application?</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">The</span><span style="color:#F8F8F2;"> solution, once again, is a layer of indirection. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">We</span><span style="color:#F8F8F2;">‚Äôve seen above that </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;"> components have a notion of an *action command*, and that we can cause code to run depending on which action was triggered. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Combining</span><span style="color:#F8F8F2;"> several of these actions together should seem reminiscent of the `</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">KeyboardListener</span><span style="color:#F8F8F2;">` dictionaries we just built. </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">In</span><span style="color:#F8F8F2;"> fact, </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Swing</span><span style="color:#F8F8F2;"> has a concept of an [`</span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionMap</span><span style="color:#F8F8F2;">`](https:</span><span style="color:#88846F;">//docs.oracle.com/javase/8/docs/api/javax/swing/ActionMap.html), which is essentially just such a dictionary from action commands to actions.[1](https://course.ccs.neu.edu/cs3500/lec_gui_basics_notes.html#(counter-()._(gentag._23._lecturegui_basics))) An `Action` in Swing has many potential subclasses; we‚Äôll focus on the `AbstractAction` class, which we can subclass ourselves to create new action handlers. For instance, we might write</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Action</span><span style="color:#F8F8F2;"> makeOriginalCase = new </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">AbstractAction</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Action</span><span style="color:#F8F8F2;"> makeCaps </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AbstractAction</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> text.</span><span style="color:#A6E22E;">toUpperCase</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Action</span><span style="color:#F8F8F2;"> toggleColor </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AbstractAction</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">toggleColor</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">This</span><span style="color:#F8F8F2;"> is all well and good, and now we have yet one more way of representing runnable bits of code, but how should we actually associate these actions with their keyboard triggers</span><span style="color:#F92672;">?</span><span style="color:#F8F8F2;"> First, we associate these `Action`s with their action commands</span><span style="color:#F92672;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#88846F;">// Somewhere in our View class:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">aComponent.</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;restoreLowercase&quot;</span><span style="color:#F8F8F2;">, makeOriginalCase);</span></span>
<span class="line"><span style="color:#F8F8F2;">aComponent.</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;makeCaps&quot;</span><span style="color:#F8F8F2;">, makeCaps);</span></span>
<span class="line"><span style="color:#F8F8F2;">aComponent.</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;toggleColor&quot;</span><span style="color:#F8F8F2;">, toggleColor);</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">We</span><span style="color:#F8F8F2;"> then need the second piece of the indirection</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> an [`InputMap`](https</span><span style="color:#F92672;">:</span><span style="color:#88846F;">//docs.oracle.com/javase/8/docs/api/javax/swing/InputMap.html). `InputMap`s associate [`KeyStroke`s](https://docs.oracle.com/javase/8/docs/api/javax/swing/KeyStroke.html) with action commands. A `KeyStroke` describes our key-press, key-release, and key-type low-level events in a uniform manner. When a low-level key event matches something in an `InputMap`, the associated action command is looked up in the `ActionMap` and fired. So we can continue our code as follows:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#88846F;">// Somewhere in our View class:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// Use simplest constructor to describe a key-press</span></span>
<span class="line"><span style="color:#F8F8F2;">aComponent.</span><span style="color:#A6E22E;">getInputMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyStroke.</span><span style="color:#A6E22E;">getKeyStroke</span><span style="color:#F8F8F2;">(KeyEvent.VK_C), </span><span style="color:#E6DB74;">&quot;makeCaps&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">// Use another constructor to describe key-releases</span></span>
<span class="line"><span style="color:#F8F8F2;">aComponent.</span><span style="color:#A6E22E;">getInputMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyStroke.</span><span style="color:#A6E22E;">getKeyStroke</span><span style="color:#F8F8F2;">(KeyEvent.VK_C, </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">), </span><span style="color:#E6DB74;">&quot;restoreLowercase&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">// Yet another constructor lets us describe key-typed events</span></span>
<span class="line"><span style="color:#F8F8F2;">aComponent.</span><span style="color:#A6E22E;">getInputMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyStroke.</span><span style="color:#A6E22E;">getKeyStroke</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;typed r&quot;</span><span style="color:#F8F8F2;">), </span><span style="color:#E6DB74;">&quot;toggleColor&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">**</span><span style="color:#F8F8F2;">Note</span><span style="color:#F92672;">:**</span><span style="color:#F8F8F2;"> `InputMap`s and `ActionMap`s apply only to `JComponent`s, and not to `JFrame`s directly. However, we can easily add a component to our frame </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> the sole purpose of handling key events, and we [can specify](https</span><span style="color:#F92672;">:</span><span style="color:#88846F;">//docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) that its `InputMap` be used whenever the frame has focus at all.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">This</span><span style="color:#F8F8F2;"> seems like a lot of machinery to introduce, and it would be unwieldy </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> it weren‚Äôt so reusable. The critical design patterns here are</span><span style="color:#F92672;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">-</span><span style="color:#66D9EF;font-style:italic;"> We</span><span style="color:#F8F8F2;"> have a mechanism </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> translating low</span><span style="color:#F92672;">-</span><span style="color:#A6E22E;">level</span><span style="color:#F8F8F2;"> (`KeyEvent`s) into mid</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level action commands.</span></span>
<span class="line"><span style="color:#F92672;">-</span><span style="color:#66D9EF;font-style:italic;"> We</span><span style="color:#F8F8F2;"> have transformed control </span><span style="color:#A6E22E;">flow</span><span style="color:#F8F8F2;"> (of what code to run based on what key was pressed) into </span><span style="color:#A6E22E;">data</span><span style="color:#F8F8F2;"> (a map of `KeyStroke`s).</span></span>
<span class="line"><span style="color:#F92672;">-</span><span style="color:#66D9EF;font-style:italic;"> We</span><span style="color:#F8F8F2;"> have a mechanism from translating mid</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level action commands into actual runnable actions.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">The</span><span style="color:#F8F8F2;"> code still suffers from one problem</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> the `Action`s themselves feel like they belong in the </span><span style="color:#A6E22E;">controller</span><span style="color:#F8F8F2;"> (since they refer to `model` and `view`), but are referenced directly in the </span><span style="color:#A6E22E;">view</span><span style="color:#F8F8F2;"> (in the `</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(...)` lines). We can combine these maps with our `Features` design, to get one </span><span style="color:#F92672;">final</span><span style="color:#F8F8F2;"> translation from mid</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level action commands to high</span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;">level events</span><span style="color:#F92672;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```java</span></span>
<span class="line"><span style="color:#88846F;">// NOTE: this class makes no mention of Actions or Controllers.</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  KeyComponent</span><span style="color:#F8F8F2;"> keyComponent;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.keyComponent </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> KeyComponent</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(keyComponent);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setHotKey</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyStroke</span><span style="color:#FD971F;font-style:italic;"> key</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> featureName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.keyComponent.</span><span style="color:#A6E22E;">getInputMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(key, featureName);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> addFeatures</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Features</span><span style="color:#FD971F;font-style:italic;"> features</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.keyComponent.</span><span style="color:#A6E22E;">addFeatures</span><span style="color:#F8F8F2;">(features);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// NOTE: Neither does this class!  It only refers to Features.</span></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">KeyComponent</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JPanel</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  List</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Features</span><span style="color:#F8F8F2;">&gt; featureListeners </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> ArrayList</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // Includes this new feature listener in responding to keys</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> addFeatures</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Features</span><span style="color:#FD971F;font-style:italic;"> f</span><span style="color:#F8F8F2;">) { </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.featureListeners.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(f); }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;">  KeyComponent</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#88846F;">    // Install action command -&gt; Feature callback associations</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;makeCaps&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> AbstractAction</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">      public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">Features</span><span style="color:#F8F8F2;"> f </span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> featureListeners)</span></span>
<span class="line"><span style="color:#F8F8F2;">          f.</span><span style="color:#A6E22E;">makeUppercase</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;restoreLowercase&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> AbstractAction</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">      public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">Features</span><span style="color:#F8F8F2;"> f </span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> featureListeners)</span></span>
<span class="line"><span style="color:#F8F8F2;">          f.</span><span style="color:#A6E22E;">restoreLowercase</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">getActionMap</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;toggleColor&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> AbstractAction</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">      public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">Features</span><span style="color:#F8F8F2;"> f </span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> featureListeners)</span></span>
<span class="line"><span style="color:#F8F8F2;">          f.</span><span style="color:#A6E22E;">toggleColor</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// NOTE: Only the Controller needs to know how to implement Features.</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Controller</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Features</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> IView</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // These are the high-level event handlers we care about:</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> toggleColor</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">toggleColor</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> makeUppercase</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> text.</span><span style="color:#A6E22E;">toUpperCase</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> restoreLowercase</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // This attaches this controller as our features listener</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> v</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> v;</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">addFeatures</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Choose the keys we want</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setHotKey</span><span style="color:#F8F8F2;">(KeyStroke.</span><span style="color:#A6E22E;">getKeyStroke</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;pressed c&quot;</span><span style="color:#F8F8F2;">), </span><span style="color:#E6DB74;">&quot;makeCaps&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setHotKey</span><span style="color:#F8F8F2;">(KeyStroke.</span><span style="color:#A6E22E;">getKeyStroke</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;released c&quot;</span><span style="color:#F8F8F2;">), </span><span style="color:#E6DB74;">&quot;restoreLowercase&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">setHotKey</span><span style="color:#F8F8F2;">(KeyStroke.</span><span style="color:#A6E22E;">getKeyStroke</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;typed r&quot;</span><span style="color:#F8F8F2;">), </span><span style="color:#E6DB74;">&quot;toggleColor&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">\```</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">## </span><span style="color:#AE81FF;">12.</span><span style="color:#66D9EF;font-style:italic;"> Exercises</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">At</span><span style="color:#F8F8F2;"> the top of </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> lecture are starter files </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> a </span><span style="color:#66D9EF;font-style:italic;">GUI</span><span style="color:#F8F8F2;"> version of the </span><span style="color:#66D9EF;font-style:italic;">Turtles</span><span style="color:#F8F8F2;"> example we worked through in [Lecture </span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">](https</span><span style="color:#F92672;">:</span><span style="color:#88846F;">//course.ccs.neu.edu/cs3500/lec_commands_notes.html). The `TurtleGraphicsView` does not currently do anything. Enhance this code with a new `TurtlePanel` class that `extends JPanel`, and override its `paintComponent` method to draw whatever you want, just to confirm that it works.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Next, enhance the `IView` </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">so</span><span style="color:#F8F8F2;"> you can pass the relevant information from the model, through the controller, into the view and into your `TurtlePanel` class. Once you‚Äôve connected the pieces, use this information in your `paintComponent` implementation to draw the turtle‚Äôs trace.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">The links at the top of the lecture include a ‚Äúsolution‚Äù implementation; do not to look at that until you‚Äôve tried to implement this yourself.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">The `IView` </span><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">contains</span><span style="color:#F8F8F2;"> one method for setting up an event listener. What is its signature? Does it seem like a high-level event to you, or a low-level one? If you think it‚Äôs too low-level, can you think of a better, higher-level signature to use? If you think it‚Äôs sufficiently high-level, why do you think so?</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">1`Action`s themselves are more generally useful in Swing than just for keyboard interaction, but we‚Äôll focus on just the keyboard part here.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div></details><h2 id="_1-‰∏ªË¶ÅÂÜÖÂÆπ" tabindex="-1"><a class="header-anchor" href="#_1-‰∏ªË¶ÅÂÜÖÂÆπ"><span>1. ‰∏ªË¶ÅÂÜÖÂÆπ</span></a></h2><ol><li><strong>Model</strong>Ôºö Ë¥üË¥£Â≠òÂÇ®ÂíåÂ∞ÅË£ÖÊï∞ÊçÆÈÄªËæëÔºõ</li><li><strong>View</strong>Ôºö Ë¥üË¥£Â±ïÁ§∫Êï∞ÊçÆÔºåÂèØ‰ª•ÊòØÊñáÊú¨ÁïåÈù¢Ôºå‰πüÂèØ‰ª•ÊòØÂõæÂΩ¢ÁïåÈù¢Ôºõ</li><li><strong>Controller</strong>Ôºö Ë¥üË¥£ÂçèË∞ÉÁî®Êà∑ËæìÂÖ•‰∏éÂØπ Model ÁöÑÊìç‰ΩúÔºåÂπ∂ÈÄöÁü• View ÂÅöÂá∫Áõ∏Â∫îÊõ¥Êñ∞Ôºõ</li></ol><p>Êàë‰ª¨‰ºöÂÖàÂ±ïÁ§∫‰∏Ä‰∏™<strong>ÊñáÊú¨ÁïåÈù¢</strong>ÁâàÊú¨ÔºåÈöèÂêéÊºîÁ§∫Â¶Ç‰ΩïÂàáÊç¢Âà∞<strong>ÂõæÂΩ¢ÁïåÈù¢</strong>ÔºàGUIÔºâÔºå‰ª•ÂèäÂ¶Ç‰Ωï‰∏ÄÊ≠•Ê≠•ÊîπËøõ„ÄÅËß£ËÄ¶ËßÜÂõæÂíåÊéßÂà∂Âô®„ÄÅÂ§ÑÁêÜÈîÆÁõò‰∫ã‰ª∂Á≠â„ÄÇ</p><h2 id="stage-1-ÂÆûÁé∞Âü∫Á°Ä-model" tabindex="-1"><a class="header-anchor" href="#stage-1-ÂÆûÁé∞Âü∫Á°Ä-model"><span>Stage 1: ÂÆûÁé∞Âü∫Á°Ä Model</span></a></h2><h3 id="_1-model-Êé•Âè£" tabindex="-1"><a class="header-anchor" href="#_1-model-Êé•Âè£"><span>1. Model Êé•Âè£</span></a></h3><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö <code>IModel.java</code></li><li><strong>ÂäüËÉΩ</strong>Ôºö ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÊ®°ÂûãÊé•Âè£ÔºåÂè™Êúâ <code>get/set</code> Â≠óÁ¨¶‰∏≤ÁöÑÊñπÊ≥ïÔºå‰æõÂêéÁª≠ view Âíå Controller Ë∞ÉÁî®„ÄÇ</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IModel</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Ëé∑ÂèñÂΩìÂâçÂ≠òÂÇ®ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@return</span><span style="color:#88846F;"> Ê®°Âûã‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#A6E22E;"> getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ËÆæÁΩÆÊñ∞ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> str</span><span style="color:#88846F;"> Ë¶ÅËÆæÁΩÆÁöÑÊñ∞Â≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setString</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> str</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li><code>public interface IModel { ... }</code>ÔºöÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£ÔºåÂëΩÂêç‰∏∫ <code>IModel</code>„ÄÇ</li><li><code>String getString();</code>ÔºöÂ£∞Êòé‰∏Ä‰∏™ÊñπÊ≥ïÁî®‰∫éËØªÂèñÂΩìÂâçÂ≠óÁ¨¶‰∏≤„ÄÇ</li><li><code>void setString(String str);</code>ÔºöÂ£∞Êòé‰∏Ä‰∏™ÊñπÊ≥ïÁî®‰∫éÊõ¥Êñ∞ÂΩìÂâçÂ≠óÁ¨¶‰∏≤„ÄÇ</li></ol><h3 id="_2-model-Á±ª" tabindex="-1"><a class="header-anchor" href="#_2-model-Á±ª"><span>2. Model Á±ª</span></a></h3><ul><li><p><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>Model.java</code></p></li><li><p><strong>ÂäüËÉΩ</strong>Ôºö<code>IModel</code> Êé•Âè£ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåÂÜÖÈÉ®Áî®‰∏Ä‰∏™ <code>String</code> Êù•Â≠òÂÇ®Êï∞ÊçÆ„ÄÇ</p></li></ul><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Model</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IModel</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#F8F8F2;"> data;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàùÂßãÂåñÂ≠óÁ¨¶‰∏≤‰∏∫Á©∫ÊàñÁªôÂÆöÂàùÂÄº</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.data </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;&quot;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#A6E22E;"> getString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#FD971F;"> this</span><span style="color:#F8F8F2;">.data;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setString</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> str</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> str;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li><code>public class Model implements IModel</code>ÔºöÁ±ª <code>Model</code> ÂÆûÁé∞‰∫Ü <code>IModel</code> Êé•Âè£„ÄÇ</li><li><code>private String data;</code>ÔºöÁßÅÊúâÂ≠óÊÆµ <code>data</code> Áî®‰∫éÂÆûÈôÖÂ≠òÂÇ®Â≠óÁ¨¶‰∏≤ÂÜÖÂÆπ„ÄÇ</li><li><code>public Model()</code>ÔºöÊûÑÈÄ†ÂáΩÊï∞ÔºåÂ∞Ü <code>data</code> ÂàùÂßãÂåñ‰∏∫Á©∫Â≠óÁ¨¶‰∏≤ÔºàÂΩìÁÑ∂‰πüÂèØÊîπ‰∏∫Êé•Âèó‰∏Ä‰∏™ÂàùÂßãÂÄºÔºâ„ÄÇ</li><li><code>public String getString()</code>ÔºöÂÆûÁé∞Êé•Âè£ÊñπÊ≥ïÔºåËøîÂõûÂΩìÂâçÂ≠òÂÇ®ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</li><li><code>public void setString(String str)</code>ÔºöÂÆûÁé∞Êé•Âè£ÊñπÊ≥ïÔºå‰øÆÊîπÂ≠òÂÇ®ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</li></ol><h2 id="stage-2-ÂÆûÁé∞ÊñáÊú¨ÊñπÂºèÁöÑ-view" tabindex="-1"><a class="header-anchor" href="#stage-2-ÂÆûÁé∞ÊñáÊú¨ÊñπÂºèÁöÑ-view"><span>Stage 2: ÂÆûÁé∞ÊñáÊú¨ÊñπÂºèÁöÑ View</span></a></h2><h3 id="_1-iview-Êé•Âè£" tabindex="-1"><a class="header-anchor" href="#_1-iview-Êé•Âè£"><span>1. IView Êé•Âè£</span></a></h3><ul><li><p><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>IView.java</code></p></li><li><p><strong>ÂäüËÉΩ</strong>ÔºöÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑËßÜÂõæÊé•Âè£ÔºåËÉΩÂ§üÊòæÁ§∫‰ø°ÊÅØÔºå‰ª•ÂèäÔºàÂèØÈÄâÔºâÂ±ïÁ§∫ÈîôËØØÊ∂àÊÅØÁ≠â„ÄÇËøôÈáåÂè™ÂÅöÊúÄÂü∫Êú¨ÁöÑÊâìÂç∞Êìç‰Ωú„ÄÇ</p></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊòæÁ§∫ÁªôÁî®Êà∑ÁúãÁöÑËæìÂá∫</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> message</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> message</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> error</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÈîôËØØ‰ø°ÊÅØ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> showError</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> error</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li><code>public interface IView { ... }</code>ÔºöÂÆö‰πâËßÜÂõæÊé•Âè£ <code>IView</code>„ÄÇ</li><li><code>void showMessage(String message);</code>ÔºöÂêëÁî®Êà∑ÊòæÁ§∫ÊôÆÈÄöÊñáÊú¨Ê∂àÊÅØ„ÄÇ</li><li><code>void showError(String error);</code>ÔºöÂêëÁî®Êà∑ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØÊàñÊèêÁ§∫„ÄÇ</li></ol><h3 id="_2-textview-Á±ª" tabindex="-1"><a class="header-anchor" href="#_2-textview-Á±ª"><span>2. TextView Á±ª</span></a></h3><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>TextView.java</code></li><li><strong>ÂäüËÉΩ</strong>Ôºö<code>IView</code> ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåÊääÊ∂àÊÅØÊâìÂç∞Âà∞ÁªôÂÆöÁöÑËæìÂá∫ÊµÅÔºàÂ¶ÇÊéßÂà∂Âè∞Ôºâ„ÄÇ</li></ul><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.io.PrintStream</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TextView</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> PrintStream</span><span style="color:#F8F8F2;"> out;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊûÑÈÄ†ÂáΩÊï∞</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> out</span><span style="color:#88846F;"> ÊåáÂÆöË¶ÅËæìÂá∫ÁöÑÊµÅÔºåÊØîÂ¶Ç System.out</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> TextView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">PrintStream</span><span style="color:#FD971F;font-style:italic;"> out</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.out </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> out;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> message</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(message);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> showError</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> error</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ERROR: &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> error);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li><code>private final PrintStream out;</code>ÔºöÁî®Êù•Â≠òÊîæËæìÂá∫ÊµÅÔºàÊØîÂ¶Ç <code>System.out</code>Ôºå‰πüÂèØ‰ª•ÊòØÊµãËØïÊó∂ÁöÑÂÅáËæìÂá∫Ôºâ„ÄÇ</li><li>ÊûÑÈÄ†ÂáΩÊï∞ÔºöÊé•Âèó‰∏Ä‰∏™ <code>PrintStream out</code> Âπ∂‰øùÂ≠òÔºåÊñπ‰æøÂêéÁª≠Áªü‰∏ÄÊâìÂç∞„ÄÇ</li><li><code>showMessage</code>ÔºöÂÆûÁé∞Êé•Âè£ÊñπÊ≥ïÔºåÁõ¥Êé•ÊâìÂç∞ÊôÆÈÄö‰ø°ÊÅØ„ÄÇ</li><li><code>showError</code>ÔºöÂÆûÁé∞Êé•Âè£ÊñπÊ≥ïÔºåÂú®ÊâìÂç∞Êó∂Âä†‰∏ä <code>&quot;ERROR: &quot;</code> ÂâçÁºÄ‰ª•Á§∫Âå∫Âà´„ÄÇ</li></ol><h2 id="stage-3-ÂÆûÁé∞ÊñáÊú¨ÊñπÂºèÁöÑ-controller" tabindex="-1"><a class="header-anchor" href="#stage-3-ÂÆûÁé∞ÊñáÊú¨ÊñπÂºèÁöÑ-controller"><span>Stage 3: ÂÆûÁé∞ÊñáÊú¨ÊñπÂºèÁöÑ Controller</span></a></h2><h3 id="_1-icontroller-Êé•Âè£" tabindex="-1"><a class="header-anchor" href="#_1-icontroller-Êé•Âè£"><span>1. IController Êé•Âè£</span></a></h3><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>IController.java</code></li><li><strong>ÂäüËÉΩ</strong>ÔºöÂÆö‰πâ‰∫ÜÊéßÂà∂Âô®ÁöÑÊúÄÂ∞èÊé•Âè£ÔºåÂç≥‰∏Ä‰∏™ <code>start()</code> ÊñπÊ≥ïÔºåÂºÄÂßãÊé•ÁÆ°Á®ãÂ∫èÊµÅÁ®ã„ÄÇ</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IController</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÂºÄÂßãÊâßË°åÁ®ãÂ∫èÈÄªËæë</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-textcontroller-Á±ª" tabindex="-1"><a class="header-anchor" href="#_2-textcontroller-Á±ª"><span>2. TextController Á±ª</span></a></h3><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>TextController.java</code></li><li><strong>ÂäüËÉΩ</strong>ÔºöÊñáÊú¨ÊéßÂà∂Âô®ÁöÑÂÆûÁé∞ÔºåÁªìÂêà <code>IModel</code>„ÄÅ<code>IView</code> ‰ª•ÂèäÁî®Êà∑ËæìÂÖ•ÔºàÈÄöËøá Scanner ËØªÂèñÔºâ„ÄÇÂæ™ÁéØËØªÂèñÁî®Êà∑ÂëΩ‰ª§ÔºåËøõË°åÁõ∏Â∫îÂ§ÑÁêÜ„ÄÇ</li></ul><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.Scanner</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TextController</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IController</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IView</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> Scanner</span><span style="color:#F8F8F2;"> sc;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊûÑÈÄ†ÂáΩÊï∞</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> model</span><span style="color:#88846F;"> Ê®°Âûã</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> view</span><span style="color:#88846F;">  ËßÜÂõæ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> sc</span><span style="color:#88846F;">    Áî®‰∫éËØªÂèñÁî®Êà∑ËæìÂÖ•ÁöÑÊâ´ÊèèÂô®</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> TextController</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> model</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> view</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Scanner</span><span style="color:#FD971F;font-style:italic;"> sc</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.sc </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sc;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Ê¨¢Ëøé‰ΩøÁî®ÊñáÊú¨ÁâàÁ®ãÂ∫èÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    boolean</span><span style="color:#F8F8F2;"> running </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> true</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">    while</span><span style="color:#F8F8F2;"> (running) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ËØ∑ËæìÂÖ•Êìç‰ΩúÔºö</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F92672;"> +</span></span>
<span class="line"><span style="color:#E6DB74;">                       &quot;1: Êü•ÁúãÂΩìÂâçÂ≠óÁ¨¶‰∏≤</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F92672;"> +</span></span>
<span class="line"><span style="color:#E6DB74;">                       &quot;2: ËÆæÁΩÆÊñ∞ÁöÑÂ≠óÁ¨¶‰∏≤</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F92672;"> +</span></span>
<span class="line"><span style="color:#E6DB74;">                       &quot;q: ÈÄÄÂá∫Á®ãÂ∫è&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> input </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sc.</span><span style="color:#A6E22E;">nextLine</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">trim</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">      switch</span><span style="color:#F8F8F2;"> (input) {</span></span>
<span class="line"><span style="color:#F92672;">        case</span><span style="color:#E6DB74;"> &quot;1&quot;</span><span style="color:#F92672;">:</span><span style="color:#88846F;"> // Êü•ÁúãÂΩìÂâçÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">          String</span><span style="color:#F8F8F2;"> current </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">          view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂΩìÂâçÂ≠óÁ¨¶‰∏≤‰∏∫: &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> current);</span></span>
<span class="line"><span style="color:#F92672;">          break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">        case</span><span style="color:#E6DB74;"> &quot;2&quot;</span><span style="color:#F92672;">:</span><span style="color:#88846F;"> // ËÆæÁΩÆÊñ∞ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#F8F8F2;">          view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ËØ∑ËæìÂÖ•Êñ∞Â≠óÁ¨¶‰∏≤Ôºö&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">          String</span><span style="color:#F8F8F2;"> newVal </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sc.</span><span style="color:#A6E22E;">nextLine</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">          model.</span><span style="color:#A6E22E;">setString</span><span style="color:#F8F8F2;">(newVal);</span></span>
<span class="line"><span style="color:#F8F8F2;">          view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Â∑≤Êõ¥Êñ∞Â≠óÁ¨¶‰∏≤ÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">          break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">        case</span><span style="color:#E6DB74;"> &quot;q&quot;</span><span style="color:#F92672;">:</span><span style="color:#88846F;"> // ÈÄÄÂá∫</span></span>
<span class="line"><span style="color:#F8F8F2;">          running </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">          view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Á®ãÂ∫èÂ∑≤ÈÄÄÂá∫„ÄÇ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">          break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">        default:</span></span>
<span class="line"><span style="color:#F8F8F2;">          view.</span><span style="color:#A6E22E;">showError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Êú™Áü•ÂëΩ‰ª§ÔºåËØ∑ÈáçÊñ∞ËæìÂÖ•„ÄÇ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li>ÂÆö‰πâ‰∫Ü <code>model</code>, <code>view</code>, <code>sc</code> ‰∏â‰∏™ÁßÅÊúâÂ≠óÊÆµÔºåÂàÜÂà´Ë¥üË¥£Ê®°Âûã„ÄÅËßÜÂõæÂíåËæìÂÖ•„ÄÇ</li><li><code>public TextController(IModel model, IView view, Scanner sc)</code>ÔºöÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≥®ÂÖ•Ëøô‰∏âËÄÖ„ÄÇ</li><li><code>start()</code>ÔºöÊ†∏ÂøÉÊñπÊ≥ïÔºåÁî® <code>while</code> Âæ™ÁéØÂèçÂ§çËÆ©Áî®Êà∑ËæìÂÖ•ÂëΩ‰ª§„ÄÇ</li><li>Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑÂÜÖÂÆπÔºà<code>switch (input)</code>ÔºâÊù•ÂÅö‰∏çÂêåÁöÑÊìç‰ΩúÔºö <ul><li><code>&quot;1&quot;</code>ÔºöËØªÂèñÂπ∂ÊâìÂç∞ÂΩìÂâçÂ≠óÁ¨¶‰∏≤</li><li><code>&quot;2&quot;</code>ÔºöËÆ©Áî®Êà∑ËæìÂÖ•Êñ∞ÁöÑÂ≠óÁ¨¶‰∏≤Âπ∂Êõ¥Êñ∞Âà∞Ê®°Âûã‰∏≠</li><li><code>&quot;q&quot;</code>ÔºöÈÄÄÂá∫Âæ™ÁéØÂπ∂ÁªìÊùüÁ®ãÂ∫è</li><li>ÂÖ∂‰ªñÔºöÊâìÂç∞ÈîôËØØÊèêÁ§∫</li></ul></li></ol><h2 id="stage-4-ÊµãËØïÂπ∂ËøêË°åÊñáÊú¨Áâà-mvc" tabindex="-1"><a class="header-anchor" href="#stage-4-ÊµãËØïÂπ∂ËøêË°åÊñáÊú¨Áâà-mvc"><span>Stage 4: ÊµãËØïÂπ∂ËøêË°åÊñáÊú¨Áâà MVC</span></a></h2><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>MainText.java</code>ÔºàÁ§∫‰æã‰∏ªÁ±ªÔºâ</li><li><strong>ÂäüËÉΩ</strong>ÔºöÊºîÁ§∫Â¶Ç‰ΩïÊê≠Âª∫Âπ∂ËøêË°åÊàë‰ª¨ÁöÑÊñáÊú¨Áâà MVC„ÄÇ</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.Scanner</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">MainText</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IModel</span><span style="color:#F8F8F2;"> model </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">();                 </span><span style="color:#88846F;">// ÂàõÂª∫Ê®°Âûã</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IView</span><span style="color:#F8F8F2;"> view </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> TextView</span><span style="color:#F8F8F2;">(System.out);      </span><span style="color:#88846F;">// ÂàõÂª∫ÊñáÊú¨ËßÜÂõæÔºåËæìÂá∫Âà∞ÊéßÂà∂Âè∞</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Scanner</span><span style="color:#F8F8F2;"> sc </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Scanner</span><span style="color:#F8F8F2;">(System.in);        </span><span style="color:#88846F;">// ÂàõÂª∫Êâ´ÊèèÂô®ËØªÂèñÁî®Êà∑ËæìÂÖ•</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IController</span><span style="color:#F8F8F2;"> controller </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> TextController</span><span style="color:#F8F8F2;">(model, view, sc);</span></span>
<span class="line"><span style="color:#F8F8F2;">    controller.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();                         </span><span style="color:#88846F;">// ÂêØÂä®ÊñáÊú¨ÁâàÁ®ãÂ∫è</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li><code>IModel model = new Model();</code>ÔºöÂÆû‰æãÂåñÊàë‰ª¨ÂàöÊâçÂÜôÁöÑ <code>Model</code>„ÄÇ</li><li><code>IView view = new TextView(System.out);</code>ÔºöÊñáÊú¨ËßÜÂõæ‰ΩøÁî® <code>System.out</code> ËæìÂá∫Âà∞ÊéßÂà∂Âè∞„ÄÇ</li><li><code>Scanner sc = new Scanner(System.in);</code>Ôºö‰ªéÊéßÂà∂Âè∞ËØªÂèñÁî®Êà∑ËæìÂÖ•„ÄÇ</li><li><code>IController controller = new TextController(model, view, sc);</code>ÔºöÁªÑË£Ö MVC ‰∏âË¶ÅÁ¥†„ÄÇ</li><li><code>controller.start();</code>ÔºöÂêØÂä®ÊéßÂà∂Âô®ÔºåÁ®ãÂ∫èËøõÂÖ•Âæ™ÁéØËøêË°å„ÄÇ</li></ol><p>ËøêË°åËØ• <code>main</code> ÊñπÊ≥ïÂêéÔºåÊÇ®ÂèØ‰ª•Âú®ÊéßÂà∂Âè∞‰æùÁÖßÊèêÁ§∫ËæìÂÖ•Êåá‰ª§Êù•Êìç‰ΩúÊ®°ÂûãÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</p><h2 id="stage-5-ÂàùËØÜ-gui-‰∏çÂ§™Â•ΩÁöÑÂÜôÊ≥ïÁ§∫‰æã" tabindex="-1"><a class="header-anchor" href="#stage-5-ÂàùËØÜ-gui-‰∏çÂ§™Â•ΩÁöÑÂÜôÊ≥ïÁ§∫‰æã"><span>Stage 5: ÂàùËØÜ GUIÔºà‰∏çÂ§™Â•ΩÁöÑÂÜôÊ≥ïÁ§∫‰æãÔºâ</span></a></h2><p>‰∏ãÈù¢Êàë‰ª¨ÂºÄÂßãÂºïÂÖ•ÂõæÂΩ¢ÁïåÈù¢ÔºàGUIÔºâ„ÄÇÂÖàÂÅö‰∏Ä‰∏™‚ÄúÂùèËÆæËÆ°‰ΩÜËÉΩËøêË°å‚ÄùÁöÑÁÆÄÂçïÁâàÊú¨ÔºåËÆ©Â§ßÂÆ∂ÁúãÂà∞ÊúÄÂü∫Êú¨ÁöÑ Swing Áî®Ê≥ï„ÄÇËøô‰∏™ÁâàÊú¨‰ºöËÆ©‚ÄúËßÜÂõæ‚ÄùÁõ¥Êé•ÊåÅÊúâÂπ∂‰øÆÊîπ <code>Model</code>Ôºå‰ªéËÄåÁ†¥Âùè‰∫Ü MVC ÁöÑËß£ËÄ¶ÂéüÂàôÔºå‰ΩÜËÉΩËÆ©Êàë‰ª¨ÂÖàÂø´ÈÄüËßÅËØÜÂà∞ Swing ÁºñÁ®ãÁöÑ‰∏ªË¶ÅÂÖÉÁ¥†Ôºö<code>JFrame</code>, <code>JLabel</code>, <code>JButton</code>, <code>JTextField</code> Á≠â„ÄÇ</p><h3 id="_1-ÁÆÄÊòìÁöÑ-gui-view-‰∏çÊé®ËçêÂÜôÊ≥ï" tabindex="-1"><a class="header-anchor" href="#_1-ÁÆÄÊòìÁöÑ-gui-view-‰∏çÊé®ËçêÂÜôÊ≥ï"><span>1. ÁÆÄÊòìÁöÑ GUI ViewÔºà‰∏çÊé®ËçêÂÜôÊ≥ïÔºâ</span></a></h3><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>JFrameView.java</code></li><li><strong>ÂäüËÉΩ</strong>ÔºöÂàõÂª∫‰∏Ä‰∏™Á™óÂè£ (<code>JFrame</code>)ÔºåÈáåÈù¢Âê´Êúâ‰∏Ä‰∏™ËæìÂÖ•Ê°Ü„ÄÅ‰∏§‰∏™ÊåâÈíÆÂíå‰∏Ä‰∏™Ê†áÁ≠æÔºõÂΩìÁÇπÂáªÊåâÈíÆÊó∂ÔºåÁõ¥Êé•Êìç‰Ωú <code>Model</code>„ÄÇ</li></ul><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> javax.swing.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JLabel</span><span style="color:#F8F8F2;"> display;      </span><span style="color:#88846F;">// Áî®‰∫éÊòæÁ§∫ÊñáÊú¨</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JTextField</span><span style="color:#F8F8F2;"> input;    </span><span style="color:#88846F;">// Áî®Êà∑ËæìÂÖ•ÁöÑÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> echoButton;  </span><span style="color:#88846F;">// Echo ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> exitButton;  </span><span style="color:#88846F;">// Exit ÊåâÈíÆ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> model</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setLayout</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> FlowLayout</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Label</span></span>
<span class="line"><span style="color:#F8F8F2;">    display </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JLabel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàùÂßãÁä∂ÊÄÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(display);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // TextField</span></span>
<span class="line"><span style="color:#F8F8F2;">    input </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JTextField</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// ÂÆΩÂ∫¶10Âàó</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Echo ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);   </span><span style="color:#88846F;">// Áõ¥Êé•Áî±Ëá™Â∑±Â§ÑÁêÜÁõëÂê¨</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Exit ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">pack</span><span style="color:#F8F8F2;">();           </span><span style="color:#88846F;">// ËÆ©Â∏ÉÂ±ÄÁîüÊïà</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setVisible</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// ÊòæÁ§∫Á™óÂè£</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setDefaultCloseOperation</span><span style="color:#F8F8F2;">(JFrame.EXIT_ON_CLOSE);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#88846F;">        // Áõ¥Êé•‰øÆÊîπ model</span></span>
<span class="line"><span style="color:#F8F8F2;">        model.</span><span style="color:#A6E22E;">setString</span><span style="color:#F8F8F2;">(input.</span><span style="color:#A6E22E;">getText</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F8F8F2;">        display.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.</span><span style="color:#A6E22E;">exit</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">      default:</span></span>
<span class="line"><span style="color:#88846F;">        // do nothing</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p><strong>‰ª£Á†ÅÈÄêË°åÊ≥®Èáä</strong>Ôºö</p><ol><li><code>extends JFrame implements ActionListener</code>ÔºöËÆ©Á±ªÊú¨Ë∫´Êó¢ÊòØ‰∏Ä‰∏™Á™óÂè£ÔºåÂèàÁõ¥Êé•Â§ÑÁêÜÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂„ÄÇ</li><li><code>this.setLayout(new FlowLayout());</code>Ôºö‰ΩøÁî®ÊµÅÂºèÂ∏ÉÂ±ÄÔºåËÆ©Êéß‰ª∂‰æùÊ¨°ÊîæÁΩÆ„ÄÇ</li><li>ÂàõÂª∫ <code>JLabel</code>, <code>JTextField</code>, ‰∏§‰∏™ <code>JButton</code>ÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨Ê∑ªÂä†Âà∞Ê°ÜÊû∂‰∏≠„ÄÇ</li><li><code>echoButton.setActionCommand(&quot;Echo Button&quot;);</code>ÔºöËÆæÁΩÆÊåâÈíÆÁöÑ‚ÄúÂëΩ‰ª§Â≠óÁ¨¶‰∏≤‚ÄùÔºåÂêéÈù¢Âú® <code>actionPerformed</code> ÈáåÂå∫ÂàÜ„ÄÇ</li><li><code>echoButton.addActionListener(this);</code>ÔºöÂ∞ÜÂΩìÂâçÂØπË±°Êú¨Ë∫´‰Ωú‰∏∫ÁõëÂê¨Âô®„ÄÇ</li><li>Âú® <code>actionPerformed</code> ‰∏≠ÔºåÈÄöËøá <code>switch</code> Âà§Êñ≠ÊòØÂì™‰∏™ÊåâÈíÆË¢´ÁÇπÂáªÔºö <ul><li><code>&quot;Echo Button&quot;</code>ÔºöÊääËæìÂÖ•Ê°ÜÁöÑÂÜÖÂÆπÂÜôÂÖ•Ê®°ÂûãÔºåÂÜçÂ∞ÜÊ®°ÂûãÈáåÁöÑÊñ∞ÂÄºÊõ¥Êñ∞Âà∞Ê†áÁ≠æÊòæÁ§∫„ÄÇ</li><li><code>&quot;Exit Button&quot;</code>ÔºöÈÄÄÂá∫Á®ãÂ∫è„ÄÇ</li></ul></li></ol><h3 id="_2-ÂêØÂä®Ëøô‰∏™‰∏çÊé®ËçêÁöÑ-gui" tabindex="-1"><a class="header-anchor" href="#_2-ÂêØÂä®Ëøô‰∏™‰∏çÊé®ËçêÁöÑ-gui"><span>2. ÂêØÂä®Ëøô‰∏™‰∏çÊé®ËçêÁöÑ GUI</span></a></h3><ul><li><strong>‰ª£Á†ÅÂêçÁß∞</strong>Ôºö<code>MainBadGUI.java</code></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">MainBadGUI</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IModel</span><span style="color:#F8F8F2;"> model </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">    // Áõ¥Êé•Êää Model ‰º†Áªô ViewÔºåËøùÂèç‰∫ÜËß£ËÄ¶ÂéüÂàôÔºå‰ΩÜÂèØÁî®</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    JFrameView</span><span style="color:#F8F8F2;"> view </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Bad GUI Demo&quot;</span><span style="color:#F8F8F2;">, model);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÊ†∑Â∞±ËÉΩÂºπÂá∫‰∏Ä‰∏™Á™óÂè£ÔºåÁÇπÂáª Echo ‰ºöÁõ¥Êé•ÊîπÊ®°ÂûãÔºåÁÇπÂáª Exit ‰ºöÂÖ≥Èó≠Á®ãÂ∫è„ÄÇ</p><h2 id="stage-6-Ëß£ËÄ¶-view-‰∏é-model" tabindex="-1"><a class="header-anchor" href="#stage-6-Ëß£ËÄ¶-view-‰∏é-model"><span>Stage 6: Ëß£ËÄ¶ View ‰∏é Model</span></a></h2><p>‰∏∫‰∫ÜËÆ©Êàë‰ª¨ÁöÑ MVC Êû∂ÊûÑÊõ¥Ê∏ÖÊô∞ÔºåÊàë‰ª¨Â∏åÊúõËßÜÂõæ<strong>‰∏çË¶Å</strong>Áõ¥Êé•Ë∞ÉÁî® <code>model.setString</code>„ÄÇËÄåÊòØÊääÂØπÊ®°ÂûãÁöÑ‰øÆÊîπÁªü‰∏Ä‰∫§Áªô Controller Êù•Â§ÑÁêÜ„ÄÇ</p><p>ÊÄùË∑ØÔºö</p><ol><li><strong>View</strong> ‰∏çÂÜçÊåÅÊúâ <code>model</code>ÔºõÂè™Êèê‰æõËé∑ÂèñÊñáÊú¨„ÄÅÊòæÁ§∫ÊñáÊú¨Á≠âÊñπÊ≥ï„ÄÇ</li><li><strong>Controller</strong> Êã•Êúâ <code>model</code> Âíå <code>view</code>ÔºåÂπ∂ÊääËá™Â∑±Ê≥®ÂÜåÁªô <code>view</code>ÔºåËÆ© <code>view</code> Êää‰∫ã‰ª∂ÂÜçËΩ¨Áªô <code>controller</code>„ÄÇ</li></ol><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">1. Êñ∞ÁöÑ IView</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-1" aria-selected="false">2. Êñ∞ÁöÑ JFrameView</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-2" aria-selected="false">3. Controller</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-3" aria-selected="false">‰∏ªÁ±ªËøêË°å</button></div><!--[--><div class="vp-code-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">1. Êñ∞ÁöÑ IView</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ËøîÂõûÁî®Êà∑Âú®ÊñáÊú¨Ê°Ü‰∏≠ËæìÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Ê∏ÖÁ©∫ÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®ÁïåÈù¢‰∏äÊòæÁ§∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºàÊØîÂ¶ÇÊõ¥Êñ∞Êüê‰∏™ labelÔºâ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊòæÁ§∫Á™óÂè£</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Êèê‰æõÁªôÂ§ñÈÉ®ËÆæÁΩÆÊåâÈíÆÁõëÂê¨Âô®</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#88846F;"> ÊéßÂà∂Âô®‰º†ÂÖ•ÁöÑ ActionListener</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">2. Êñ∞ÁöÑ JFrameView</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> javax.swing.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JLabel</span><span style="color:#F8F8F2;"> display;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JTextField</span><span style="color:#F8F8F2;"> input;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> echoButton;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> exitButton;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setLayout</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> FlowLayout</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ‰∏çÂÜçÊåÅÊúâ IModel</span></span>
<span class="line"><span style="color:#F8F8F2;">    display </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JLabel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàùÂßãÁä∂ÊÄÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(display);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    input </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JTextField</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">pack</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setDefaultCloseOperation</span><span style="color:#F8F8F2;">(JFrame.EXIT_ON_CLOSE);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> input.</span><span style="color:#A6E22E;">getText</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    input.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    display.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(s);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setVisible</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Áî±Â§ñÈÉ®‰º†ÂÖ•ÁöÑÁõëÂê¨Âô®Áªü‰∏ÄÂ§ÑÁêÜ</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="v-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">3. Controller</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Controller</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IView</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> m</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> v</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> m;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> v;</span></span>
<span class="line"><span style="color:#88846F;">    // ËÆ©ËßÜÂõæÊää‰∫ã‰ª∂ÈÉΩ‰∫§ÁªôÂΩìÂâçËøô‰∏™ÂØπË±°</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#88846F;">    // ÊòæÁ§∫ËßÜÂõæ</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#88846F;">        // ‰ªéËßÜÂõæÊãøÂà∞Áî®Êà∑ËæìÂÖ•ÔºåÊõ¥Êñ∞Âà∞Ê®°ÂûãÔºåÂÜçËÆ©ËßÜÂõæÊòæÁ§∫</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        String</span><span style="color:#F8F8F2;"> input </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> view.</span><span style="color:#A6E22E;">getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        model.</span><span style="color:#A6E22E;">setString</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#88846F;">        // ‰πüÂèØÈÄâÊã©Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.</span><span style="color:#A6E22E;">exit</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">      default:</span></span>
<span class="line"><span style="color:#88846F;">        // do nothing</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="v-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">‰∏ªÁ±ªËøêË°å</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">MainGoodGUI</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IModel</span><span style="color:#F8F8F2;"> model </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IView</span><span style="color:#F8F8F2;"> view </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Good GUI Demo&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Controller</span><span style="color:#F8F8F2;"> controller </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(model, view);</span></span>
<span class="line"><span style="color:#F8F8F2;">    controller.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><strong>Controller ËØ¥Êòé</strong>Ôºö</p><ul><li><p>Áé∞Âú® <code>JFrameView</code> ‰∏çÂÜçÁõ¥Êé•Êìç‰Ωú <code>model</code>ÔºåËÄåÊòØÊääÊåâÈíÆÁöÑÁÇπÂáª‰∫ã‰ª∂ÈÄöËøá <code>ActionListener</code> ËΩ¨Áªô <code>Controller</code>„ÄÇ</p></li><li><p><code>Controller</code> ÊåÅÊúâ <code>model</code>ÔºåÂõ†Ê≠§ÂèØ‰ª•ÂÆâÂÖ®Âú∞ËøõË°å <code>model.setString(...)</code>ÔºåÁÑ∂ÂêéÂÜçÂëäËØâ <code>view</code> Êõ¥Êñ∞ÁïåÈù¢„ÄÇ</p></li></ul><h3 id="_1-Êä•ÈîôËß£ÂÜ≥ÊñπÊ°à" tabindex="-1"><a class="header-anchor" href="#_1-Êä•ÈîôËß£ÂÜ≥ÊñπÊ°à"><span>1. Êä•ÈîôËß£ÂÜ≥ÊñπÊ°à</span></a></h3><p>ÂõûÈ°æÊàë‰ª¨Âú®<strong>ÊñáÊú¨Áâà</strong>Âíå<strong>ÂõæÂΩ¢Áâà</strong>ÁöÑÁ§∫‰æãÊó∂Ôºå‰ºöÂèëÁé∞‰∏§Â•ó <code>IView</code>/<code>View</code> ÁöÑÊé•Âè£ÂíåÂÆûÁé∞‰∏çÂêåÔºö</p><ul><li><strong>ÊñáÊú¨Áâà IView</strong> ÈÄöÂ∏∏‰ºöÊúâ <code>showMessage(...)</code>„ÄÅ<code>showError(...)</code> ÊñπÊ≥ï„ÄÇ</li><li><strong>ÂõæÂΩ¢Áâà IView</strong> Âú®ÊúÄÁÆÄÂåñÁöÑËÆæËÆ°‰∏≠ÔºåÂè™ÊúâÊØîÂ¶Ç <code>getInputString()</code>„ÄÅ<code>clearInputString()</code>„ÄÅ<code>setEchoOutput()</code>„ÄÅ<code>display()</code> Á≠âÊñπÊ≥ïÔºåÂèØËÉΩ<strong>Âπ∂Êú™</strong>ÂåÖÂê´ <code>showMessage(...)</code>„ÄÇ</li></ul><p>Â¶ÇÊûú‰Ω†ÁöÑ<strong>ÊéßÂà∂Âô®</strong>ÈáåËøò‰øùÁïô‰∫ÜÂØπ <code>view.showMessage(...)</code> ÁöÑË∞ÉÁî®ÔºàÂ§ßÊ¶ÇÁéáÊòØ‰ªéÊñáÊú¨Áâà‰ª£Á†ÅÊ≤øÁî®ËøáÊù•ÁöÑÔºâÔºåÈÇ£Â∞±‰ºöÂíåÊñ∞ÁöÑÂõæÂΩ¢Áâà <code>IView</code> Êé•Âè£ÂÜ≤Á™ÅÔºåÁºñËØëÊó∂Êä•Èîô„ÄÇ</p><h3 id="_2-Ëß£ÂÜ≥ÊÄùË∑Ø" tabindex="-1"><a class="header-anchor" href="#_2-Ëß£ÂÜ≥ÊÄùË∑Ø"><span>2. Ëß£ÂÜ≥ÊÄùË∑Ø</span></a></h3><h4 id="_2-1-ÊñπÊ°à-1-Âú®ÂõæÂΩ¢Áâà-iview-‰∏≠Ë°•ÂÖÖ-showmessage-ÊñπÊ≥ï" tabindex="-1"><a class="header-anchor" href="#_2-1-ÊñπÊ°à-1-Âú®ÂõæÂΩ¢Áâà-iview-‰∏≠Ë°•ÂÖÖ-showmessage-ÊñπÊ≥ï"><span>2.1 ÊñπÊ°à 1ÔºöÂú®ÂõæÂΩ¢Áâà <code>IView</code> ‰∏≠Ë°•ÂÖÖ <code>showMessage(...)</code> ÊñπÊ≥ï</span></a></h4><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-4" aria-selected="true">1. Êõ¥Êñ∞ÂêéÁöÑ IView Êé•Âè£</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-5" aria-selected="false">2. Êõ¥Êñ∞ÂêéÁöÑ JFrameView ÂÆûÁé∞</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-6" aria-selected="false">3. ÊéßÂà∂Âô®Ë∞ÉÁî®Á§∫‰æãÔºàÂ¶ÇÊúâÈúÄË¶ÅÔºâ</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-7" aria-selected="false">Message</button></div><!--[--><div class="vp-code-tab active" id="v-4" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">1. Êõ¥Êñ∞ÂêéÁöÑ IView Êé•Âè£</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ËøîÂõûÁî®Êà∑Âú®ÊñáÊú¨Ê°Ü‰∏≠ËæìÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Ê∏ÖÁ©∫ÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®ÁïåÈù¢‰∏äÊòæÁ§∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ôºà‰æãÂ¶ÇÊõ¥Êñ∞Êüê‰∏™Ê†áÁ≠æÔºâ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®Á™óÂè£‰∏äÊòæÁ§∫ËØ•ËßÜÂõæ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Êèê‰æõÁªôÂ§ñÈÉ®ËÆæÁΩÆÊåâÈíÆÁõëÂê¨Âô®ÔºàÈÄöÂ∏∏ÊòØÊéßÂà∂Âô®Ôºâ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#88846F;"> ÊéßÂà∂Âô®‰º†ÂÖ•ÁöÑ ActionListener</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">  /**</span></span>
<span class="line highlighted"><span style="color:#88846F;">   * Âú®ÁïåÈù¢‰∏äÊòæÁ§∫‰∏ÄÊù°ÊôÆÈÄö‰ø°ÊÅØÔºàÂºπÁ™óÊàñÊ†áÁ≠æÁ≠âÔºâ</span></span>
<span class="line highlighted"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> msg</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line highlighted"><span style="color:#88846F;">   */</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> msg</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#88846F;">  /**</span></span>
<span class="line highlighted"><span style="color:#88846F;">   * Âú®ÁïåÈù¢‰∏äÊòæÁ§∫‰∏ÄÊù°ÈîôËØØ‰ø°ÊÅØÔºàÂºπÁ™óÊàñÊ†áÁ≠æÁ≠âÔºâ</span></span>
<span class="line highlighted"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> err</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÈîôËØØÂÜÖÂÆπ</span></span>
<span class="line highlighted"><span style="color:#88846F;">   */</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> showError</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> err</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="v-5" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">2. Êõ¥Êñ∞ÂêéÁöÑ JFrameView ÂÆûÁé∞</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> javax.swing.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JLabel</span><span style="color:#F8F8F2;"> display;      </span><span style="color:#88846F;">// Áî®‰∫éÊòæÁ§∫Â≠óÁ¨¶‰∏≤ÁöÑÊ†áÁ≠æ</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JTextField</span><span style="color:#F8F8F2;"> input;    </span><span style="color:#88846F;">// Áî®Êà∑ËæìÂÖ•ÁöÑÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> echoButton;  </span><span style="color:#88846F;">// Echo ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> exitButton;  </span><span style="color:#88846F;">// Exit ÊåâÈíÆ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setLayout</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> FlowLayout</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÂàùÂßãÂåñÁïåÈù¢ÁªÑ‰ª∂</span></span>
<span class="line"><span style="color:#F8F8F2;">    display </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JLabel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàùÂßãÁä∂ÊÄÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(display);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    input </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JTextField</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">pack</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setDefaultCloseOperation</span><span style="color:#F8F8F2;">(JFrame.EXIT_ON_CLOSE);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> input.</span><span style="color:#A6E22E;">getText</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    input.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    display.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(s);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setVisible</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line highlighted"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> msg</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line highlighted"><span style="color:#88846F;">    // ÈÄöËøáÂØπËØùÊ°ÜÔºàMessageDialogÔºâÊòæÁ§∫ÊôÆÈÄöÊ∂àÊÅØ</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    JOptionPane.</span><span style="color:#A6E22E;">showMessageDialog</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">, msg, </span><span style="color:#E6DB74;">&quot;Message&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">                                  JOptionPane.INFORMATION_MESSAGE);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  }</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line highlighted"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> showError</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> err</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line highlighted"><span style="color:#88846F;">    // ÈÄöËøáÂØπËØùÊ°ÜÔºàMessageDialogÔºâÊòæÁ§∫ÈîôËØØÊ∂àÊÅØ</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    JOptionPane.</span><span style="color:#A6E22E;">showMessageDialog</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">, err, </span><span style="color:#E6DB74;">&quot;Error&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">                                  JOptionPane.ERROR_MESSAGE);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="v-6" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">3. ÊéßÂà∂Âô®Ë∞ÉÁî®Á§∫‰æãÔºàÂ¶ÇÊúâÈúÄË¶ÅÔºâ</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#88846F;">// Â¶ÇÊûú‰Ω†ÁöÑÊéßÂà∂Âô®‰∏≠ÈúÄË¶ÅË∞ÉÁî®Ôºö</span></span>
<span class="line"><span style="color:#F8F8F2;">view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Êìç‰ΩúÊàêÂäüÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// ÊàñËÄÖ</span></span>
<span class="line"><span style="color:#F8F8F2;">view.</span><span style="color:#A6E22E;">showError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Âá∫Áé∞‰∫Ü‰∏Ä‰∫õÈîôËØØÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-7" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Message</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#88846F;">// Âè™Ë¶ÅÊéßÂà∂Âô®ÊåÅÊúâÁöÑÊòØËøô‰∏™Êõ¥Êñ∞ÂêéÁöÑ IView Êé•Âè£ÂØπË±°ÔºåÂπ∂‰∏îÂ∫ïÂ±ÇÊòØÁî® JFrameView Êù•ÂÆû‰æãÂåñÔºåÂ∞±ËÉΩÊ≠£Â∏∏Ë∞ÉÁî®Âπ∂ÁúãÂà∞ÂØπËØùÊ°ÜÂºπÂá∫„ÄÇ</span></span>
<span class="line"><span style="color:#88846F;">// ‰æãÂ≠êÔºàÂè™Â±ïÁ§∫Ê†∏ÂøÉÁâáÊÆµÔºâÔºö</span></span>
<span class="line"><span style="color:#F8F8F2;">@</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#F8F8F2;"> e) {</span></span>
<span class="line"><span style="color:#F92672;">  switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">    case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> inputVal </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> view.</span><span style="color:#A6E22E;">getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">      if</span><span style="color:#F8F8F2;"> (inputVal.</span><span style="color:#A6E22E;">isEmpty</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#88846F;">        // Â¶ÇÊûúÁî®Êà∑Ê≤°ËæìÂÖ•ÂÜÖÂÆπÔºåÂ∞±Ë∞ÉÁî® showError ÊèêÁ§∫</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">showError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂÜÖÂÆπÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        model.</span><span style="color:#A6E22E;">setString</span><span style="color:#F8F8F2;">(inputVal);</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">        // ‰πüÂèØ‰ª•Ë∞ÉÁî® showMessage Ë°®Á§∫Êìç‰ΩúÊàêÂäü</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">showMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Êõ¥Êñ∞ÊàêÂäüÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F92672;">      break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">    case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">      System.</span><span style="color:#A6E22E;">exit</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">      break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">    default:</span></span>
<span class="line"><span style="color:#88846F;">      // ÂÖ∂‰ªñÊÉÖÂÜµ</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">showError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Êú™Áü•ÂëΩ‰ª§Ôºö&quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><p><strong>IView Ë¶ÅÁÇπ</strong>Ôºö</p><ul><li>Êñ∞Â¢û‰∫Ü <code>showMessage(String msg)</code> Âíå <code>showError(String err)</code> Ëøô‰∏§‰∏™ÊñπÊ≥ï„ÄÇ</li><li>ÂÖ∂‰ªñÊñπÊ≥ïÔºàÂ¶Ç <code>getInputString()</code>, <code>setEchoOutput()</code> Á≠âÔºâ‰øùÊåÅÂéüÁä∂„ÄÇ</li></ul><hr><p><strong>JFrameView Ë¶ÅÁÇπ</strong>Ôºö</p><ul><li>ÈÄöËøá <code>JOptionPane.showMessageDialog(...)</code> Êù•ÂºπÂá∫ÂØπËØùÊ°ÜÊòæÁ§∫‰ø°ÊÅØ„ÄÇ</li><li><code>showMessage(...)</code> ‰ΩøÁî® <code>INFORMATION_MESSAGE</code> ÂõæÊ†áÔºå<code>showError(...)</code> ‰ΩøÁî® <code>ERROR_MESSAGE</code> ÂõæÊ†á„ÄÇ</li><li>ËøôÊ†∑‰∏ÄÊù•ÔºåÂ¶ÇÊûúÊéßÂà∂Âô®‰∏≠Ë∞ÉÁî®‰∫Ü <code>view.showMessage(&quot;xxxxx&quot;)</code> Êàñ <code>view.showError(&quot;xxxxx&quot;)</code>ÔºåÂ∞±‰∏ç‰ºöÂÜçÂá∫Áé∞‚ÄúÊâæ‰∏çÂà∞Á¨¶Âè∑‚ÄùÈîôËØØÔºåËÄå‰∏îËÉΩÂú® GUI ‰∏≠ÂºπÂá∫Áõ∏Â∫îÁöÑÊ∂àÊÅØÂØπËØùÊ°Ü„ÄÇ</li></ul><h3 id="_2-2-ÊñπÊ°à-2-Âà†Èô§ÂØπ-view-showmessage-ÁöÑË∞ÉÁî®„ÄåÊé®Ëçê„Äç" tabindex="-1"><a class="header-anchor" href="#_2-2-ÊñπÊ°à-2-Âà†Èô§ÂØπ-view-showmessage-ÁöÑË∞ÉÁî®„ÄåÊé®Ëçê„Äç"><span>2.2 ÊñπÊ°à 2ÔºöÂà†Èô§ÂØπ <code>view.showMessage(...)</code> ÁöÑË∞ÉÁî®„ÄåÊé®Ëçê„Äç</span></a></h3><p>Â¶ÇÊûú<strong>ÂõæÂΩ¢Áâà</strong>Âπ∂‰∏çÈúÄË¶ÅÂÜç‰ª•ÊñáÂ≠óÂΩ¢ÂºèËæìÂá∫Ê∂àÊÅØÔºàÊØîÂ¶Ç‰∏çÊÉ≥ÂºπÂØπËØùÊ°ÜÔºå‰πü‰∏çÊÉ≥ÂÜôÂà∞Êüê‰∏™ÊñáÊú¨Âå∫ÔºâÔºåÈÇ£Â∞±ÂèØ‰ª•Êää<strong>ÊéßÂà∂Âô®</strong>ÈáåÁöÑ <code>view.showMessage(...)</code> Áõ∏ÂÖ≥Ë°åÂà†ÊéâÊàñÊõøÊç¢ÊàêÂÖ∂‰ªñÈÄªËæë„ÄÇËøôÊ†∑Â∞±‰∏ç‰ºöÂÜçË∞ÉÁî®‰∏Ä‰∏™Ê≤°ÊúâÂÆö‰πâÁöÑÊñπÊ≥ïÔºåËá™ÁÑ∂‰πüÂ∞±Ê∂àÈô§‰∫Ü‚ÄúÊâæ‰∏çÂà∞Á¨¶Âè∑‚ÄùÁöÑÈóÆÈ¢ò„ÄÇ</p><h2 id="stage-7-Âä†ÂÖ•ÈîÆÁõò‰∫ã‰ª∂" tabindex="-1"><a class="header-anchor" href="#stage-7-Âä†ÂÖ•ÈîÆÁõò‰∫ã‰ª∂"><span>Stage 7: Âä†ÂÖ•ÈîÆÁõò‰∫ã‰ª∂</span></a></h2><p>Áé∞Âú®Êàë‰ª¨ÊÉ≥ËÆ©Áî®Êà∑ÊåâÈîÆÁõòÊüê‰∫õÊåâÈîÆÊó∂‰πüËÉΩËß¶Âèë‰∫ã‰ª∂Ôºå‰æãÂ¶ÇÔºö</p><ul><li>Êåâ‰∏ã <code>&#39;d&#39;</code> ÈîÆÂ∞±ÂàáÊç¢ÊñáÂ≠óÈ¢úËâ≤Ôºõ</li><li>Êåâ‰Ωè <code>&#39;c&#39;</code> ÈîÆÊó∂ÊöÇÊó∂ÊääÊñáÊú¨Â§ßÂÜôÁ≠â„ÄÇ</li></ul><h3 id="_1-ËÆ©-view-Êèê‰æõÈîÆÁõòÁõëÂê¨Êé•Âè£" tabindex="-1"><a class="header-anchor" href="#_1-ËÆ©-view-Êèê‰æõÈîÆÁõòÁõëÂê¨Êé•Âè£"><span>1. ËÆ© View Êèê‰æõÈîÆÁõòÁõëÂê¨Êé•Âè£</span></a></h3><p>Âú® <code>IView</code> ÈáåÂä†ÂÖ•Ôºö</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-8" aria-selected="true">ÁÆÄÂçïÁâà</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-9" aria-selected="false">all-code</button></div><!--[--><div class="vp-code-tab active" id="v-8" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">ÁÆÄÂçïÁâà</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®ËßÜÂõæ‰∏äÊ≥®ÂÜåÈîÆÁõòÁõëÂê¨</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#88846F;"> Ë¶ÅÊ≥®ÂÜåÁöÑ KeyListener</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyListener</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-9" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">all-code</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * ËßÜÂõæÊé•Âè£ÔºåÂÆö‰πâ GUI ËßÜÂõæÊâÄÈúÄÁöÑÊúÄÂü∫Êú¨ÊñπÊ≥ï„ÄÇ</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ËøîÂõûÁî®Êà∑Âú®ÊñáÊú¨Ê°Ü‰∏≠ËæìÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Ê∏ÖÁ©∫ÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®ÁïåÈù¢‰∏äÊòæÁ§∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºàÊØîÂ¶ÇÊõ¥Êñ∞Êüê‰∏™ labelÔºâ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊòæÁ§∫Á™óÂè£</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Êèê‰æõÁªôÂ§ñÈÉ®ËÆæÁΩÆÊåâÈíÆÁõëÂê¨Âô®ÔºàÁî®‰∫éÂ§ÑÁêÜÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂Ôºâ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#88846F;"> ÊéßÂà∂Âô®‰º†ÂÖ•ÁöÑ ActionListener</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Êñ∞Â¢ûÔºöÂú®ËßÜÂõæ‰∏äÊ≥®ÂÜåÈîÆÁõòÁõëÂê¨</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#88846F;"> Ë¶ÅÊ≥®ÂÜåÁöÑ KeyListener</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyListener</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><h3 id="_2-jframeview-‰∏≠ÂÆûÁé∞" tabindex="-1"><a class="header-anchor" href="#_2-jframeview-‰∏≠ÂÆûÁé∞"><span>2. JFrameView ‰∏≠ÂÆûÁé∞</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-10" aria-selected="true">ÁÆÄÂçï</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-11" aria-selected="false">all-code</button></div><!--[--><div class="vp-code-tab active" id="v-10" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">ÁÆÄÂçï</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyListener</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Ë¶ÅÊ±ÇËÅöÁÑ¶ÊâçËÉΩÁõëÂê¨ÈîÆÁõòÔºåÊâÄ‰ª•‰∏ÄËà¨ÈúÄË¶ÅËÆæÁΩÆ</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setFocusable</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">requestFocus</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(kbd);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  ...</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-11" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">all-code</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> javax.swing.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * JFrame ÂÆûÁé∞ÁöÑÂÖ∑‰ΩìËßÜÂõæÁ±ª„ÄÇ</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JLabel</span><span style="color:#F8F8F2;"> display;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JTextField</span><span style="color:#F8F8F2;"> input;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> echoButton;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> exitButton;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊûÑÈÄ†ÂáΩÊï∞</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#88846F;"> Á™óÂè£Ê†áÈ¢ò</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setLayout</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> FlowLayout</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÂàùÂßãÂåñÁªÑ‰ª∂</span></span>
<span class="line"><span style="color:#F8F8F2;">    display </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JLabel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàùÂßãÁä∂ÊÄÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(display);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    input </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JTextField</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Â∏ÉÂ±ÄÂÆåÊØïÂêéÊâìÂåÖ</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">pack</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setDefaultCloseOperation</span><span style="color:#F8F8F2;">(JFrame.EXIT_ON_CLOSE);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> input.</span><span style="color:#A6E22E;">getText</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    input.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    display.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(s);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setVisible</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // ÊääÂ§ñÈÉ®‰º†ËøõÊù•ÁöÑ ActionListener Ê∑ªÂä†Âà∞ÊåâÈíÆ‰∏ä</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÂÖÅËÆ∏Â§ñÈÉ®Ê≥®ÂÜåÈîÆÁõòÁõëÂê¨Âô®</span></span>
<span class="line"><span style="color:#88846F;">   * ÈÄöËøá setFocusable(true) Âíå requestFocus() Á°Æ‰øùËÉΩÊçïËé∑ÈîÆÁõò‰∫ã‰ª∂</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyListener</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setFocusable</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);  </span><span style="color:#88846F;">// ÂÖÅËÆ∏ÂΩìÂâçÁªÑ‰ª∂Ëé∑ÂæóÈîÆÁõòÁÑ¶ÁÇπ</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">requestFocus</span><span style="color:#F8F8F2;">();      </span><span style="color:#88846F;">// ‰∏ªÂä®ËØ∑Ê±ÇÁÑ¶ÁÇπ</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(kbd);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><h3 id="_3-Âú®-controller-‰∏≠ÂÆûÁé∞-keylistener" tabindex="-1"><a class="header-anchor" href="#_3-Âú®-controller-‰∏≠ÂÆûÁé∞-keylistener"><span>3. Âú® Controller ‰∏≠ÂÆûÁé∞ KeyListener</span></a></h3><p>Êàë‰ª¨ÂèØ‰ª•ËÆ© <code>Controller</code> ÂêåÊó∂ <code>implements KeyListener</code>ÔºåÊàñËÄÖÂÜô‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ±ª <code>KeyboardHandler</code> Âπ∂Âú® Controller ‰∏≠ÁªÑÂêà‰ΩøÁî®„ÄÇ‰∏ãÈù¢ÊòØËÆ© <code>Controller</code> Áõ¥Êé•ÂÆûÁé∞ÁöÑ‰æãÂ≠ê„ÄÇ</p><p>Âú®ÂéüÊúâÁöÑ <code>Controller</code> Âü∫Á°Ä‰∏äÔºåÂ¢ûÂä† <code>implements KeyListener</code>ÔºåÂπ∂ÂÆûÁé∞Áõ∏ÂÖ≥ÊñπÊ≥ïÔºà<code>keyTyped</code>, <code>keyPressed</code>, <code>keyReleased</code>Ôºâ„ÄÇ‰ª•‰∏Ä‰∏™ÁÆÄÂçïÁ§∫‰æã‰∏∫ÊºîÁ§∫Ôºö</p><ul><li>ÂΩìÁî®Êà∑Êï≤Âáª <code>&#39;d&#39;</code> ÈîÆÔºöÂàáÊç¢ÊñáÂ≠óÈ¢úËâ≤ÔºàËøôÈáå‰ªÖÂú®ÊéßÂà∂Âè∞ÊâìÂç∞ÊèêÁ§∫ÔºåÂèØËá™Ë°åÊîπËøõÂà∞ËßÜÂõæ‰∏äÔºâ„ÄÇ</li><li>ÂΩìÁî®Êà∑Êåâ‰∏ã <code>&#39;c&#39;</code> ÈîÆÔºöÊää Model ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤Â§ßÂÜôÊòæÁ§∫Âà∞ View„ÄÇ</li><li>ÂΩìÁî®Êà∑ÊùæÂºÄ <code>&#39;c&#39;</code> ÈîÆÔºöÊÅ¢Â§çÂéüÊúâÂ≠óÁ¨¶‰∏≤„ÄÇ</li></ul><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-12" aria-selected="true">ÁÆÄÂçï</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-13" aria-selected="false">all-code</button></div><!--[--><div class="vp-code-tab active" id="v-12" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">ÁÆÄÂçï</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Controller</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">KeyListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IView</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> boolean</span><span style="color:#F8F8F2;"> colorRed </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> false</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// Áî®‰∫éÁ§∫‰æãÔºöÊòØÂê¶Â∑≤ÂàáÊç¢ÊàêÁ∫¢Ëâ≤</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> m</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> v</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> m;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> v;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // ÊåâÈíÆ‰∫ã‰ª∂</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // ÈîÆÁõò‰∫ã‰ª∂</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyTyped</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Â¶ÇÊûúÁî®Êà∑Êï≤Âáª &#39;d&#39;ÔºåÂàôÂàáÊç¢È¢úËâ≤</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getKeyChar</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;d&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">      // ËøôÈáå‰ªÖÂÅöÁÆÄÂçïÊºîÁ§∫ÔºåÂèØ‰ª•ËÆ© view Êèê‰æõ toggleColor() Á≠âÊñπÊ≥ï</span></span>
<span class="line"><span style="color:#F8F8F2;">      colorRed </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> !</span><span style="color:#F8F8F2;">colorRed;</span></span>
<span class="line"><span style="color:#F92672;">      if</span><span style="color:#F8F8F2;"> (colorRed) {</span></span>
<span class="line"><span style="color:#88846F;">        // ÊØîÂ¶ÇËÆ©Ê†áÁ≠æËÆæÁΩÆÊàêÁ∫¢Ëâ≤ÊñáÂ≠óÔºàÈúÄÂú® View ‰∏≠Êèê‰æõ‰∏Ä‰∏™Êé•Âè£ÊàñÁõ¥Êé•ÊãøÂà∞ JLabelÔºâ</span></span>
<span class="line"><span style="color:#88846F;">        // Ê≠§Â§ÑÂè™ÊòØÁ§∫‰æãÔºå‰∏ç‰ª£Ë°®ÂÆåÊï¥ÂÆûÁé∞</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàáÊç¢‰∏∫Á∫¢Ëâ≤ÊñáÂ≠óÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàáÊç¢ÂõûÈªëËâ≤ÊñáÂ≠óÔºÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyPressed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Â¶ÇÊûúÊåâ‰∏ã &#39;c&#39; ÈîÆÔºåÊää model ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ËΩ¨Â§ßÂÜôÂπ∂ÊòæÁ§∫</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getKeyCode</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">==</span><span style="color:#F8F8F2;"> KeyEvent.VK_C) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text.</span><span style="color:#A6E22E;">toUpperCase</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyReleased</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Â¶ÇÊûúÊùæÂºÄ &#39;c&#39; ÈîÆÔºåÂàôÊÅ¢Â§çÂéüÊúâÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getKeyCode</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">==</span><span style="color:#F8F8F2;"> KeyEvent.VK_C) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="v-13" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">all-code</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * GUI ÊéßÂà∂Âô®ÔºåË¥üË¥£ÂìçÂ∫îÊåâÈíÆÂíåÈîÆÁõò‰∫ã‰ª∂ÔºåÂπ∂Êõ¥Êñ∞Ê®°Âûã‰∏éËßÜÂõæ„ÄÇ</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Controller</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">KeyListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IView</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // Áî®‰∫éÁ§∫‰æãÔºöÊñáÂ≠óÊòØÂê¶ÂàáÊç¢‰∏∫Á∫¢Ëâ≤</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> boolean</span><span style="color:#F8F8F2;"> isRed </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊûÑÈÄ†ÂáΩÊï∞</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> m</span><span style="color:#88846F;"> Ê®°Âûã</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> v</span><span style="color:#88846F;"> ËßÜÂõæ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> m</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> v</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> m;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> v;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÊääËá™Â∑±Ê≥®ÂÜå‰∏∫ËßÜÂõæÁöÑÊåâÈíÆÁõëÂê¨Âô®</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÊääËá™Â∑±Ê≥®ÂÜå‰∏∫ËßÜÂõæÁöÑÈîÆÁõòÁõëÂê¨Âô®</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÂêØÂä®Á®ãÂ∫è</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    view.</span><span style="color:#A6E22E;">display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#88846F;">        // ËØªÂèñËßÜÂõæÁöÑËæìÂÖ•ËÆæÁΩÆÂà∞Ê®°ÂûãÔºåÂÜçËÆ©ËßÜÂõæÂõûÊòæ</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        String</span><span style="color:#F8F8F2;"> input </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> view.</span><span style="color:#A6E22E;">getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        model.</span><span style="color:#A6E22E;">setString</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#88846F;">        // ÂèØËá™Ë°åÂÜ≥ÂÆöË¶Å‰∏çË¶ÅÊ∏ÖÁ©∫ËæìÂÖ•Ê°Ü</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.</span><span style="color:#A6E22E;">exit</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">      default:</span></span>
<span class="line"><span style="color:#88846F;">        // do nothing</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÈîÆÁõò‰∫ã‰ª∂ - keyTyped</span></span>
<span class="line"><span style="color:#88846F;">   * ÂΩìÁî®Êà∑Êï≤ÂáªÊüê‰∏™ÈîÆÂπ∂ÈáäÊîæÔºàËÉΩËæìÂÖ•Â≠óÁ¨¶ÁöÑÈîÆÔºâÔºå‰ºöËß¶Âèë keyTyped</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyTyped</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Áî®Êà∑Êï≤Âáª &#39;d&#39; Êó∂ÔºåÁ§∫‰æãÔºöÂàáÊç¢ÊñáÂ≠óÈ¢úËâ≤</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getKeyChar</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;d&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      isRed </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> !</span><span style="color:#F8F8F2;">isRed;</span></span>
<span class="line"><span style="color:#F92672;">      if</span><span style="color:#F8F8F2;"> (isRed) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàáÊç¢‰∏∫Á∫¢Ëâ≤ÊñáÂ≠óÔºàÁ§∫‰æãÔºåÂèØÊîπ‰∏∫ÁúüÂÆû GUI Êìç‰ΩúÔºâ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàáÊç¢ÂõûÈªëËâ≤ÊñáÂ≠óÔºàÁ§∫‰æãÔºåÂèØÊîπ‰∏∫ÁúüÂÆû GUI Êìç‰ΩúÔºâ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÈîÆÁõò‰∫ã‰ª∂ - keyPressed</span></span>
<span class="line"><span style="color:#88846F;">   * ÂΩìÁî®Êà∑Êåâ‰∏ãÊüê‰∏™ÈîÆÊó∂Ëß¶Âèë</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyPressed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Â¶ÇÊûúÊåâ‰∏ã &#39;c&#39; ÈîÆÔºåÊää model ‰∏≠Â≠óÁ¨¶‰∏≤ËΩ¨Â§ßÂÜôÊòæÁ§∫Âà∞ view</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getKeyCode</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">==</span><span style="color:#F8F8F2;"> KeyEvent.VK_C) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text.</span><span style="color:#A6E22E;">toUpperCase</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÈîÆÁõò‰∫ã‰ª∂ - keyReleased</span></span>
<span class="line"><span style="color:#88846F;">   * ÂΩìÁî®Êà∑ÊùæÂºÄÊüê‰∏™ÈîÆÊó∂Ëß¶Âèë</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyReleased</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // Â¶ÇÊûúÊùæÂºÄ &#39;c&#39; ÈîÆÔºåÂàôÊÅ¢Â§çÂéüÊúâÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getKeyCode</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">==</span><span style="color:#F8F8F2;"> KeyEvent.VK_C) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><h3 id="_4-maingui" tabindex="-1"><a class="header-anchor" href="#_4-maingui"><span>4. MainGUI</span></a></h3><p>ËøôÊ†∑ÔºåÂΩìÁî®Êà∑Êåâ <code>d</code>„ÄÅ<code>c</code> ÈîÆÊó∂ÔºåÂ∞±ËÉΩËß¶ÂèëÁâπÂÆöÈÄªËæë„ÄÇ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> controller.Controller</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> model.IModel</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> model.Model</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> view.IView</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> view.JFrameView</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">MainGUI</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IModel</span><span style="color:#F8F8F2;"> model </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">();                 </span><span style="color:#88846F;">// ÂàõÂª∫Ê®°Âûã</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IView</span><span style="color:#F8F8F2;"> view </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;GUI with KeyListener&quot;</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// ÂàõÂª∫ËßÜÂõæ</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Controller</span><span style="color:#F8F8F2;"> controller </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(model, view); </span><span style="color:#88846F;">// ÂàõÂª∫ÊéßÂà∂Âô®</span></span>
<span class="line"><span style="color:#F8F8F2;">    controller.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();                         </span><span style="color:#88846F;">// ÂêØÂä®Â∫îÁî®</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="stage-8-‰ΩøÁî®-map-Êù•Êò†Â∞ÑÊõ¥Â§öÈîÆÁõò-ÊåâÈíÆÂä®‰Ωú" tabindex="-1"><a class="header-anchor" href="#stage-8-‰ΩøÁî®-map-Êù•Êò†Â∞ÑÊõ¥Â§öÈîÆÁõò-ÊåâÈíÆÂä®‰Ωú"><span>Stage 8: ‰ΩøÁî® Map Êù•Êò†Â∞ÑÊõ¥Â§öÈîÆÁõò/ÊåâÈíÆÂä®‰Ωú</span></a></h2><p>Ëã•ÊÉ≥ÁÅµÊ¥ªÂú∞ËÆ©Áî®Êà∑Ëá™ÂÆö‰πâÁÉ≠ÈîÆÔºåÂèØ‰ª•ÊääÈîÆÂÄºÂíåÂØπÂ∫îÂä®‰ΩúÁî® <code>Map</code>ÔºàÊàñ <code>ActionMap</code>, <code>InputMap</code>ÔºâÊù•Áª¥Êä§„ÄÇÊ†∏ÂøÉÊÄùÊÉ≥ÊòØÔºö</p><ol><li><strong>Â∞ÜÂéüÊú¨ <code>switch</code>/<code>if</code> ÈáåÁöÑÈÄªËæëËΩ¨Êç¢‰∏∫‚ÄúÊï∞ÊçÆ‚Äù</strong>ÔºàÂ¶Ç mapÔºåÊää <code>KeyEvent</code> Êàñ <code>char</code> Êò†Â∞ÑÂà∞ÂÖ∑‰ΩìË¶ÅÊâßË°åÁöÑ <code>Runnable</code>Ôºâ„ÄÇ</li><li>ËøôÊ†∑ËÉΩÂ§üÂú®ËøêË°åÊó∂Ê†πÊçÆÈÖçÁΩÆÊñá‰ª∂ÊàñÁî®Êà∑ÈÄâÈ°πÊîπÂèò‚ÄúÊåâÈîÆ ‚Üí Âä®‰Ωú‚ÄùÁöÑÊò†Â∞Ñ„ÄÇ</li></ol><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-14" aria-selected="true">1. IModel.java</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-15" aria-selected="false">Model.java</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-16" aria-selected="false">IView.java</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-17" aria-selected="false">JFrameView.java</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-18" aria-selected="false">KeyboardHandler.java</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-19" aria-selected="false">Controller.java</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-20" aria-selected="false">MainStage8.java</button></div><!--[--><div class="vp-tab active" id="v-14" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">1. IModel.java</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * Ê®°ÂûãÊé•Âè£ÔºåÂÆö‰πâÂØπÂ≠óÁ¨¶‰∏≤ÁöÑÂü∫Êú¨Êìç‰Ωú</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IModel</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Ëé∑ÂèñÂΩìÂâçÂ≠òÂÇ®ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@return</span><span style="color:#88846F;"> Ê®°Âûã‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#A6E22E;"> getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ËÆæÁΩÆÊñ∞ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> str</span><span style="color:#88846F;"> Ë¶ÅËÆæÁΩÆÁöÑÊñ∞Â≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setString</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> str</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-15" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Model.java</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * IModel ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåÂÜÖÈÉ®Áî®‰∏Ä‰∏™ String Êù•Â≠òÂÇ®Êï∞ÊçÆ</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Model</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IModel</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#F8F8F2;"> data;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Êó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàùÂßãÂåñ‰∏∫Á©∫Â≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.data </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;&quot;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#A6E22E;"> getString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#FD971F;"> this</span><span style="color:#F8F8F2;">.data;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setString</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> str</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> str;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-16" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">IView.java</div><!--[--><p>ËøôÈáåÁöÑËßÜÂõæÊé•Âè£ÈúÄË¶ÅÊîØÊåÅ‰ª•‰∏ãÂäüËÉΩÔºö</p><ol><li>Ëé∑ÂèñÊñáÊú¨Ê°ÜÂÜÖÂÆπ</li><li>Ê∏ÖÁ©∫ÊñáÊú¨Ê°Ü</li><li>ËÆæÁΩÆÂπ∂ÊòæÁ§∫Ê†áÁ≠æ‰∏äÁöÑÊñáÊú¨</li><li>ÊòæÁ§∫Á™óÂè£</li><li>ËÆæÁΩÆÊåâÈíÆÁõëÂê¨ÔºàActionListenerÔºâ</li><li>Ê≥®ÂÜåÈîÆÁõòÁõëÂê¨ÔºàKeyListenerÔºâ</li></ol><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * ËßÜÂõæÊé•Âè£ÔºåÂÆö‰πâÁïåÈù¢ÂèØÊèê‰æõÁöÑÊìç‰Ωú</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@return</span><span style="color:#88846F;"> Áî®Êà∑Âú®ÊñáÊú¨Ê°Ü‰∏≠ËæìÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Ê∏ÖÁ©∫ÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ËÆæÁΩÆÁïåÈù¢‰∏äÊ†áÁ≠æÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#88846F;"> Ë¶ÅÊòæÁ§∫ÁöÑÂÜÖÂÆπ</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÊòæÁ§∫Êï¥‰∏™Á™óÂè£</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ‰∏∫ÊåâÈíÆËÆæÁΩÆÁõëÂê¨Âô®ÔºàÂú® Controller ÈáåÂÆûÁé∞Â§ÑÁêÜÈÄªËæëÔºâ</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#88846F;"> Ë¶ÅÊ≥®ÂÜåÁöÑÁõëÂê¨Âô®</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®ËßÜÂõæ‰∏äÊ≥®ÂÜåÈîÆÁõòÁõëÂê¨Âô®</span></span>
<span class="line"><span style="color:#88846F;">   * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#88846F;"> Ë¶ÅÊ≥®ÂÜåÁöÑ KeyListener</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyListener</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ÂàáÊç¢È¢úËâ≤ÔºàÊú¨Á§∫‰æã‰ªÖÊºîÁ§∫ÔºåÂÆûÈôÖÂèØÁî®Êù•ÊîπÂèòÊñáÂ≠ó/ËÉåÊôØÁ≠âÔºâ</span></span>
<span class="line"><span style="color:#88846F;">   * Âú®ÈÖçÂêàÈîÆÁõò‰∫ã‰ª∂Êó∂Áî®‰∫éÊºîÁ§∫È¢úËâ≤ÂàáÊç¢</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> toggleColor</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-17" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">JFrameView.java</div><!--[--><p>ËøôÊòØ‰∏Ä‰∏™Âü∫‰∫é Swing ÁöÑÁÆÄÂçïËßÜÂõæÂÆûÁé∞„ÄÇÊîØÊåÅ‰∏§‰∏™ÊåâÈíÆ„ÄÅ‰∏Ä‰∏™ÊñáÊú¨Ê°ÜÂíå‰∏Ä‰∏™Ê†áÁ≠æÔºåÂêåÊó∂Êèê‰æõÂØπÈîÆÁõòÁõëÂê¨ÁöÑÊîØÊåÅÔºåÂπ∂Âú®Á§∫‰æã‰∏≠Êèê‰æõ‰∫Ü <code>toggleColor</code> ÊñπÊ≥ïÁî®‰∫éÊºîÁ§∫È¢úËâ≤ÂàáÊç¢ÔºàÊääÊ†áÁ≠æÊñáÂ≠óÂú®Á∫¢Ëâ≤ÂíåÈªëËâ≤‰πãÈó¥ÂàáÊç¢Ôºâ„ÄÇ</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> javax.swing.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.</span><span style="color:#FD971F;">*</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * JFrame ËßÜÂõæÁöÑÂÖ∑‰ΩìÂÆûÁé∞</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">IView</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JLabel</span><span style="color:#F8F8F2;"> display;       </span><span style="color:#88846F;">// Áî®‰∫éÊòæÁ§∫ÊñáÊú¨</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JTextField</span><span style="color:#F8F8F2;"> input;     </span><span style="color:#88846F;">// Áî®Êà∑ËæìÂÖ•ÁöÑÊñáÊú¨Ê°Ü</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> echoButton;   </span><span style="color:#88846F;">// Echo ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> JButton</span><span style="color:#F8F8F2;"> exitButton;   </span><span style="color:#88846F;">// Exit ÊåâÈíÆ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // ‰∏∫‰∫ÜÊºîÁ§∫ toggleColorÔºåËÆ∞ÂΩïÂΩìÂâçÊòØÂê¶‰∏∫Á∫¢Ëâ≤</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> boolean</span><span style="color:#F8F8F2;"> isRed </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setLayout</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> FlowLayout</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Ê†áÁ≠æ</span></span>
<span class="line"><span style="color:#F8F8F2;">    display </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JLabel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ÂàùÂßãÁä∂ÊÄÅ&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(display);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÊñáÊú¨ËæìÂÖ•Ê°Ü</span></span>
<span class="line"><span style="color:#F8F8F2;">    input </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JTextField</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Echo ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Echo Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(echoButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Exit ÊåâÈíÆ</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JButton</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">setActionCommand</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Exit Button&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(exitButton);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ËÆæÁΩÆÁ™óÂè£Â§ßÂ∞è„ÄÅÈªòËÆ§ÂÖ≥Èó≠Êìç‰ΩúÁ≠â</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">pack</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setDefaultCloseOperation</span><span style="color:#F8F8F2;">(JFrame.EXIT_ON_CLOSE);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#A6E22E;"> getInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> input.</span><span style="color:#A6E22E;">getText</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> clearInputString</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    input.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setEchoOutput</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> s</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    display.</span><span style="color:#A6E22E;">setText</span><span style="color:#F8F8F2;">(s);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> display</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setVisible</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionListener</span><span style="color:#FD971F;font-style:italic;"> listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    echoButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">    exitButton.</span><span style="color:#A6E22E;">addActionListener</span><span style="color:#F8F8F2;">(listener);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> addKeyListener</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyListener</span><span style="color:#FD971F;font-style:italic;"> kbd</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // ÂøÖÈ°ªÂÖàËÆ©ÂΩìÂâçÁªÑ‰ª∂ÂèØ‰ª•ËÅöÁÑ¶Âπ∂ËØ∑Ê±ÇÁÑ¶ÁÇπÔºåÂê¶ÂàôÊó†Ê≥ïÊé•Êî∂ÈîÆÁõò‰∫ã‰ª∂</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setFocusable</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">requestFocus</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(kbd);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> toggleColor</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (isRed) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      display.</span><span style="color:#A6E22E;">setForeground</span><span style="color:#F8F8F2;">(Color.BLACK);</span></span>
<span class="line"><span style="color:#F8F8F2;">    } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      display.</span><span style="color:#A6E22E;">setForeground</span><span style="color:#F8F8F2;">(Color.RED);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    isRed </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> !</span><span style="color:#F8F8F2;">isRed;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-18" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">KeyboardHandler.java</div><!--[--><p>ÈÄöËøá <code>Map</code> Â∞ÜÈîÆÁõò‰∫ã‰ª∂‰∏éÁõ∏Â∫îÁöÑÈÄªËæëÔºà<code>Runnable</code>) Êò†Â∞ÑËµ∑Êù•ÔºåÈÅøÂÖçÂú® <code>keyPressed / keyReleased / keyTyped</code> ‰∏≠ÂÜôÂ§ßÈáè <code>if</code> / <code>switch</code> ËØ≠Âè•„ÄÇ</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.HashMap</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.Map</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÈîÆÁõòÁõëÂê¨Âô®ÔºåÂèØ‰ª•ÈÄöËøá Map ÈÖçÁΩÆÂêÑ‰∏™ÊåâÈîÆÂØπÂ∫îÁöÑÂä®‰Ωú</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">KeyboardHandler</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">KeyListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">  // keyTyped Áî® char ÂÅö key</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Character</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; keyTypedMap </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#88846F;">  // keyPressed/keyReleased Áî® int ÂÅö key</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; keyPressedMap </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; keyReleasedMap </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setKeyTypedMap</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Character</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#FD971F;font-style:italic;">map</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.keyTypedMap </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> map;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setKeyPressedMap</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#FD971F;font-style:italic;">map</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.keyPressedMap </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> map;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> setKeyReleasedMap</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#FD971F;font-style:italic;">map</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.keyReleasedMap </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> map;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyTyped</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    char</span><span style="color:#F8F8F2;"> c </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> e.</span><span style="color:#A6E22E;">getKeyChar</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (keyTypedMap.</span><span style="color:#A6E22E;">containsKey</span><span style="color:#F8F8F2;">(c)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      keyTypedMap.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(c).</span><span style="color:#A6E22E;">run</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyPressed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    int</span><span style="color:#F8F8F2;"> code </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> e.</span><span style="color:#A6E22E;">getKeyCode</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (keyPressedMap.</span><span style="color:#A6E22E;">containsKey</span><span style="color:#F8F8F2;">(code)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      keyPressedMap.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(code).</span><span style="color:#A6E22E;">run</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> keyReleased</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">KeyEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    int</span><span style="color:#F8F8F2;"> code </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> e.</span><span style="color:#A6E22E;">getKeyCode</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (keyReleasedMap.</span><span style="color:#A6E22E;">containsKey</span><span style="color:#F8F8F2;">(code)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      keyReleasedMap.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(code).</span><span style="color:#A6E22E;">run</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-19" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Controller.java</div><!--[--><ol><li><p>ÁªßÊâø/ÂÆûÁé∞ <code>ActionListener</code> Áî®‰∫éÂ§ÑÁêÜÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂„ÄÇ</p></li><li><p>‰ΩøÁî® <code>KeyboardHandler</code> Êù•ÁÆ°ÁêÜÈîÆÁõò‰∫ã‰ª∂Êò†Â∞Ñ„ÄÇ</p></li><li><p>Â∞ÜËæìÂÖ•Ê°ÜÂÜÖÂÆπËÆæÁΩÆÂà∞ <code>model</code> ÊàñËÆ© <code>view</code> ÊâßË°åÂØπÂ∫îÊìç‰Ωú„ÄÇ</p></li></ol><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.ActionListener</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.awt.event.KeyEvent</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.HashMap</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.Map</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * Controller Ë¥üË¥£ËøûÊé• Model Âíå ViewÔºåÂ§ÑÁêÜÁî®Êà∑‰∫§‰∫í</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Controller</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IModel</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#F92672;"> final</span><span style="color:#66D9EF;font-style:italic;"> IView</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // ÊûÑÈÄ†Êó∂Ê≥®ÂÖ• model Âíå view</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> model</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IView</span><span style="color:#FD971F;font-style:italic;"> view</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> view;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÂëäËØâ ViewÔºöÊåâÈíÆ‰∫ã‰ª∂‰∫§ÁªôÂΩìÂâç Controller Êù•Â§ÑÁêÜ</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">setListener</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÈÖçÁΩÆÈîÆÁõò‰∫ã‰ª∂</span></span>
<span class="line"><span style="color:#A6E22E;">    configureKeyboard</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÊúÄÂêéÊòæÁ§∫ËßÜÂõæ</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">display</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  /**</span></span>
<span class="line"><span style="color:#88846F;">   * ‰∏∫ÈîÆÁõò‰∫ã‰ª∂ÈÖçÁΩÆÂØπÂ∫îÁöÑ Runnable Âä®‰Ωú</span></span>
<span class="line"><span style="color:#88846F;">   */</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> configureKeyboard</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#88846F;">    // ÂàõÂª∫Âπ∂ÈÖçÁΩÆ KeyboardHandler</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    KeyboardHandler</span><span style="color:#F8F8F2;"> kbd </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> KeyboardHandler</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // 1) keyTyped Êò†Â∞ÑÔºàcharÔºâ</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Character</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; typedMap </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#88846F;">    // ÂΩìÁî®Êà∑ËæìÂÖ• &#39;r&#39; Â≠óÁ¨¶Êó∂ÔºåÂàáÊç¢È¢úËâ≤</span></span>
<span class="line"><span style="color:#F8F8F2;">    typedMap.</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">-&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">toggleColor</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // 2) keyPressed Êò†Â∞ÑÔºàintÔºâ</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; pressedMap </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#88846F;">    // ÂΩìÊåâ‰∏ã C Êó∂ÔºåÂ∞ÜÊ®°Âûã‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ËΩ¨‰∏∫Â§ßÂÜôÊòæÁ§∫</span></span>
<span class="line"><span style="color:#F8F8F2;">    pressedMap.</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyEvent.VK_C, () </span><span style="color:#66D9EF;font-style:italic;">-&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text.</span><span style="color:#A6E22E;">toUpperCase</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // 3) keyReleased Êò†Â∞ÑÔºàintÔºâ</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Integer</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Runnable</span><span style="color:#F8F8F2;">&gt; releasedMap </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> HashMap</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#88846F;">    // ÂΩìÊùæÂºÄ C Êó∂ÔºåÊÅ¢Â§çÂéüÂßãÂ§ßÂ∞èÂÜô</span></span>
<span class="line"><span style="color:#F8F8F2;">    releasedMap.</span><span style="color:#A6E22E;">put</span><span style="color:#F8F8F2;">(KeyEvent.VK_C, () </span><span style="color:#66D9EF;font-style:italic;">-&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      String</span><span style="color:#F8F8F2;"> text </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(text);</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Â∞ÜËøô‰∏âÁ±ªÊò†Â∞Ñ‰º†Áªô KeyboardHandler</span></span>
<span class="line"><span style="color:#F8F8F2;">    kbd.</span><span style="color:#A6E22E;">setKeyTypedMap</span><span style="color:#F8F8F2;">(typedMap);</span></span>
<span class="line"><span style="color:#F8F8F2;">    kbd.</span><span style="color:#A6E22E;">setKeyPressedMap</span><span style="color:#F8F8F2;">(pressedMap);</span></span>
<span class="line"><span style="color:#F8F8F2;">    kbd.</span><span style="color:#A6E22E;">setKeyReleasedMap</span><span style="color:#F8F8F2;">(releasedMap);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Â∞ÜËøô‰∏™ KeyboardHandler Ê≥®ÂÜåÂà∞ view</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.view.</span><span style="color:#A6E22E;">addKeyListener</span><span style="color:#F8F8F2;">(kbd);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> actionPerformed</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">ActionEvent</span><span style="color:#FD971F;font-style:italic;"> e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    switch</span><span style="color:#F8F8F2;"> (e.</span><span style="color:#A6E22E;">getActionCommand</span><span style="color:#F8F8F2;">()) {</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Echo Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#88846F;">        // Â∞ÜËæìÂÖ•Ê°ÜÂÜÖÂÆπÂÜôÂÖ• ModelÔºåÂπ∂ËÆ© View ÊòæÁ§∫</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        String</span><span style="color:#F8F8F2;"> input </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> view.</span><span style="color:#A6E22E;">getInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        model.</span><span style="color:#A6E22E;">setString</span><span style="color:#F8F8F2;">(input);</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">setEchoOutput</span><span style="color:#F8F8F2;">(model.</span><span style="color:#A6E22E;">getString</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#88846F;">        // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü</span></span>
<span class="line"><span style="color:#F8F8F2;">        view.</span><span style="color:#A6E22E;">clearInputString</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">      case</span><span style="color:#E6DB74;"> &quot;Exit Button&quot;</span><span style="color:#F92672;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.</span><span style="color:#A6E22E;">exit</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">        break</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">      default:</span></span>
<span class="line"><span style="color:#88846F;">        // Êú™ËØÜÂà´ÁöÑÂëΩ‰ª§Ôºå‰∏çÂÅöÂ§ÑÁêÜ</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-tab" id="v-20" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">MainStage8.java</div><!--[--><p>ÊúÄÂêéÊòØ‰∏Ä‰∏™ÊºîÁ§∫Áî®ÁöÑ <code>main</code> ÂáΩÊï∞ÔºåÂàõÂª∫ <code>Model</code>, <code>View</code>, <code>Controller</code>ÔºåÂπ∂ËøêË°åÁ®ãÂ∫è„ÄÇ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">MainStage8</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IModel</span><span style="color:#F8F8F2;"> model </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Model</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    IView</span><span style="color:#F8F8F2;"> view </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Stage 8 Demo (Keyboard Maps)&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // ÂàõÂª∫ ControllerÔºåÂç≥ÂèØËá™Âä®ÈÖçÁΩÆÂ•ΩÈîÆÁõò„ÄÅÊåâÈíÆÁ≠âÈÄªËæëÔºåÂπ∂ÊòæÁ§∫Á™óÂè£</span></span>
<span class="line"><span style="color:#F92672;">    new</span><span style="color:#A6E22E;"> Controller</span><span style="color:#F8F8F2;">(model, view);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    // Á®ãÂ∫èÂ∞Ü‰øùÊåÅËøêË°åÔºåÁõ¥Âà∞Áî®Êà∑ÁÇπÂáª &quot;Exit&quot; ÊåâÈíÆÊàñÊâãÂä®ÂÖ≥Èó≠Á™óÂè£</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><!--]--></div><h2 id="question-1" tabindex="-1"><a class="header-anchor" href="#question-1"><span>Question 1</span></a></h2><p>Âú®ËøôÊÆµ‰ª£Á†Å‰∏≠Ôºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">JFrameView</span><span style="color:#F92672;"> extends</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">JFrame</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">ActionListener</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#A6E22E;"> JFrameView</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> caption</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">IModel</span><span style="color:#FD971F;font-style:italic;"> model</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    super</span><span style="color:#F8F8F2;">(caption);               </span><span style="color:#88846F;">// ‚ë†</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.model </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> model;           </span><span style="color:#88846F;">// ‚ë°</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">setLayout</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#A6E22E;"> FlowLayout</span><span style="color:#F8F8F2;">()); </span><span style="color:#88846F;">// ‚ë¢</span></span>
<span class="line"><span style="color:#F8F8F2;">    ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong><code>super(caption);</code></strong> Ë∞ÉÁî®ÁöÑÊòØ <strong>Áà∂Á±ªÊûÑÈÄ†ÂáΩÊï∞</strong>„ÄÇ</li><li>ËøôÈáåÁöÑÁà∂Á±ªÂ∞±ÊòØ <strong><code>javax.swing.JFrame</code></strong>„ÄÇ</li><li><code>JFrameView extends JFrame</code> Ë°®Á§∫ <code>JFrameView</code> ÁªßÊâø‰∫Ü <code>JFrame</code>ÔºåÂõ†Ê≠§ÂèØ‰ª•Ë∞ÉÁî® <code>super(caption)</code> Êù•ÊâßË°å <code>JFrame</code> ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºà<code>JFrame(String title)</code>Ôºâ„ÄÇ</li><li><code>this.setLayout(...)</code> ‰πüÊòØ‰ªéÁà∂Á±ªÔºà‰ª•ÂèäÂÖ∂Áà∂Á±ªÈìæÔºö<code>Container</code>ÔºâÁªßÊâøËÄåÊù•Ôºå<code>JFrame</code> ÁªßÊâø‰∫Ü AWT/Swing Ê°ÜÊû∂‰∏≠‰∏ÄÁ≥ªÂàóÁ±ªÔºà<code>Frame</code> ‚Üí <code>Window</code> ‚Üí <code>Container</code> ‚Üí <code>Component</code> Á≠âÔºâÔºåÊâÄ‰ª•ËÉΩÂ§üÁõ¥Êé•Ë∞ÉÁî® <code>setLayout(...)</code>„ÄÇ</li></ul><h3 id="ÁªßÊâøÂÖ≥Á≥ªÁ§∫ÊÑè" tabindex="-1"><a class="header-anchor" href="#ÁªßÊâøÂÖ≥Á≥ªÁ§∫ÊÑè"><span>ÁªßÊâøÂÖ≥Á≥ªÁ§∫ÊÑè</span></a></h3><p>Âú® Java Swing Â±ÇÊ¨°ÁªìÊûÑ‰∏≠Ôºå<code>JFrame</code> ÁªßÊâøËá™ <code>Frame</code>ÔºåÁÑ∂Âêé‰∏ÄÁõ¥ÂæÄ‰∏äÂèØ‰ª•ËøΩÊ∫ØÂà∞ <code>Window</code>„ÄÅ<code>Container</code>„ÄÅ<code>Component</code> Á≠âÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#66D9EF;font-style:italic;">Object</span></span>
<span class="line"><span style="color:#F8F8F2;">  ‚îî‚îÄ </span><span style="color:#66D9EF;font-style:italic;">Component</span></span>
<span class="line"><span style="color:#F8F8F2;">       ‚îî‚îÄ </span><span style="color:#66D9EF;font-style:italic;">Container</span></span>
<span class="line"><span style="color:#F8F8F2;">            ‚îî‚îÄ </span><span style="color:#66D9EF;font-style:italic;">Window</span></span>
<span class="line"><span style="color:#F8F8F2;">                 ‚îî‚îÄ </span><span style="color:#66D9EF;font-style:italic;">Frame</span></span>
<span class="line"><span style="color:#F8F8F2;">                      ‚îî‚îÄ </span><span style="color:#66D9EF;font-style:italic;">JFrame</span></span>
<span class="line"><span style="color:#F8F8F2;">                           ‚îî‚îÄ </span><span style="color:#A6E22E;">JFrameView</span><span style="color:#F8F8F2;"> (Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑÁ±ª)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong><code>JFrameView</code></strong> ÊòØÊàë‰ª¨ÂÆö‰πâÁöÑÁ±ªÔºåÁªßÊâøËá™ <strong><code>JFrame</code></strong>Ôºõ</li><li><strong><code>JFrame</code></strong> Âú®ÂÖ∂ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÂÖÅËÆ∏‰º†ÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºàÁ™óÂè£Ê†áÈ¢ò <code>caption</code>ÔºâÔºå‰πüÂ∞±ÊòØ <code>super(caption)</code> Ë∞ÉÁî®ÁöÑÈÇ£‰∏™ÊûÑÈÄ†Ôºõ</li><li><strong><code>setLayout(...)</code></strong> ÊòØ <code>Container</code> Á±ªÊèê‰æõÁöÑÊñπÊ≥ïÔºå<code>JFrame</code> ÈÄöËøáÁªßÊâøÈìæÂ∞ÜÂÖ∂Êö¥Èú≤Âá∫Êù•ÔºåÂõ†Ê≠§Âú® <code>JFrameView</code> Èáå‰πüËÉΩ‰ΩøÁî®„ÄÇ</li></ul><p>Âõ†Ê≠§ÔºåËøô‰∏âË°å‰ª£Á†ÅÂàÜÂà´‰ª£Ë°®ÁùÄÔºö</p><ol><li><code>super(caption)</code>ÔºöË∞ÉÁî®Áà∂Á±ª <code>JFrame</code> ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÁªôÁ™óÂè£ËÆæÁΩÆÊ†áÈ¢ò„ÄÇ</li><li><code>this.model = model</code>ÔºöÂ∞ÜÊûÑÈÄ†ÂáΩÊï∞Èáå‰º†ËøõÊù•ÁöÑ <code>model</code> ÂèÇÊï∞ËµãÁªôÂΩìÂâçÂØπË±°ÁöÑ <code>model</code> Â≠óÊÆµ„ÄÇ</li><li><code>this.setLayout(new FlowLayout())</code>ÔºöÂØπËøô‰∏™ <code>JFrame</code> Á™óÂè£‰ΩøÁî® <strong>ÊµÅÂºèÂ∏ÉÂ±ÄÔºàFlowLayoutÔºâ</strong>„ÄÇËØ•ÊñπÊ≥ïÊù•Ëá™Á•ñÂÖàÁ±ª <code>Container</code>„ÄÇ</li></ol><details class="hint-container details"><summary>ÂÖ¨‰ºóÂè∑ÔºöAIÊÇ¶Âàõ„Äê‰∫åÁª¥Á†Å„Äë</summary><figure><img src="/gzh.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></details><div class="hint-container info"><p class="hint-container-title">AIÊÇ¶Âàõ¬∑ÁºñÁ®ã‰∏ÄÂØπ‰∏Ä</p><p>AIÊÇ¶Âàõ¬∑Êé®Âá∫ËæÖÂØºÁè≠Âï¶ÔºåÂåÖÊã¨„ÄåPython ËØ≠Ë®ÄËæÖÂØºÁè≠„ÄÅC++ ËæÖÂØºÁè≠„ÄÅjava ËæÖÂØºÁè≠„ÄÅÁÆóÊ≥ï/Êï∞ÊçÆÁªìÊûÑËæÖÂØºÁè≠„ÄÅÂ∞ëÂÑøÁºñÁ®ã„ÄÅpygame Ê∏∏ÊàèÂºÄÂèë„ÄÅWeb„ÄÅLinux„ÄçÔºåÂÖ®ÈÉ®ÈÉΩÊòØ‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶Ôºö‰∏ÄÂØπ‰∏ÄËæÖÂØº + ‰∏ÄÂØπ‰∏ÄÁ≠îÁñë + Â∏ÉÁΩÆ‰Ωú‰∏ö + È°πÁõÆÂÆûË∑µÁ≠â„ÄÇÂΩìÁÑ∂ÔºåËøòÊúâÁ∫ø‰∏ãÁ∫ø‰∏äÊëÑÂΩ±ËØæÁ®ã„ÄÅPhotoshop„ÄÅPremiere ‰∏ÄÂØπ‰∏ÄÊïôÂ≠¶„ÄÅQQ„ÄÅÂæÆ‰ø°Âú®Á∫øÔºåÈöèÊó∂ÂìçÂ∫îÔºÅÂæÆ‰ø°ÔºöJiabcdefh</p><p>C++ ‰ø°ÊÅØÂ••ËµõÈ¢òËß£ÔºåÈïøÊúüÊõ¥Êñ∞ÔºÅÈïøÊúüÊãõÊî∂‰∏ÄÂØπ‰∏Ä‰∏≠Â∞èÂ≠¶‰ø°ÊÅØÂ••ËµõÈõÜËÆ≠ÔºåËéÜÁî∞„ÄÅÂé¶Èó®Âú∞Âå∫ÊúâÊú∫‰ºöÁ∫ø‰∏ã‰∏äÈó®ÔºåÂÖ∂‰ªñÂú∞Âå∫Á∫ø‰∏ä„ÄÇÂæÆ‰ø°ÔºöJiabcdefh</p><p>ÊñπÊ≥ï‰∏ÄÔºö<a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1432803776&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener noreferrer">QQ</a></p><p>ÊñπÊ≥ï‰∫åÔºöÂæÆ‰ø°ÔºöJiabcdefh</p></div><figure><img src="/zsxq.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ÊúÄËøëÊõ¥Êñ∞</span><time class="vp-meta-info" datetime="2025-07-04T03:57:54.000Z" data-allow-mismatch>2025/7/4 03:57</time></div><div class="contributors"><span class="vp-meta-label">Ë¥°ÁåÆËÄÖ: </span><!--[--><!--[--><span class="vp-meta-info" title="email: bornforthis@bornforthis.cn">AndersonHJB</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Copyright ¬© 2018-2024 ÈïøÊúüÊãõÊî∂ÁºñÁ®ã‰∏ÄÂØπ‰∏ÄÂ≠¶Âëò!ÂæÆ‰ø°:Jiabcdefh</div><div class="vp-copyright">Copyright ¬© 2025 AIÊÇ¶Âàõ </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-VQgfo9Ry.js" defer></script>
  </body>
</html>
