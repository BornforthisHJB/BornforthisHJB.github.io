<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.93" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Lecture 14 The Observer Pattern","image":["https://bornforthis.cn/gzh.jpg","https://bornforthis.cn/zsxq.jpg"],"datePublished":"2025-03-12T07:05:47.000Z","dateModified":"2025-07-04T03:57:54.000Z","author":[{"@type":"Person","name":"AIæ‚¦åˆ›"}]}</script><meta property="og:url" content="https://bornforthis.cn/1v1/MenJiaQi/Lecture14-The-Observer-Pattern.html"><meta property="og:site_name" content="AIæ‚¦åˆ›-Pythonä¸€å¯¹ä¸€è¾…å¯¼"><meta property="og:title" content="Lecture 14 The Observer Pattern"><meta property="og:description" content="In the last lecture we introduced the idea of a â€œFeatures interfaceâ€ that described a way to isolate the controller from the low-level Swing components inside the view, and simu..."><meta property="og:type" content="article"><meta property="og:image" content="https://bornforthis.cn/gzh.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-07-04T03:57:54.000Z"><meta property="article:author" content="AIæ‚¦åˆ›"><meta property="article:published_time" content="2025-03-12T07:05:47.000Z"><meta property="article:modified_time" content="2025-07-04T03:57:54.000Z"><link rel="shortcut icon" href="/aiyc.svg"><meta name="keywords" content="ä¸€å¯¹ä¸€è¾…å¯¼ç¼–ç¨‹,ç¼–ç¨‹1v1,CSè¾…å¯¼,ç¼–ç¨‹ä¸€å¯¹ä¸€è¾…å¯¼,å°‘å„¿ç¼–ç¨‹ä¸€å¯¹ä¸€,Python 1v1,AIæ‚¦åˆ›,ä¸€å¯¹ä¸€,èœé¸Ÿæ•™ç¨‹,Python,ç¼–ç¨‹ä¸€å¯¹ä¸€,C++,Java,AI,äººå·¥æ™ºèƒ½,é»„å®¶å®,Pythonä¸€å¯¹ä¸€æ•™å­¦,Pythonè¾…å¯¼,ç•™å­¦ç”ŸCSè¾…å¯¼,ChatGPTä»£æ³¨å†Œ"><meta name="description" content="Pythonä¸€å¯¹ä¸€è¾…å¯¼,ç¼–ç¨‹1v1,Javaä¸€å¯¹ä¸€è¾…å¯¼,ä¸€å¯¹ä¸€æ•™å­¦è¾…å¯¼,CSè¾…å¯¼,é¢è¯•è¾…å¯¼,çˆ¬è™«ä¸€å¯¹ä¸€æ•™å­¦,èœé¸Ÿæ•™ç¨‹,ç¼–ç¨‹ä¸€å¯¹ä¸€æ•™å­¦,å°‘å„¿ç¼–ç¨‹ä¸€å¯¹ä¸€,äººå·¥æ™ºèƒ½,é»„å®¶å®,å…¨ç½‘3000+å­¦å‘˜,å€¼å¾—ä¿¡èµ–,Pythonä¸€å¯¹ä¸€æ•™å­¦,Javaä¸€å¯¹ä¸€æ•™å­¦,ç•™å­¦ç”ŸCSè¾…å¯¼,ChatGPTä»£æ³¨å†Œ"><title>Lecture 14 The Observer Pattern | AIæ‚¦åˆ›-Pythonä¸€å¯¹ä¸€è¾…å¯¼</title>
    <link rel="preload" href="/assets/style-CknMNbnY.css" as="style"><link rel="stylesheet" href="/assets/style-CknMNbnY.css">
    <link rel="modulepreload" href="/assets/app-BgxfbuhL.js"><link rel="modulepreload" href="/assets/Lecture14-The-Observer-Pattern.html-CMBBdzla.js"><link rel="modulepreload" href="/assets/gzh-DnOBNg6W.js"><link rel="modulepreload" href="/assets/zsxq-BcdwOI-_.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container no-sidebar external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/aiyc.svg" alt><!----><span class="vp-site-name hide-in-pad">AIæ‚¦åˆ›-Pythonä¸€å¯¹ä¸€è¾…å¯¼</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="é»„å®¶å®"><!--[--><i class="vp-icon iconfont icon-home" sizing="height"></i><!--]-->é»„å®¶å®<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/R-Course/" aria-label="R-Course"><!--[--><i class="vp-icon iconfont icon-cib-r" sizing="height"></i><!--]-->R-Course<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Python/" aria-label="Python"><!--[--><i class="vp-icon iconfont icon-python" sizing="height"></i><!--]-->Python<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Java/" aria-label="Java"><!--[--><i class="vp-icon iconfont icon-java" sizing="height"></i><!--]-->Java<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/1v1/" aria-label="1v1"><!--[--><i class="vp-icon iconfont icon-idea" sizing="height"></i><!--]-->1v1<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/AndersonHJB" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-blog" sizing="height"></i>Lecture 14 The Observer Pattern</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">AIæ‚¦åˆ›</span></span><span property="author" content="AIæ‚¦åˆ›"></span></span><span class="page-original-info">åŸåˆ›</span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025/3/12</span><meta property="datePublished" content="2025-03-12T07:05:47.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/1v1/MenJiaQi/Lecture14-The-Observer-Pattern.html" data-page-key="/1v1/MenJiaQi/Lecture14-The-Observer-Pattern.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 18 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT18M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><p>In the <a href="https://course.ccs.neu.edu/cs3500/lec_gui_basics_notes.html" target="_blank" rel="noopener noreferrer">last lecture</a> we introduced the idea of a â€œ<code>Features</code> interfaceâ€ that described a way to</p><ul><li>isolate the controller from the low-level Swing components inside the view, and</li><li>simultaneously, allow the view to have multiple UI components trigger the same logical callback on the controller.</li></ul><p>We called these â€œhigh-level eventsâ€, since they were application-specific events as opposed to â€œlow-levelâ€ general-purpose events. This idea of defining our own application-specific events is a very common one, and generalizes the <code>Features</code> interface idea into something known as the Observer Patern.</p><h2 id="_1-motivating-example-buying-concert-tickets" tabindex="-1"><a class="header-anchor" href="#_1-motivating-example-buying-concert-tickets"><span>1. Motivating example: buying concert tickets</span></a></h2><p>Suppose you are interested in getting tickets for a popular upcoming concert. You know that tickets will sell out quickly, and you donâ€™t want to miss your opportunity. So you signup for the mailing list for the ticket service, and wait for an email telling you that tickets are now available. Of course, mailing lists being what they are, youâ€™ll probably get a bunch of unwanted messages telling you about uninteresting concerts as well, so you need to read the emails to check which concert has just gone on sale.</p><p>Letâ€™s try to represent this in code.</p><h2 id="_2-setting-the-stage" tabindex="-1"><a class="header-anchor" href="#_2-setting-the-stage"><span>2. Setting the stage</span></a></h2><p>Letâ€™s assume we have a <code>class TicketSeller</code> that handles ticket sales for lots of concerts, and a <code>class Person</code> to represent you or other people interested in concerts. (To keep things simple, weâ€™ll just assume each concert has a unique name that weâ€™ll represent as a <code>String</code>; in practice, the data here might be more interesting, but itâ€™ll obscure the pattern weâ€™re looking for here.)</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketSeller</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  Ticket</span><span style="color:#A6E22E;"> purchaseTicketFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) { ... sell a ticket ... }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Person</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> tryToBuyTicketFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    ???</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If a concert is sold out or not even available yet, then <code>TicketSeller#purchaseTicketFor</code> will fail, so our goal is to call that method as soon as possible, but no sooner. So in <code>Person#tryToBuyTicketsFor</code>, we canâ€™t immediately call that method. Instead, we need to â€œsign up for the mailing listâ€ somehow.</p><p>To do that, letâ€™s define an interface</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is the analogue of the <code>Features</code> interface from last lecture. With <code>Features</code>, our controller was interested in being called back, so it registered with the view, and the view called its methods when appropriate. Here, our <code>TicketSeller</code> will call the <code>ticketsAvailableFor</code> method on any objects that have signed up for such notifications, and our <code>Person</code> objects will implement that interface and sign up for the notifications.</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Person</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TicketSeller</span><span style="color:#FD971F;font-style:italic;"> seller</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    seller.</span><span style="color:#A6E22E;">signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">    // the seller will call us back when concerts become available</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketSeller</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> signUpforNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#FD971F;font-style:italic;"> obs</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    ???</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>Now we just have to connect the last few pieces. The <code>TicketSeller</code> will need to maintain a â€œmailing listâ€ of everyone whoâ€™s signed up to be notified. And whenever a new concert is announced, it should broadcast that announcement to everyone whoâ€™s signed up:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketSeller</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  List</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;">&gt; subscriers </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> ArrayList</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#FD971F;font-style:italic;"> sub</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.subscribers.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(sub);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> name</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> sub </span><span style="color:#F92672;">:</span><span style="color:#FD971F;"> this</span><span style="color:#F8F8F2;">.subscribers) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      sub.</span><span style="color:#A6E22E;">ticketsAvailableFor</span><span style="color:#F8F8F2;">(name);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, we can complete the <code>Person</code> implementation. Notice that theyâ€™ll get notified for <em>all</em> concerts, so they need to keep track of the one concert theyâ€™re interested in:</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Person</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  String</span><span style="color:#F8F8F2;"> interestedInConcert;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  TicketSeller</span><span style="color:#F8F8F2;"> seller;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TicketSeller</span><span style="color:#FD971F;font-style:italic;"> seller</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.interestedInConcert </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> concertName;</span></span>
<span class="line"><span style="color:#FD971F;">    this</span><span style="color:#F8F8F2;">.seller </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> seller;</span></span>
<span class="line"><span style="color:#F8F8F2;">    seller.</span><span style="color:#A6E22E;">signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> (concertName.</span><span style="color:#A6E22E;">equals</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.interestedInConcert)) {</span></span>
<span class="line"><span style="color:#88846F;">      // Hooray, tickets are available for the concert we&#39;re interested in</span></span>
<span class="line"><span style="color:#F8F8F2;">      seller.</span><span style="color:#A6E22E;">purchaseTicketFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>Notice the similarities to <code>ActionListener</code>s: the <code>Person</code> gets called back with the name of what event has occurred, and can choose what to do about it based on that information. Notice also the differences: the callback here is talking about <em>concerts</em>, which is clearly a very application-specific sort of event.</p><h2 id="_3-enhancements-and-subtleties" tabindex="-1"><a class="header-anchor" href="#_3-enhancements-and-subtleties"><span>3. Enhancements and subtleties</span></a></h2><p>The names <code>TicketSeller</code>, <code>signUpForNotifications</code>, <code>TicketNotificationSubscriber</code> and <code>ticketsAvailableFor</code> are whimsical and application-specific, but they illustrate an important point: this pattern applies to high-level events just as well as to low-level events. Regardless of the name, the Observer Pattern describes this common scenario, of multiple entities that are interested in messages being sent by some common source. There can be many observers for a single message-sender, and a single observer might be interested in many message-senders.</p><p>The general names for this pattern look as follows:</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Subject</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  List</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">Observer</span><span style="color:#F8F8F2;">&gt; observers;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> addObserver</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Observer</span><span style="color:#FD971F;font-style:italic;"> obs</span><span style="color:#F8F8F2;">) { observers.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(obs); }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">  // This method gets called by other methods in the Subject class as needed</span></span>
<span class="line"><span style="color:#F92672;">  private</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> notifyAllSomethingHappened</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">Observer</span><span style="color:#F8F8F2;"> obs </span><span style="color:#F92672;">:</span><span style="color:#FD971F;"> this</span><span style="color:#F8F8F2;">.observers) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      obs.</span><span style="color:#A6E22E;">somethingHappened</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Observer</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> somethingHappend</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">SomeObserver</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">Observer</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  void</span><span style="color:#A6E22E;"> somethingHappened</span><span style="color:#F8F8F2;">() { ... }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// somewhere in the code</span></span>
<span class="line"><span style="color:#F8F8F2;">someSubject.</span><span style="color:#A6E22E;">addObserver</span><span style="color:#F8F8F2;">(someObserver);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><ul><li>We might want to enhance the <code>Subject</code> class to allow <em>unsubscribing</em> from notifications, via a <code>removeObserver</code> method.</li><li>We might want to send more information along in the <code>somethingHappened</code> method, including which <code>Subject</code> sent the notification, or what the notification is about.</li><li>Currently, each <code>Person</code> gets notified for <em>all</em> concerts, leading to a lot of spammy messages. We might want to enhance the <code>addObserver</code> method to specify what notifications weâ€™re interested in, and allow the <code>TicketSeller</code> to only send the notifications we care about. In general, we might want the <code>Subject</code> class to maintain a mapping from specific topics to the observers interested in just those topics, and only <code>somethingHappened()</code> the observers that care about that topic. This leads to a more complex <code>Subject</code> implementation, but a <em>possibly</em> more-efficient system overall.</li><li>Our current <code>Observer</code> interface has only a single method in it. But as we saw with <code>Features</code>, there could easily be multiple application-specific notifications we might want to send.</li><li>Thinking about the <code>TicketSeller</code> again, if it sends out a notification for each individual concert, then the amount of spam depends on how many concerts there are. We might instead want to group together several updates into a single <em>batch notification</em> (for example, configuring Piazza to notify you for each individual post, vs notifying you once every few hours with a batch of posts at once).</li></ul><p>The Observer pattern is a general-purpose event handling mechanism, and hopefully itâ€™s clear that its utility generalizes beyond just handling UI events.</p><h2 id="_1-è§‚å¯Ÿè€…æ¨¡å¼è¦è§£å†³ä»€ä¹ˆé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-è§‚å¯Ÿè€…æ¨¡å¼è¦è§£å†³ä»€ä¹ˆé—®é¢˜"><span>1. è§‚å¯Ÿè€…æ¨¡å¼è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span></a></h2><p>åœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éƒ½æœ‰è¿™æ ·ä¸€ç§éœ€æ±‚ï¼š<strong>å½“æŸä¸ªå¯¹è±¡ï¼ˆé€šå¸¸ç§°ä¸ºâ€œä¸»é¢˜â€Subjectï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¸Œæœ›èƒ½å¤ŸåŠæ—¶é€šçŸ¥å…¶ä»–å¯¹è¿™ä¸ªå˜åŒ–æ„Ÿå…´è¶£çš„å¯¹è±¡ï¼ˆé€šå¸¸ç§°ä¸ºâ€œè§‚å¯Ÿè€…â€Observerï¼‰</strong></p><p>ä¾‹å¦‚ï¼šæ–‡ä¸­â€œæ¼”å”±ä¼šè®¢ç¥¨â€ä¾‹å­é‡Œï¼Œ<code>TicketSeller</code> å°±å¥½æ¯”æ˜¯â€œä¸»é¢˜â€ï¼Œæœ‰æ–°æ¼”å”±ä¼šé—¨ç¥¨å¼€å§‹å‘å”®ï¼ˆâ€œäº‹ä»¶â€ï¼‰æ—¶ï¼Œéœ€è¦é€šçŸ¥æ‰€æœ‰â€œè®¢é˜…â€å®ƒçš„äººï¼ˆâ€œè§‚å¯Ÿè€…â€ï¼‰ï¼Œè®©ä»–ä»¬èµ¶ç´§æ¥ä¹°ç¥¨ã€‚</p><p>è¿™ä¸ªæ¨¡å¼ä¹Ÿå¸¸å‡ºç°åœ¨ GUI å¼€å‘ä¸­ï¼ŒSwing æˆ–å…¶ä»–å›¾å½¢åº“ä¸­éƒ½æœ‰ç±»ä¼¼çš„äº‹ä»¶ç›‘å¬å™¨æ¦‚å¿µï¼šä¸€ä¸ªæŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œå°±é€šçŸ¥æ‰€æœ‰ç›‘å¬è¿™ä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶çš„è§‚å¯Ÿè€…ã€‚</p><p><strong>å…³é”®ç‚¹ï¼š</strong></p><ol><li>ä¸»é¢˜ï¼ˆSubjectï¼‰ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨ã€‚</li><li>å½“ä¸»é¢˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±å¾ªç¯é€šçŸ¥æ‰€æœ‰å·²æ³¨å†Œï¼ˆè®¢é˜…ï¼‰çš„è§‚å¯Ÿè€…ã€‚</li><li>è§‚å¯Ÿè€…å¯ä»¥æœ‰ä¸åŒçš„é€»è¾‘ï¼Œæ ¹æ®äº‹ä»¶ä¿¡æ¯åšå‡ºä¸åŒååº”ã€‚</li></ol><h2 id="_2-å…ˆçœ‹ä¸€ä¸ªç®€åŒ–çš„-æ¼”å”±ä¼šè®¢ç¥¨-ç¤ºä¾‹æ€è·¯" tabindex="-1"><a class="header-anchor" href="#_2-å…ˆçœ‹ä¸€ä¸ªç®€åŒ–çš„-æ¼”å”±ä¼šè®¢ç¥¨-ç¤ºä¾‹æ€è·¯"><span>2. å…ˆçœ‹ä¸€ä¸ªç®€åŒ–çš„â€œæ¼”å”±ä¼šè®¢ç¥¨â€ç¤ºä¾‹æ€è·¯</span></a></h2><ol><li><strong>TicketNotificationSubscriber</strong>: è¿™æ˜¯è§‚å¯Ÿè€…æ¥å£(Observer)ï¼Œè¡¨ç¤ºâ€œä»»ä½•æƒ³è®¢é˜…æ–°æ¼”å”±ä¼šé€šçŸ¥â€çš„äººï¼ˆæˆ–å¯¹è±¡ï¼‰ï¼Œå¿…é¡»å®ç°æ­¤æ¥å£ï¼Œå¹¶å®ç°ä¸€ä¸ªå›è°ƒæ–¹æ³• <code>ticketsAvailableFor(String concertName)</code>ï¼Œç”¨æ¥æ¥æ”¶â€œé€šçŸ¥â€ã€‚</li><li><strong>TicketSeller</strong>: è¿™æ˜¯ä¸»é¢˜(Subject)ï¼Œ <ul><li>ä¼šç»´æŠ¤ä¸€ä¸ªâ€œå·²è®¢é˜…â€åˆ—è¡¨ï¼ˆListï¼‰ï¼Œé‡Œé¢æ”¾çš„éƒ½æ˜¯å®ç°äº† <code>TicketNotificationSubscriber</code> æ¥å£çš„å¯¹è±¡ã€‚</li><li>å½“å®ƒå®£å¸ƒæœ‰æ–°çš„æ¼”å”±ä¼šï¼ˆ<code>announceNewConcert(String name)</code>ï¼‰æ—¶ï¼Œå°±ä¼šæŠŠè¿™ä¸ªæ¶ˆæ¯å¹¿æ’­ç»™æ‰€æœ‰è®¢é˜…è€…ã€‚</li></ul></li><li><strong>Person</strong>: å…·ä½“çš„è§‚å¯Ÿè€…ï¼ˆObserverï¼‰çš„å®ç°ç±»ä¹‹ä¸€ï¼Œ <ul><li>å®ƒæƒ³è¦è®¢é˜…æŸä¸ªæ¼”å”±ä¼šçš„é—¨ç¥¨é€šçŸ¥ï¼Œå°±è°ƒç”¨ <code>seller.signUpForNotifications(this)</code> æŠŠè‡ªå·±æ³¨å†Œåˆ° <code>TicketSeller</code>ã€‚</li><li>å½“æ”¶åˆ°é€šçŸ¥ <code>ticketsAvailableFor(String concertName)</code>ï¼Œå°±åˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªå·±å…³å¿ƒçš„æ¼”å”±ä¼šï¼Œå¦‚æœæ˜¯ï¼Œå°±æ‰§è¡Œè´­ä¹°ç¥¨çš„é€»è¾‘ã€‚</li></ul></li></ol><p>å’Œæˆ‘ä»¬å¸¸è§çš„ GUI ç›‘å¬å™¨ç±»ä¼¼ï¼Œä½†äº‹ä»¶åæ˜¯ä¸šåŠ¡ç›¸å…³çš„â€œé—¨ç¥¨å¯ç”¨äº‹ä»¶â€ï¼Œè€Œéé¼ æ ‡ç‚¹å‡»ã€é”®ç›˜è¾“å…¥ç­‰åº•å±‚äº‹ä»¶ï¼Œå› æ­¤å®ƒä¹Ÿè¢«ç§°ä¸ºâ€œé«˜å±‚äº‹ä»¶â€æˆ–â€œåº”ç”¨ç‰¹å®šäº‹ä»¶â€ã€‚</p><h2 id="_3-ä¸€æ­¥æ­¥å¸¦ä½ å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-ä¸€æ­¥æ­¥å¸¦ä½ å®ç°"><span>3. ä¸€æ­¥æ­¥å¸¦ä½ å®ç°</span></a></h2><p>ä¸‹é¢æˆ‘ä»¬å†™ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œæ¼”ç¤ºã€‚å¯ä»¥æŠŠå®ƒä¿å­˜ä¸º <code>ObserverPatternDemo.java</code> å¹¶ç¼–è¯‘è¿è¡Œï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œæ”¾åœ¨ä¸€èµ·ï¼‰ã€‚</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰è§‚å¯Ÿè€…æ¥å£</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-1" aria-selected="false">ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼Œå³å–ç¥¨æ–¹</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-2" aria-selected="false">ç¬¬ä¸‰æ­¥ï¼šå®ç°å…·ä½“çš„è§‚å¯Ÿè€…</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-3" aria-selected="false">ç¬¬å››æ­¥ï¼šåœ¨ main æ–¹æ³•ä¸­è¿è¡Œç¤ºä¾‹</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-4" aria-selected="false">All Code</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-5" aria-selected="false">å®Œæ•´æ³¨é‡Š</button></div><!--[--><div class="vp-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰è§‚å¯Ÿè€…æ¥å£</div><!--[--><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#88846F;">// Observeræ¥å£ï¼šè®¢é˜…è€…éƒ½è¦å®ç°è¿™ä¸ªæ¥å£</span></span>
<span class="line"><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * å½“æ¼”å”±ä¼šé—¨ç¥¨å¯ç”¨æ—¶è¢«é€šçŸ¥çš„æ–¹æ³•</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#88846F;"> æ¼”å”±ä¼šåå­—</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ¥å£çš„ä½œç”¨å°±å’Œæˆ‘ä»¬åœ¨å‰é¢è®²ä¹‰ä¸­çœ‹åˆ°çš„ <code>TicketNotificationSubscriber</code> ä¸€æ ·ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³• <code>ticketsAvailableFor(String concertName)</code>ï¼Œè¡¨ç¤ºâ€œæœ‰æ–°ç¥¨æ—¶çš„é€šçŸ¥å›è°ƒâ€ã€‚</p><!--]--></div><div class="vp-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼Œå³å–ç¥¨æ–¹</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.ArrayList</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.List</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketSeller</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    // ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…çš„åˆ—è¡¨ï¼Œè°è®¢é˜…äº†å°±æ”¾è¿›æ¥</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> List</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;">&gt; subscribers </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> ArrayList</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è®¢é˜…ï¼ˆæ³¨å†Œï¼‰æ–¹æ³•ï¼Œä»»ä½•å®ç°äº†TicketNotificationSubscriberçš„äººéƒ½èƒ½è®¢é˜…é€šçŸ¥</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#FD971F;font-style:italic;"> subscriber</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.subscribers.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(subscriber);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * ä¸»é¢˜æ‰€å‘é€çš„äº‹ä»¶ï¼Œä¾‹å¦‚å®£å¸ƒæŸä¸ªæ¼”å”±ä¼šæœ‰æ–°ç¥¨äº†</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€TicketSellerã€‘å®£å¸ƒæ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; å¯ä»¥è´­ç¥¨äº†ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // éå†æ‰€æœ‰è®¢é˜…è€…ï¼Œé€ä¸€é€šçŸ¥</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> sub </span><span style="color:#F92672;">:</span><span style="color:#FD971F;"> this</span><span style="color:#F8F8F2;">.subscribers) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            sub.</span><span style="color:#A6E22E;">ticketsAvailableFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è´­ä¹°é—¨ç¥¨çš„é€»è¾‘ï¼Œè¿™é‡Œç®€å•æ¼”ç¤ºä¸€ä¸‹ï¼ŒçœŸå®æƒ…å†µä¸‹å¯èƒ½æœ‰å¾ˆå¤šä¸šåŠ¡æ ¡éªŒ</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> purchaseTicketFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€TicketSellerã€‘è´­ä¹°äº†æ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; çš„é—¨ç¥¨ã€‚&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><ul><li><p><code>subscribers</code> å°±æ˜¯â€œè°å·²ç»è®¢é˜…ï¼ˆsign upï¼‰äº†é€šçŸ¥â€è¿™ä»¶äº‹æƒ…ã€‚</p></li><li><p><code>announceNewConcert(String concertName)</code> ç”¨æ¥â€œå‘å¸ƒ/å¹¿æ’­â€æŸä¸ªæ–°æ¼”å”±ä¼šã€‚</p></li><li><p><code>purchaseTicketFor(String concertName)</code> ç®€åŒ–åœ°æ¨¡æ‹Ÿè´­ä¹°æµç¨‹ï¼Œåªæ˜¯æ‰“å°ä¸€ä¸‹è¡¨ç¤ºä¹°åˆ°äº†ç¥¨ã€‚</p></li></ul><!--]--></div><div class="vp-tab" id="v-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">ç¬¬ä¸‰æ­¥ï¼šå®ç°å…·ä½“çš„è§‚å¯Ÿè€…</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Person</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    // è¿™ä¸ªäººåªå…³å¿ƒå“ªä¸ªæ¼”å”±ä¼š</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#F8F8F2;"> interestedConcert;</span></span>
<span class="line"><span style="color:#88846F;">    // ä¿å­˜ä¸€ä¸ªå¯¹TicketSellerçš„å¼•ç”¨ï¼Œä¸ºäº†åç»­å»è°ƒç”¨purchaseTicketFor</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> TicketSeller</span><span style="color:#F8F8F2;"> seller;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è®©è¿™ä¸ªäººå¼€å§‹è®¢é˜…æŸä¸ªæ¼”å”±ä¼šçš„ç¥¨åŠ¡é€šçŸ¥</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TicketSeller</span><span style="color:#FD971F;font-style:italic;"> seller</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.interestedConcert </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> concertName;</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.seller </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> seller;</span></span>
<span class="line"><span style="color:#88846F;">        // å‘Šè¯‰å–ç¥¨çš„äººï¼šæˆ‘è¦è®¢é˜…ä½ ä»¬çš„â€œæ–°æ¼”å”±ä¼šæ¶ˆæ¯â€</span></span>
<span class="line"><span style="color:#F8F8F2;">        seller.</span><span style="color:#A6E22E;">signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * çœŸæ­£æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œä¼šè¢«TicketSellerè°ƒç”¨</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F8F8F2;">    @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; ç¥¨æ¥äº†ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // å¦‚æœæ˜¯æˆ‘æ„Ÿå…´è¶£çš„é‚£ä¸ªæ¼”å”±ä¼šï¼Œå°±ç«‹åˆ»å»ä¹°ç¥¨</span></span>
<span class="line"><span style="color:#F92672;">        if</span><span style="color:#F8F8F2;"> (concertName.</span><span style="color:#A6E22E;">equals</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.interestedConcert)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘æ­£æ˜¯æˆ‘æƒ³çœ‹çš„æ¼”å”±ä¼šï¼èµ¶ç´§ä¹°ç¥¨ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">            seller.</span><span style="color:#A6E22E;">purchaseTicketFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">        } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">            System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘ä½†è¿™åœºæ¼”å”±ä¼šæˆ‘ä¸æ„Ÿå…´è¶£ã€‚&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><ul><li><code>tryToBuyTicketsFor</code> æ˜¯æˆ‘ä»¬åœ¨â€œç°å®åœºæ™¯â€é‡Œç‚¹â€œæˆ‘è¦è®¢é˜…è¿™ä¸ªæ¼”å”±ä¼šä¿¡æ¯â€çš„åŠ¨ä½œã€‚</li><li><code>ticketsAvailableFor</code> æ˜¯æ”¶åˆ°é€šçŸ¥åï¼Œè¿™ä¸ª <code>Person</code> è¦åšå‡ºçš„å“åº”ã€‚åªæœ‰å½“é€šçŸ¥çš„æ¼”å”±ä¼šæ­£å¥½æ˜¯ <code>interestedConcert</code>ï¼Œæ‰ä¼šçœŸæ­£å»è´­ä¹°ï¼Œå¦åˆ™ä¸ç®¡ã€‚</li></ul><!--]--></div><div class="vp-tab" id="v-3" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">ç¬¬å››æ­¥ï¼šåœ¨ main æ–¹æ³•ä¸­è¿è¡Œç¤ºä¾‹</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">ObserverPatternDemo</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">        // 1. åˆ›å»ºä¸»é¢˜ï¼ˆå–ç¥¨æ–¹ï¼‰</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        TicketSeller</span><span style="color:#F8F8F2;"> ticketSeller </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> TicketSeller</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 2. åˆ›å»ºå‡ ä¸ªè§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        Person</span><span style="color:#F8F8F2;"> alice </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Person</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        Person</span><span style="color:#F8F8F2;"> bob </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Person</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 3. åˆ†åˆ«è®©aliceå’Œbobè®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„æ¼”å”±ä¼š</span></span>
<span class="line"><span style="color:#F8F8F2;">        alice.</span><span style="color:#A6E22E;">tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;å‘¨æ°ä¼¦æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">, ticketSeller);</span></span>
<span class="line"><span style="color:#F8F8F2;">        bob.</span><span style="color:#A6E22E;">tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;æ—ä¿Šæ°æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">, ticketSeller);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 4. å–ç¥¨æ–¹å®£å¸ƒæ¼”å”±ä¼šå¼€å§‹ï¼Œçœ‹çœ‹è°ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è¡ŒåŠ¨</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">=== ç¬¬ä¸€æ¬¡å®£å¸ƒï¼šå‘¨æ°ä¼¦æ¼”å”±ä¼š ===&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        ticketSeller.</span><span style="color:#A6E22E;">announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;å‘¨æ°ä¼¦æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">=== ç¬¬äºŒæ¬¡å®£å¸ƒï¼šæ—ä¿Šæ°æ¼”å”±ä¼š ===&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        ticketSeller.</span><span style="color:#A6E22E;">announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;æ—ä¿Šæ°æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>è¿è¡Œåï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡º(ç¤ºä¾‹)ï¼š</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> ç¬¬ä¸€æ¬¡å®£å¸ƒï¼šå‘¨æ°ä¼¦æ¼”å”±ä¼š </span><span style="color:#F92672;">===</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€TicketSellerã€‘å®£å¸ƒæ¼”å”±ä¼š å‘¨æ°ä¼¦æ¼”å”±ä¼š å¯ä»¥è´­ç¥¨äº†ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š å‘¨æ°ä¼¦æ¼”å”±ä¼š ç¥¨æ¥äº†ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘æ­£æ˜¯æˆ‘æƒ³çœ‹çš„æ¼”å”±ä¼šï¼èµ¶ç´§ä¹°ç¥¨ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€TicketSellerã€‘è´­ä¹°äº†æ¼”å”±ä¼š å‘¨æ°ä¼¦æ¼”å”±ä¼š çš„é—¨ç¥¨ã€‚</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š å‘¨æ°ä¼¦æ¼”å”±ä¼š ç¥¨æ¥äº†ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘ä½†è¿™åœºæ¼”å”±ä¼šæˆ‘ä¸æ„Ÿå…´è¶£ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> ç¬¬äºŒæ¬¡å®£å¸ƒï¼šæ—ä¿Šæ°æ¼”å”±ä¼š </span><span style="color:#F92672;">===</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€TicketSellerã€‘å®£å¸ƒæ¼”å”±ä¼š æ—ä¿Šæ°æ¼”å”±ä¼š å¯ä»¥è´­ç¥¨äº†ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š æ—ä¿Šæ°æ¼”å”±ä¼š ç¥¨æ¥äº†ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘ä½†è¿™åœºæ¼”å”±ä¼šæˆ‘ä¸æ„Ÿå…´è¶£ã€‚</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š æ—ä¿Šæ°æ¼”å”±ä¼š ç¥¨æ¥äº†ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€Personã€‘æ­£æ˜¯æˆ‘æƒ³çœ‹çš„æ¼”å”±ä¼šï¼èµ¶ç´§ä¹°ç¥¨ï¼</span></span>
<span class="line"><span style="color:#F8F8F2;">ã€TicketSellerã€‘è´­ä¹°äº†æ¼”å”±ä¼š æ—ä¿Šæ°æ¼”å”±ä¼š çš„é—¨ç¥¨ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œ</p><ul><li><strong>ä¸»é¢˜</strong>(<code>TicketSeller</code>) åœ¨ <code>announceNewConcert(...)</code> ä¸­å°†æ–°æ¼”å”±ä¼šçš„æ¶ˆæ¯é€šçŸ¥ç»™æ‰€æœ‰<strong>è§‚å¯Ÿè€…</strong>(<code>Person</code>)ã€‚</li><li>æ¯ä¸ª <code>Person</code> æ”¶åˆ°é€šçŸ¥åéƒ½ä¼šå„è‡ªåšåˆ¤æ–­ï¼Œåªæœ‰å¯¹è‡ªå·±æ„Ÿå…´è¶£çš„æ¼”å”±ä¼šæ‰ä¼šæ‰§è¡Œè´­ä¹°åŠ¨ä½œã€‚</li><li>è¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼æœ€æ ¸å¿ƒçš„åœ°æ–¹ï¼š<strong>â€œä¸»é¢˜ä¸€æ—¦å‘å¸ƒæ¶ˆæ¯ï¼Œæ‰€æœ‰è§‚å¯Ÿè€…éƒ½èƒ½æ”¶åˆ°ï¼Œè§‚å¯Ÿè€…å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦å†³å®šå¦‚ä½•å¤„ç†ã€‚â€</strong></li></ul><!--]--></div><div class="vp-tab" id="v-4" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">All Code</div><!--[--><p>ä¸‹é¢ç»™å‡ºçš„æ¼”ç¤ºä»£ç å¯ä»¥æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ <code>ObserverPatternDemo.java</code> ä¸­ï¼ŒåŒ…å«æ‰€æœ‰ç±»ï¼ˆ<code>ObserverPatternDemo</code>ã€<code>TicketNotificationSubscriber</code>ã€<code>TicketSeller</code>ã€<code>Person</code>ï¼‰ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥ç¼–è¯‘å¹¶è¿è¡Œã€‚å®Œæ•´ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.ArrayList</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.List</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * æ¼”ç¤ºå…¥å£ç±»ï¼šåŒ…å« main() æ–¹æ³•ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> * è¿™é‡Œå‘½åä¸º public class ObserverPatternDemoï¼Œå…¶ä»–ç±»ç”¨åŒ…çº§å¯è§ï¼ˆä¸åŠ  publicï¼‰å³å¯ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">ObserverPatternDemo</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">        // 1. åˆ›å»ºä¸»é¢˜ï¼ˆå–ç¥¨æ–¹ï¼‰</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        TicketSeller</span><span style="color:#F8F8F2;"> ticketSeller </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> TicketSeller</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 2. åˆ›å»ºå‡ ä¸ªè§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        Person</span><span style="color:#F8F8F2;"> alice </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Person</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        Person</span><span style="color:#F8F8F2;"> bob </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Person</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 3. åˆ†åˆ«è®©aliceå’Œbobè®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„æ¼”å”±ä¼š</span></span>
<span class="line"><span style="color:#F8F8F2;">        alice.</span><span style="color:#A6E22E;">tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;å‘¨æ°ä¼¦æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">, ticketSeller);</span></span>
<span class="line"><span style="color:#F8F8F2;">        bob.</span><span style="color:#A6E22E;">tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;æ—ä¿Šæ°æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">, ticketSeller);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 4. å–ç¥¨æ–¹å®£å¸ƒæ¼”å”±ä¼šå¼€å§‹ï¼Œçœ‹çœ‹è°ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è¡ŒåŠ¨</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">=== ç¬¬ä¸€æ¬¡å®£å¸ƒï¼šå‘¨æ°ä¼¦æ¼”å”±ä¼š ===&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        ticketSeller.</span><span style="color:#A6E22E;">announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;å‘¨æ°ä¼¦æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">=== ç¬¬äºŒæ¬¡å®£å¸ƒï¼šæ—ä¿Šæ°æ¼”å”±ä¼š ===&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        ticketSeller.</span><span style="color:#A6E22E;">announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;æ—ä¿Šæ°æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * è§‚å¯Ÿè€…æ¥å£: æ‰€æœ‰æƒ³è¦â€œè®¢é˜…æ¼”å”±ä¼šé€šçŸ¥â€çš„ç±»ï¼Œéƒ½è¦å®ç°è¿™ä¸ªæ¥å£ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼šå–ç¥¨æ–¹ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> * ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨ï¼Œå®£å¸ƒæ–°æ¼”å”±ä¼šæ—¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketSeller</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    // ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> List</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;">&gt; subscribers </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> ArrayList</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è®¢é˜…/æ³¨å†Œæ–¹æ³•ï¼Œè®©ä»»ä½•å®ç°äº† TicketNotificationSubscriber çš„å¯¹è±¡åŠ è¿›æ¥</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#FD971F;font-style:italic;"> subscriber</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.subscribers.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(subscriber);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * æ¨¡æ‹Ÿå®£å¸ƒæ–°çš„æ¼”å”±ä¼šæ¥ä¸´ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€TicketSellerã€‘å®£å¸ƒæ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; å¯ä»¥è´­ç¥¨äº†ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> sub </span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> subscribers) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            sub.</span><span style="color:#A6E22E;">ticketsAvailableFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * ç®€åŒ–çš„è´­ç¥¨æ–¹æ³•ï¼Œè¿™é‡Œä»…åšæ‰“å°æ¼”ç¤º</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> purchaseTicketFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€TicketSellerã€‘è´­ä¹°äº†æ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; çš„é—¨ç¥¨ã€‚&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * å…·ä½“çš„è§‚å¯Ÿè€…ï¼šå®ç°äº† TicketNotificationSubscriber æ¥å£ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> * è¡¨ç¤ºä¸€ä¸ªæƒ³ä¹°ç¥¨çš„äººã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Person</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#F8F8F2;"> interestedConcert;  </span><span style="color:#88846F;">// åªå…³æ³¨è¿™ä¸ªæ¼”å”±ä¼š</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> TicketSeller</span><span style="color:#F8F8F2;"> seller;       </span><span style="color:#88846F;">// æŒæœ‰ TicketSeller å¼•ç”¨ä»¥ä¾¿è´­ç¥¨</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è®©è¿™ä¸ªäººå¼€å§‹è®¢é˜…å¹¶å…³æ³¨æŸä¸ªæ¼”å”±ä¼šçš„é—¨ç¥¨é€šçŸ¥</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TicketSeller</span><span style="color:#FD971F;font-style:italic;"> seller</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.interestedConcert </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> concertName;</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.seller </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> seller;</span></span>
<span class="line"><span style="color:#88846F;">        // æ³¨å†Œåˆ°å–ç¥¨æ–¹çš„â€œè®¢é˜…â€åˆ—è¡¨ä¸­</span></span>
<span class="line"><span style="color:#F8F8F2;">        seller.</span><span style="color:#A6E22E;">signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * æ”¶åˆ°ç¥¨åŠ¡é€šçŸ¥çš„å›è°ƒæ–¹æ³•</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F8F8F2;">    @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; ç¥¨æ¥äº†ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F92672;">        if</span><span style="color:#F8F8F2;"> (concertName.</span><span style="color:#A6E22E;">equals</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.interestedConcert)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘æ­£æ˜¯æˆ‘æƒ³çœ‹çš„æ¼”å”±ä¼šï¼èµ¶ç´§ä¹°ç¥¨ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">            seller.</span><span style="color:#A6E22E;">purchaseTicketFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">        } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">            System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘ä½†è¿™åœºæ¼”å”±ä¼šæˆ‘ä¸æ„Ÿå…´è¶£ã€‚&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="ä»£ç ç»“æ„ä¸è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ä»£ç ç»“æ„ä¸è¯´æ˜"><span>ä»£ç ç»“æ„ä¸è¯´æ˜</span></a></h3><ol><li><strong>ObserverPatternDemo</strong><ul><li>è¿™æ˜¯ä¸»ç±» (æœ‰ <code>main</code> æ–¹æ³•)ï¼Œä»£ç è¿è¡Œçš„å…¥å£ã€‚</li><li>è¿™é‡Œæˆ‘ä»¬å°†æ‰€æœ‰ç±»éƒ½æ”¾åœ¨åŒä¸€ä¸ª <code>.java</code> æ–‡ä»¶é‡Œï¼Œä¸ºæ¼”ç¤ºæ–¹ä¾¿ã€‚</li><li>åœ¨ Java ä¸­åªèƒ½æœ‰ä¸€ä¸ª <code>public</code> ç±»ï¼Œä¸”ç±»åä¸æ–‡ä»¶åç›¸åŒï¼Œå…¶ä½™ç±»ä¸åŠ  <code>public</code> å…³é”®å­—ã€‚</li></ul></li><li><strong>TicketNotificationSubscriber (è§‚å¯Ÿè€…æ¥å£)</strong><ul><li>å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• <code>ticketsAvailableFor(String concertName)</code>ï¼Œè¡¨ç¤ºå½“æœ‰æ¼”å”±ä¼šä¿¡æ¯å‘å¸ƒæ—¶çš„å›è°ƒã€‚</li></ul></li><li><strong>TicketSeller (ä¸»é¢˜ Subject)</strong><ul><li>ä¿å­˜äº†ä¸€ä¸ª <code>List&lt;TicketNotificationSubscriber&gt;</code> æ¥è®°å½•æ‰€æœ‰æ³¨å†Œè¿‡çš„è§‚å¯Ÿè€…ã€‚</li><li><code>announceNewConcert(String concertName)</code> ç”¨äºè§¦å‘é€šçŸ¥åŠ¨ä½œï¼Œéå†åˆ—è¡¨ï¼Œè°ƒç”¨è§‚å¯Ÿè€…çš„å›è°ƒæ–¹æ³•ã€‚</li><li><code>purchaseTicketFor(String concertName)</code> åªæ˜¯æ¼”ç¤ºâ€œè´­ä¹°â€æµç¨‹ï¼Œå®é™…å¯æ¥å…¥æ›´å¤šä¸šåŠ¡é€»è¾‘ã€‚</li></ul></li><li><strong>Person (å…·ä½“è§‚å¯Ÿè€… ConcreteObserver)</strong><ul><li>å®ç°äº† <code>TicketNotificationSubscriber</code> æ¥å£ï¼Œä»£è¡¨ä¸€ä¸ªæƒ³è¦ä¹°æ¼”å”±ä¼šç¥¨çš„äººã€‚</li><li>é€šè¿‡ <code>tryToBuyTicketsFor</code> æ–¹æ³•å®ç°äº†â€œè®¢é˜…â€é€»è¾‘ï¼ŒæŠŠè‡ªå·± (<code>this</code>) æ³¨å†Œç»™ <code>TicketSeller</code>ã€‚</li><li>å½“è¢«é€šçŸ¥ <code>ticketsAvailableFor</code> æ—¶ï¼Œä¼šåˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªå·±çœŸæ­£æ„Ÿå…´è¶£çš„æ¼”å”±ä¼šï¼Œè‹¥æ˜¯åˆ™ç«‹åˆ»è°ƒç”¨ <code>seller.purchaseTicketFor</code> è¿›è¡Œè´­ä¹°ã€‚</li></ul></li></ol><!--]--></div><div class="vp-tab" id="v-5" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">å®Œæ•´æ³¨é‡Š</div><!--[--><div class="language-java line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="java" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-java"><span class="line"><span style="color:#88846F;">// ======================</span></span>
<span class="line"><span style="color:#88846F;">// æ–‡ä»¶å: ObserverPatternDemo.java</span></span>
<span class="line"><span style="color:#88846F;">// ======================</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.ArrayList</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// å¼•å…¥ ArrayListï¼Œç”¨äºä¿å­˜è®¢é˜…è€…åˆ—è¡¨</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F92672;"> java.util.List</span><span style="color:#F8F8F2;">;      </span><span style="color:#88846F;">// å¼•å…¥ List æ¥å£ï¼Œç”¨äºæŠ½è±¡åˆ—è¡¨ç±»å‹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * ä¸»ç±»ï¼šåŒ…å« main æ–¹æ³•ï¼Œæ˜¯ç¨‹åºçš„å…¥å£</span></span>
<span class="line"><span style="color:#88846F;"> * ç”±äºè¿™ä¸ªç±»æ˜¯ publicï¼Œæ‰€ä»¥æ–‡ä»¶åå¿…é¡»ä¸ç±»åç›¸åŒï¼ˆObserverPatternDemo.javaï¼‰</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">public</span><span style="color:#F92672;"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">ObserverPatternDemo</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * mainæ–¹æ³•ï¼šJava ç¨‹åºå…¥å£ï¼Œæ‰§è¡Œæ¼”ç¤ºé€»è¾‘</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#F92672;"> static</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#F8F8F2;">[] </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">        // 1. åˆ›å»ºä¸»é¢˜ï¼ˆå–ç¥¨æ–¹ï¼‰</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        TicketSeller</span><span style="color:#F8F8F2;"> ticketSeller </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> TicketSeller</span><span style="color:#F8F8F2;">(); </span></span>
<span class="line"><span style="color:#88846F;">        // è¿™é‡Œæˆ‘ä»¬å®ä¾‹åŒ–äº†ä¸€ä¸ª TicketSeller å¯¹è±¡ï¼Œå®ƒå°†ä½œä¸ºâ€œäº‹ä»¶å‘å¸ƒè€…â€ï¼ˆSubjectï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 2. åˆ›å»ºå‡ ä¸ªè§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        Person</span><span style="color:#F8F8F2;"> alice </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Person</span><span style="color:#F8F8F2;">(); </span></span>
<span class="line"><span style="color:#88846F;">        // å®ä¾‹åŒ–ç¬¬ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆå¯¹å‘¨æ°ä¼¦æ„Ÿå…´è¶£çš„ç”¨æˆ·ï¼‰</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">        Person</span><span style="color:#F8F8F2;"> bob </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> Person</span><span style="color:#F8F8F2;">();   </span></span>
<span class="line"><span style="color:#88846F;">        // å®ä¾‹åŒ–ç¬¬äºŒä¸ªè§‚å¯Ÿè€…ï¼ˆå¯¹æ—ä¿Šæ°æ„Ÿå…´è¶£çš„ç”¨æˆ·ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 3. åˆ†åˆ«è®© alice å’Œ bob è®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„æ¼”å”±ä¼š</span></span>
<span class="line"><span style="color:#F8F8F2;">        alice.</span><span style="color:#A6E22E;">tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;å‘¨æ°ä¼¦æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">, ticketSeller);</span></span>
<span class="line"><span style="color:#88846F;">        // alice æƒ³è¦å‘¨æ°ä¼¦æ¼”å”±ä¼šé—¨ç¥¨ï¼Œäºæ˜¯å‘Šè¯‰ ticketSeller â€œæˆ‘è®¢é˜…è¿™åœºæ¼”å”±ä¼šâ€</span></span>
<span class="line"><span style="color:#F8F8F2;">        bob.</span><span style="color:#A6E22E;">tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;æ—ä¿Šæ°æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">, ticketSeller);</span></span>
<span class="line"><span style="color:#88846F;">        // bob æƒ³è¦æ—ä¿Šæ°æ¼”å”±ä¼šé—¨ç¥¨ï¼Œä¹Ÿå‘ ticketSeller è®¢é˜…</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">        // 4. å–ç¥¨æ–¹å®£å¸ƒæ¼”å”±ä¼šå¼€å§‹ï¼Œçœ‹çœ‹è°ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è¡ŒåŠ¨</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">=== ç¬¬ä¸€æ¬¡å®£å¸ƒï¼šå‘¨æ°ä¼¦æ¼”å”±ä¼š ===&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        ticketSeller.</span><span style="color:#A6E22E;">announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;å‘¨æ°ä¼¦æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // announceNewConcert ä¼šé€šçŸ¥æ‰€æœ‰å·²è®¢é˜…çš„è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#88846F;">        // alice æ„Ÿå…´è¶£ï¼Œä¼šæ‰§è¡Œè´­ä¹°ï¼›bob ä¹Ÿä¼šæ”¶åˆ°é€šçŸ¥ä½†ä¸æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥ä¸ä¼šè´­ä¹°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">=== ç¬¬äºŒæ¬¡å®£å¸ƒï¼šæ—ä¿Šæ°æ¼”å”±ä¼š ===&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        ticketSeller.</span><span style="color:#A6E22E;">announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;æ—ä¿Šæ°æ¼”å”±ä¼š&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // åŒç†ï¼Œè¿™æ¬¡ bob ä¼šè´­ä¹°ï¼Œalice åªä¼šæ”¶åˆ°æ¶ˆæ¯ä½†ä¸æ‰§è¡Œè´­ä¹°</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * è§‚å¯Ÿè€…æ¥å£ï¼šä»»ä½•æƒ³æ”¶åˆ°â€œé—¨ç¥¨å¯ç”¨â€é€šçŸ¥çš„ç±»ï¼Œéƒ½å¿…é¡»å®ç°æ­¤æ¥å£ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> * å…¶ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼šticketsAvailableFor(String concertName)</span></span>
<span class="line"><span style="color:#88846F;"> * ç”¨äºåœ¨æŸä¸ªæ¼”å”±ä¼šå¯ä»¥è´­ç¥¨æ—¶è·å¾—å›è°ƒé€šçŸ¥ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * å›è°ƒæ–¹æ³•ï¼šå½“åä¸º concertName çš„æ¼”å”±ä¼šå¯è´­ç¥¨æ—¶è§¦å‘</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#88846F;"> æ¼”å”±ä¼šçš„åç§°</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * ä¸»é¢˜(Subject)ï¼šå–ç¥¨æ–¹ TicketSeller</span></span>
<span class="line"><span style="color:#88846F;"> * - ç»´æŠ¤ä¸€ä¸ªâ€œè®¢é˜…è€…â€åˆ—è¡¨(subscribers)ï¼Œ</span></span>
<span class="line"><span style="color:#88846F;"> * - å½“æœ‰æ–°çš„æ¼”å”±ä¼šæ¶ˆæ¯æ—¶(announceNewConcert)ï¼Œå¾ªç¯è°ƒç”¨æ¯ä¸ªè®¢é˜…è€…çš„å›è°ƒæ–¹æ³•ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">TicketSeller</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#88846F;">    // ç”¨äºå­˜æ”¾æ‰€æœ‰å·²è®¢é˜…çš„è§‚å¯Ÿè€…(å®ç°äº† TicketNotificationSubscriber æ¥å£çš„å¯¹è±¡)</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> List</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;">&gt; subscribers </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#66D9EF;font-style:italic;"> ArrayList</span><span style="color:#F8F8F2;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è®¢é˜…æ–¹æ³•ï¼šè®©ä»»ä½•å®ç°äº† TicketNotificationSubscriber çš„å¯¹è±¡åŠ è¿›æ¥</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> subscriber</span><span style="color:#88846F;"> ä¼ å…¥çš„è®¢é˜…è€…å¯¹è±¡</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#FD971F;font-style:italic;"> subscriber</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.subscribers.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(subscriber);</span></span>
<span class="line"><span style="color:#88846F;">        // å°†è®¢é˜…è€…åŠ å…¥åˆ—è¡¨ï¼Œä»¥åæœ‰æ–°æ¼”å”±ä¼šæ—¶ä¼šé€šçŸ¥ä»–ä»¬</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * æ¨¡æ‹Ÿå®£å¸ƒæ–°çš„æ¼”å”±ä¼šæ¥ä¸´ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#88846F;"> æ¼”å”±ä¼šåå­—</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> announceNewConcert</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€TicketSellerã€‘å®£å¸ƒæ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; å¯ä»¥è´­ç¥¨äº†ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // å¹¿æ’­ç»™æ¯ä¸€ä¸ªè®¢é˜…è€…</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> sub </span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> subscribers) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            sub.</span><span style="color:#A6E22E;">ticketsAvailableFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * ç®€åŒ–çš„è´­ç¥¨æ–¹æ³•ï¼Œè¿™é‡Œä»…åšæ‰“å°æ¼”ç¤º</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#88846F;"> æ¼”å”±ä¼šåå­—</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> purchaseTicketFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€TicketSellerã€‘è´­ä¹°äº†æ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; çš„é—¨ç¥¨ã€‚&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // å®é™…ä¸šåŠ¡ä¸­ï¼Œå¯èƒ½ä¼šåœ¨è¿™é‡Œè¿›è¡Œæ‰£æ¬¾ã€ç¥¨åŠ¡è®°å½•ã€å‘é€ç”µå­ç¥¨ç­‰æ“ä½œ</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">/**</span></span>
<span class="line"><span style="color:#88846F;"> * å…·ä½“è§‚å¯Ÿè€…(Concrete Observer)ï¼šä¸€ä¸ªâ€œæƒ³ä¹°æ¼”å”±ä¼šç¥¨çš„äººâ€ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> * å®ç°äº† TicketNotificationSubscriber æ¥å£ï¼Œå°±å¯ä»¥è®¢é˜…æ¼”å”±ä¼šé€šçŸ¥ã€‚</span></span>
<span class="line"><span style="color:#88846F;"> */</span></span>
<span class="line"><span style="color:#F92672;">class</span><span> </span><span style="color:#A6E22E;text-decoration:underline;">Person</span><span style="color:#F92672;"> implements</span><span> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">TicketNotificationSubscriber</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> String</span><span style="color:#F8F8F2;"> interestedConcert; </span><span style="color:#88846F;">// ä¿å­˜æ„Ÿå…´è¶£çš„æ¼”å”±ä¼šåç§°</span></span>
<span class="line"><span style="color:#F92672;">    private</span><span style="color:#66D9EF;font-style:italic;"> TicketSeller</span><span style="color:#F8F8F2;"> seller;      </span><span style="color:#88846F;">// ç”¨æ¥æ“ä½œä¹°ç¥¨ã€ä»¥åŠç”±è°å‘é€é€šçŸ¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * è®©è¿™ä¸ªäººå¼€å§‹è®¢é˜…å¹¶å…³æ³¨æŸä¸ªæ¼”å”±ä¼šçš„é—¨ç¥¨é€šçŸ¥</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#88846F;"> æ„Ÿå…´è¶£çš„æ¼”å”±ä¼šåç§°</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> seller</span><span style="color:#88846F;"> éœ€è¦å‘å“ªä¸ªå–ç¥¨æ–¹è®¢é˜…</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> tryToBuyTicketsFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TicketSeller</span><span style="color:#FD971F;font-style:italic;"> seller</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.interestedConcert </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> concertName; </span><span style="color:#88846F;">// è®°å½•ä¸‹è‡ªå·±æƒ³çœ‹çš„æ¼”å”±ä¼š</span></span>
<span class="line"><span style="color:#FD971F;">        this</span><span style="color:#F8F8F2;">.seller </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> seller;                 </span><span style="color:#88846F;">// è®°å½•è¦å‘å“ªä¸ª TicketSeller è®¢é˜…</span></span>
<span class="line"><span style="color:#F8F8F2;">        seller.</span><span style="color:#A6E22E;">signUpForNotifications</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">);  </span><span style="color:#88846F;">// å°†è‡ªå·±(this)æ³¨å†Œåˆ°å–ç¥¨æ–¹çš„è®¢é˜…åˆ—è¡¨</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    /**</span></span>
<span class="line"><span style="color:#88846F;">     * æ”¶åˆ°ç¥¨åŠ¡é€šçŸ¥çš„å›è°ƒæ–¹æ³•</span></span>
<span class="line"><span style="color:#88846F;">     * </span><span style="color:#F92672;">@param</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#88846F;"> å“ªä¸ªæ¼”å”±ä¼šæ¥äº†ç¥¨</span></span>
<span class="line"><span style="color:#88846F;">     */</span></span>
<span class="line"><span style="color:#F8F8F2;">    @</span><span style="color:#66D9EF;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F92672;">    public</span><span style="color:#66D9EF;font-style:italic;"> void</span><span style="color:#A6E22E;"> ticketsAvailableFor</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">String</span><span style="color:#FD971F;font-style:italic;"> concertName</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">        // æ¯å½“ TicketSeller.broadcast æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="color:#F8F8F2;">        System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘æ”¶åˆ°é€šçŸ¥ï¼šæ¼”å”±ä¼š &quot;</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> concertName </span><span style="color:#F92672;">+</span><span style="color:#E6DB74;"> &quot; ç¥¨æ¥äº†ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">        // å¦‚æœå’Œè‡ªå·±çš„ interestedConcert åŒ¹é…ï¼Œæ‰å»ä¹°</span></span>
<span class="line"><span style="color:#F92672;">        if</span><span style="color:#F8F8F2;"> (concertName.</span><span style="color:#A6E22E;">equals</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.interestedConcert)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘æ­£æ˜¯æˆ‘æƒ³çœ‹çš„æ¼”å”±ä¼šï¼èµ¶ç´§ä¹°ç¥¨ï¼&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">            seller.</span><span style="color:#A6E22E;">purchaseTicketFor</span><span style="color:#F8F8F2;">(concertName);</span></span>
<span class="line"><span style="color:#F8F8F2;">        } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">            System.out.</span><span style="color:#A6E22E;">println</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;ã€Personã€‘ä½†è¿™åœºæ¼”å”±ä¼šæˆ‘ä¸æ„Ÿå…´è¶£ã€‚&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p></p><!--]--></div><!--]--></div><h2 id="_4-æ‰©å±•ä¸æ€è€ƒ" tabindex="-1"><a class="header-anchor" href="#_4-æ‰©å±•ä¸æ€è€ƒ"><span>4. æ‰©å±•ä¸æ€è€ƒ</span></a></h2><p>ä¸Šé¢æ˜¯æœ€ç®€æ´çš„ä¸€ç§å®ç°æ–¹å¼ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ ¹æ®éœ€æ±‚ä¸åŒï¼Œè¿˜å¯èƒ½ä¼šæœ‰ä¸€äº›å˜ä½“æˆ–å¢å¼ºï¼š</p><ol><li><strong>å¢åŠ å–æ¶ˆè®¢é˜…ï¼ˆunregister / removeObserverï¼‰</strong>ï¼šæœ‰æ—¶è§‚å¯Ÿè€…ä¸å†å¯¹æŸäº›äº‹ä»¶æ„Ÿå…´è¶£ï¼Œéœ€è¦åœ¨ä¸»é¢˜ä¸­æŠŠè‡ªå·±ç§»é™¤ã€‚</li><li><strong>å¢åŠ å¤šç§é€šçŸ¥ç±»å‹</strong>ï¼šæ¯”å¦‚ä¸ä»…ä»…æ˜¯â€œæ¼”å”±ä¼šå¼€å§‹å‘å”®â€è¿™ä¸€ç§äº‹ä»¶ï¼Œå¯èƒ½è¿˜æœ‰â€œæ¼”å”±ä¼šå”®ç½„â€ä¹‹ç±»çš„äº‹ä»¶ï¼Œæ­¤æ—¶è§‚å¯Ÿè€…æ¥å£é‡Œå¯ä»¥æœ‰å¤šä¸ªæ–¹æ³•ã€‚</li><li><strong>è¿‡æ»¤ç‰¹å®šä¸»é¢˜</strong>ï¼šå¦‚è®²ä¹‰ä¸­æåˆ°çš„ï¼Œå¦‚æœè§‚ä¼—åªæƒ³å¬ä¸€ä¸ªæ­Œæ‰‹æˆ–è€…åªæƒ³äº†è§£æŸäº›æ¼”å‡ºï¼Œå°±å¯ä»¥è®© <code>TicketSeller</code> æ›´æ™ºèƒ½åœ°å‘é€æ›´â€œç²¾å‡†â€çš„é€šçŸ¥ã€‚</li><li><strong>æ‰¹é‡é€šçŸ¥</strong>ï¼šæœ‰æ—¶ä¸æƒ³ä¸€æœ‰æ¶ˆæ¯å°±é€šçŸ¥ï¼Œå¯ä»¥å‡ ä¸ªå°æ—¶å‘é€ä¸€æ¬¡â€œç»¼åˆâ€æ¶ˆæ¯ï¼Œæ¯”å¦‚å¸¸è§çš„é‚®ä»¶è®¢é˜…é€‰é¡¹â€œç«‹å³é€šçŸ¥â€VSâ€œæ¯æ—¥/æ¯å‘¨æ±‡æ€»â€ã€‚</li></ol><p>æ— è®ºå¦‚ä½•ï¼Œæ ¸å¿ƒç‚¹ä¸å˜ï¼š<strong>ä¸»é¢˜ç»´æŠ¤ä¸€ç»„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå‘ç”ŸæŸä»¶äº‹æ—¶è°ƒç”¨è§‚å¯Ÿè€…æ¥å£çš„æ–¹æ³•è¿›è¡Œå›è°ƒï¼Œä»è€Œè®©è§‚å¯Ÿè€…å¯¹è¯¥äº‹ä»¶åšå‡ºç›¸åº”å¤„ç†ã€‚</strong> è¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern)ã€‚</p><h2 id="_5-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_5-å°ç»“"><span>5. å°ç»“</span></a></h2><ul><li><strong>é—®é¢˜åœºæ™¯</strong>ï¼šå½“æŸä¸ªå¯¹è±¡å‘ç”Ÿâ€œæŸç§å˜åŒ–â€æ—¶ï¼Œéœ€è¦é€šçŸ¥å…¶ä»–æ„Ÿå…´è¶£çš„å¯¹è±¡ã€‚</li><li>æ ¸å¿ƒç»“æ„ï¼š <ul><li>ä¸»é¢˜(Subject)ä¿å­˜ä¸€ä¸ªè§‚å¯Ÿè€…(Observer)åˆ—è¡¨ï¼›</li><li>ä¸»é¢˜å‘ç”Ÿäº‹ä»¶æ—¶ï¼Œä¾æ¬¡è°ƒç”¨<code>observer.å›è°ƒæ–¹æ³•()</code>å»é€šçŸ¥ã€‚</li></ul></li><li><strong>é€‚ç”¨èŒƒå›´éå¸¸å¹¿</strong>ï¼šå›¾å½¢ç•Œé¢çš„æŒ‰é’®ç‚¹å‡»ã€ç½‘ç»œçŠ¶æ€å˜æ›´çš„é€šçŸ¥ã€è®¢é˜…-å‘å¸ƒç³»ç»Ÿç­‰éƒ½å¯å½’ä¸ºè§‚å¯Ÿè€…æ¨¡å¼ã€‚</li></ul><p>å¸Œæœ›è¿™ä¸ªä¾‹å­å’Œé€æ­¥å®ç°çš„è¿‡ç¨‹èƒ½å¸®ä½ çœŸæ­£ç†è§£å¹¶æŒæ¡â€œè§‚å¯Ÿè€…æ¨¡å¼â€ã€‚å¦‚æœä½ æŠŠä¸Šé¢çš„ä»£ç éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆæˆ–è€…æŒ‰ç…§å„ä¸ªç±»æ‹†æˆå¤šä¸ªæ–‡ä»¶ï¼‰ï¼Œç¼–è¯‘è¿è¡Œï¼Œå°±å¯ä»¥äº²çœ¼çœ‹åˆ°ç¨‹åºå¦‚ä½•åœ¨â€œå¹¿æ’­äº‹ä»¶â€æ—¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…äº†ã€‚</p><details class="hint-container details"><summary>å…¬ä¼—å·ï¼šAIæ‚¦åˆ›ã€äºŒç»´ç ã€‘</summary><figure><img src="/gzh.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></details><div class="hint-container info"><p class="hint-container-title">AIæ‚¦åˆ›Â·ç¼–ç¨‹ä¸€å¯¹ä¸€</p><p>AIæ‚¦åˆ›Â·æ¨å‡ºè¾…å¯¼ç­å•¦ï¼ŒåŒ…æ‹¬ã€ŒPython è¯­è¨€è¾…å¯¼ç­ã€C++ è¾…å¯¼ç­ã€java è¾…å¯¼ç­ã€ç®—æ³•/æ•°æ®ç»“æ„è¾…å¯¼ç­ã€å°‘å„¿ç¼–ç¨‹ã€pygame æ¸¸æˆå¼€å‘ã€Webã€Linuxã€ï¼Œå…¨éƒ¨éƒ½æ˜¯ä¸€å¯¹ä¸€æ•™å­¦ï¼šä¸€å¯¹ä¸€è¾…å¯¼ + ä¸€å¯¹ä¸€ç­”ç–‘ + å¸ƒç½®ä½œä¸š + é¡¹ç›®å®è·µç­‰ã€‚å½“ç„¶ï¼Œè¿˜æœ‰çº¿ä¸‹çº¿ä¸Šæ‘„å½±è¯¾ç¨‹ã€Photoshopã€Premiere ä¸€å¯¹ä¸€æ•™å­¦ã€QQã€å¾®ä¿¡åœ¨çº¿ï¼Œéšæ—¶å“åº”ï¼å¾®ä¿¡ï¼šJiabcdefh</p><p>C++ ä¿¡æ¯å¥¥èµ›é¢˜è§£ï¼Œé•¿æœŸæ›´æ–°ï¼é•¿æœŸæ‹›æ”¶ä¸€å¯¹ä¸€ä¸­å°å­¦ä¿¡æ¯å¥¥èµ›é›†è®­ï¼Œè†ç”°ã€å¦é—¨åœ°åŒºæœ‰æœºä¼šçº¿ä¸‹ä¸Šé—¨ï¼Œå…¶ä»–åœ°åŒºçº¿ä¸Šã€‚å¾®ä¿¡ï¼šJiabcdefh</p><p>æ–¹æ³•ä¸€ï¼š<a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1432803776&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener noreferrer">QQ</a></p><p>æ–¹æ³•äºŒï¼šå¾®ä¿¡ï¼šJiabcdefh</p></div><figure><img src="/zsxq.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">æœ€è¿‘æ›´æ–°</span><time class="vp-meta-info" datetime="2025-07-04T03:57:54.000Z" data-allow-mismatch>2025/7/4 03:57</time></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: bornforthis@bornforthis.cn">AndersonHJB</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Copyright Â© 2018-2024 é•¿æœŸæ‹›æ”¶ç¼–ç¨‹ä¸€å¯¹ä¸€å­¦å‘˜!å¾®ä¿¡:Jiabcdefh</div><div class="vp-copyright">Copyright Â© 2025 AIæ‚¦åˆ› </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BgxfbuhL.js" defer></script>
  </body>
</html>
