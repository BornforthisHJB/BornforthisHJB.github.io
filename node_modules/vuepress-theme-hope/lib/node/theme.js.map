{"version":3,"file":"theme.js","sourceRoot":"","sources":["../../src/node/theme.ts"],"names":[],"mappings":"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","sourcesContent":["import { getDirname, path } from \"@vuepress/utils\";\n\nimport { resolveAlias } from \"./alias.js\";\nimport { updateBundlerConfig } from \"./bundler.js\";\nimport { extendsPage } from \"./extendsPage.js\";\nimport {\n  checkStyle,\n  convertFrontmatter,\n  convertThemeConfig,\n} from \"./compact/index.js\";\nimport { getPluginConfig, usePlugin } from \"./plugins/index.js\";\nimport {\n  prepareConfigFile,\n  prepareSidebarData,\n  prepareSocialMediaIcons,\n} from \"./prepare/index.js\";\nimport { checkSocialMediaIcons } from \"./socialMedia.js\";\nimport { getStatus } from \"./status.js\";\nimport { getThemeConfig } from \"./themeConfig.js\";\nimport { prepareThemeColorScss } from \"./themeColor.js\";\n\nimport type { Page, ThemeFunction } from \"@vuepress/core\";\nimport type { HopeThemeOptions, HopeThemePageData } from \"../shared/index.js\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const hopeTheme =\n  (\n    options: HopeThemeOptions,\n    // TODO: remove this option in stable release\n    legacy = false\n  ): ThemeFunction =>\n  (app) => {\n    const {\n      plugins = {},\n      hostname,\n      iconAssets,\n      iconPrefix,\n      addThis,\n      backToTop,\n      sidebarSorter,\n      ...themeOptions\n    } = legacy\n      ? convertThemeConfig(\n          options as HopeThemeOptions & Record<string, unknown>\n        )\n      : options;\n\n    if (legacy) checkStyle(app);\n\n    const status = getStatus(options);\n    const themeConfig = getThemeConfig(app, themeOptions, status);\n    const icons = status.enableBlog ? checkSocialMediaIcons(themeConfig) : {};\n\n    usePlugin(app, plugins);\n\n    if (app.env.isDebug) console.log(\"Theme plugin options:\", plugins);\n\n    return {\n      name: \"vuepress-theme-hope\",\n\n      alias: resolveAlias(app.env.isDebug),\n\n      define: () => ({\n        ENABLE_BLOG: status.enableBlog,\n        SUPPORT_PAGEVIEW: status.supportPageview,\n      }),\n\n      extendsBundlerOptions: (config: unknown, app): void =>\n        updateBundlerConfig(config, app),\n\n      extendsPage: (page): void => {\n        if (legacy)\n          page.frontmatter = convertFrontmatter(\n            page.frontmatter,\n            page.filePathRelative || \"\"\n          );\n\n        extendsPage(\n          themeConfig,\n          plugins,\n          <Page<HopeThemePageData>>page,\n          app.env.isDev\n        );\n      },\n\n      onPrepared: (): Promise<void> =>\n        Promise.all([\n          prepareSidebarData(app, themeConfig, sidebarSorter),\n          prepareThemeColorScss(app, themeConfig),\n          prepareSocialMediaIcons(app, icons),\n        ]).then(() => void 0),\n\n      plugins: getPluginConfig(\n        plugins,\n        themeConfig,\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        {\n          addThis,\n          backToTop,\n          hostname,\n          iconAssets,\n          iconPrefix,\n        },\n        legacy\n      ),\n\n      templateBuild: path.resolve(\n        __dirname,\n        \"../../templates/index.build.html\"\n      ),\n\n      clientConfigFile: (app) => prepareConfigFile(app, plugins, status),\n    };\n  };\n\nexport const hope = hopeTheme;\n"]}