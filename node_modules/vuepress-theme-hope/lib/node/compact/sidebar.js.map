{"version":3,"file":"sidebar.js","sourceRoot":"","sources":["../../../src/node/compact/sidebar.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,gBAAgB,EAAE,MAAM,YAAY,CAAC;AAC7D,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAQrC,MAAM,wBAAwB,GAAG,CAC/B,MAAiB,EACY,EAAE,CAC/B,MAAM;KACH,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;IACZ,IAAI,OAAO,IAAI,KAAK,QAAQ;QAAE,OAAO,IAAI,CAAC;IAE1C,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QAC5B,MAAM,aAAa,GAAuB;YACxC,CAAC,OAAO,EAAE,MAAM,CAAC;YACjB,CAAC,MAAM,EAAE,MAAM,CAAC;SACjB,CAAC;QAEF,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,gBAAgB,EAAE,SAAS,CAAC,EAAE,EAAE,CACtD,gBAAgB,CAAC;YACf,OAAO,EAAE,IAA+B;YACxC,gBAAgB;YAChB,SAAS;YACT,KAAK,EAAE,SAAS;SACjB,CAAC,CACH,CAAC;QAEF,aAAa,CACX,IAA+B,EAC/B,cAAc,EACd,kBAAkB,CACnB,CAAC;QAEF,6DAA6D;QAC7D,aAAa;QACb,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC9B,6DAA6D;YAC7D,aAAa;YACb,wBAAwB,CAAC,IAAI,CAAC,QAAqB,CAAC,CAAC;QAEvD,OAAO,IAA4B,CAAC;KACrC;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;KACD,MAAM,CAAC,CAAC,IAAI,EAAgC,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;AAEnE;;GAEG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAAG,CAClC,MAAe,EACiB,EAAE;IAClC,IAAI,MAAM,KAAK,KAAK;QAAE,OAAO,KAAK,CAAC;IACnC,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;QAAE,OAAO,wBAAwB,CAAC,MAAM,CAAC,CAAC;IAEnE,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM;QACtC,OAAO,MAAM,CAAC,WAAW,CACvB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAExB,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;YACjB,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;gBAAE,OAAO,CAAC,GAAG,EAAE,wBAAwB,CAAC,KAAK,CAAC,CAAC,CAAC;YAExE,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,KAAK;gBAC1C,OAAO,CAAC,GAAG,EAAuB,KAAK,CAAC,CAAC;YAE3C,MAAM,CAAC,KAAK,CACV,oFAAoF,CACrF,CAAC;YAEF,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QACtB,CAAC,CAAC,CACH,CAAC;IAEJ,MAAM,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;IAE9D,OAAO,KAAK,CAAC;AACf,CAAC,CAAC","sourcesContent":["import { droppedLogger, deprecatedLogger } from \"./utils.js\";\nimport { logger } from \"../utils.js\";\n\nimport type {\n  HopeThemeSidebarConfig,\n  HopeThemeSidebarArrayConfig,\n  HopeThemeSidebarItem,\n} from \"../../shared/index.js\";\n\nconst handleArraySidebarConfig = (\n  config: unknown[]\n): HopeThemeSidebarArrayConfig =>\n  config\n    .map((item) => {\n      if (typeof item === \"string\") return item;\n\n      if (typeof item === \"object\") {\n        const convertConfig: [string, string][] = [\n          [\"title\", \"text\"],\n          [\"path\", \"link\"],\n        ];\n\n        convertConfig.forEach(([deprecatedOption, newOption]) =>\n          deprecatedLogger({\n            options: item as Record<string, unknown>,\n            deprecatedOption,\n            newOption,\n            scope: \"sidebar\",\n          })\n        );\n\n        droppedLogger(\n          item as Record<string, unknown>,\n          \"sidebarDepth\",\n          \"Found in sidebar\"\n        );\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (Array.isArray(item.children))\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          handleArraySidebarConfig(item.children as unknown[]);\n\n        return item as HopeThemeSidebarItem;\n      }\n\n      return null;\n    })\n    .filter((item): item is HopeThemeSidebarItem => item !== null);\n\n/**\n * @deprecated You should use V2 standard sidebar config and avoid using it\n */\nexport const convertSidebarConfig = (\n  config: unknown\n): HopeThemeSidebarConfig | false => {\n  if (config === false) return false;\n  if (Array.isArray(config)) return handleArraySidebarConfig(config);\n\n  if (typeof config === \"object\" && config)\n    return Object.fromEntries(\n      Object.entries(config).map<\n        [string, HopeThemeSidebarArrayConfig | \"structure\" | false]\n      >(([key, value]) => {\n        if (Array.isArray(value)) return [key, handleArraySidebarConfig(value)];\n\n        if (value === \"structure\" || value === false)\n          return [key, <\"structure\" | false>value];\n\n        logger.error(\n          '\"sidebar\" value should be an array, \"structure\" or false when setting as an object'\n        );\n\n        return [key, false];\n      })\n    );\n\n  logger.error('\"sidebar\" config should be an array or object');\n\n  return false;\n};\n"]}