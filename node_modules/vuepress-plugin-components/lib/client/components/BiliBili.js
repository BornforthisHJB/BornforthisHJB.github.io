import{useEventListener as o}from"@vueuse/core";import{checkIsMobile as f}from"vuepress-shared/client";import{ref as p,computed as d,unref as u,onMounted as m,isRef as y,watch as b,defineComponent as v,h as w}from"vue";import"../styles/bilibli.scss";const s=e=>typeof e=="string"?e:`${e}px`,$=(e,t=0)=>{const l=p(),r=d(()=>s(u(e.width)||"100%")),a=p("auto"),n=c=>{const h=u(e.height),g=u(e.ratio)||16/9;return h?s(h):`${Number(c)/g+u(t)}px`},i=()=>{a.value=n(l.value.clientWidth)};return m(()=>{i(),y(t)&&b(t,()=>i()),o("orientationchange",()=>i()),o("resize",()=>i())}),{el:l,width:r,height:a}};var B=v({name:"BiliBili",props:{bvid:{type:String,required:!0},page:{type:Number,default:1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:Number,default:16/9},time:{type:Number,default:0},highQuality:{type:Boolean,default:!0},danmaku:{type:Boolean,default:!0}},setup(e){const t=p(!1),l=d(()=>t.value?0:68),r=()=>{t.value=f(navigator.userAgent)||a.value.clientWidth<640};m(()=>{r(),o("orientationchange",()=>r()),o("resize",()=>r())});const{el:a,width:n,height:i}=$(e,l);return()=>w("iframe",{ref:a,src:`https://player.bilibili.com/player.html?bvid=${e.bvid}&t=${e.time}&high_quality=${e.highQuality?1:0}&page=${e.page}&danmaku=${e.danmaku?1:0}`,class:"bilibili-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:n.value,height:i.value}})}});export{B as default};
//# sourceMappingURL=BiliBili.js.map
